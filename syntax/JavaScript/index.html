<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>JavaScript | 善良的xwysyy</title><meta name="author" content="善良的xwysyy"><meta name="copyright" content="善良的xwysyy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、Javascript 概述 1. JS 简介 Javascript，简称 JS， 是一种客户端脚本语言，主要用来向 HTML 网页添加各种动态效果。 作者是 Brendan Eich , 10天完成 Javascript 设计，网景公司初始名为 Livescript，后来和 Sun 合作，改名为 Javascript Javascript 是一种可以在客户端运行的脚本语言，不需要进行编译  编">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript">
<meta property="og:url" content="https://vercel.xwysyy.cn/syntax/JavaScript/index.html">
<meta property="og:site_name" content="善良的xwysyy">
<meta property="og:description" content="一、Javascript 概述 1. JS 简介 Javascript，简称 JS， 是一种客户端脚本语言，主要用来向 HTML 网页添加各种动态效果。 作者是 Brendan Eich , 10天完成 Javascript 设计，网景公司初始名为 Livescript，后来和 Sun 合作，改名为 Javascript Javascript 是一种可以在客户端运行的脚本语言，不需要进行编译  编">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://vercel.xwysyy.cn/image/img-background/40.jpg">
<meta property="article:published_time" content="2023-04-21T16:00:00.000Z">
<meta property="article:modified_time" content="2023-08-24T10:08:04.019Z">
<meta property="article:author" content="善良的xwysyy">
<meta property="article:tag" content="syntax">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vercel.xwysyy.cn/image/img-background/40.jpg"><link rel="shortcut icon" href="/img/%E5%A4%B4%E5%83%8F.png"><link rel="canonical" href="https://vercel.xwysyy.cn/syntax/JavaScript/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":20,"languages":{"author":"作者: 善良的xwysyy","link":"链接: ","source":"来源: 善良的xwysyy","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaScript',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-24 18:08:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><script src="/js/echarts.min.js"></script><link rel="stylesheet" type="text/css" href="/css/asidefloat.css"><link rel="stylesheet" type="text/css" href="/css/mystyle.css"><link rel="stylesheet" type="text/css" href="/css/console.css"><link rel="stylesheet" type="text/css" href="/css/double_row.css"><link rel="stylesheet" href="/css/essay_page.css"><link rel="stylesheet" href="/css/todolist.css"><link rel="stylesheet" href="/css/guanyv.css"><link rel="stylesheet" href="/css/weibo.css"><style id="settingStyle"></style><style id="yjjs"></style><style id="themeColor"></style><link rel="stylesheet" type="text/css" href="css/_custom/heoMainColor.css"><link rel="stylesheet" type="text/css" href="css/_custom/categoryBar.css"><script async src="/js/categoryBar.js"></script><link rel="stylesheet" type="text/css" href="css/404.css"><script type="text/javascript" src="js/jquery.min.js"></script><link rel="stylesheet" href="/css/records.css"><script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>LA.init({id:"3FeErm4Qj3nJOxIa",ck:"3FeErm4Qj3nJOxIa"})</script><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="/css/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E5%A4%B4%E5%83%8F.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/log/"><i class="fa-fw fas fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://uptime-kuma.xwysyy.cn/status/monitor"><i class="fa-fw fas fa-shield-alt"></i><span> 监控</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-file-alt"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/charts/"><i class="fa-fw fas fa-chart-area"></i><span> 统计</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-images"></i><span> 图片</span></a></li><li><a class="site-page child" href="/ToDoList/"><i class="fa-fw fas fa-bell"></i><span> 待办</span></a></li><li><a class="site-page child" href="/records/"><i class="fa-fw fas fa-comments"></i><span> 文字瞬间</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fas fa-user-friends"></i><span> 鱼塘</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-archive"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://xwysyy.github.io/Fireworks"><i class="fa-fw fa fa-fire"></i><span> 烟花</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://xwysyy.github.io/reference"><i class="fa-fw fa fa-code"></i><span> 参考</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://xwysyy.github.io/Music"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about-chat/"><i class="fa-fw fas fa-comment"></i><span> 交互版</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-envelope"></i><span> 静态版</span></a></li><li><a class="site-page child" href="/essay/"><i class="fa-fw fas fa-edit"></i><span> 杂谈</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><div id="console"><div class="close-btn" onclick="heo.hideConsole()" href="javascript:void(0);"><i class="fas fa-circle-xmark"></i></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments" onclick="heo.hideConsole()"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最近评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags" onclick="heo.hideConsole()"><div class="card-content"><div class="author-content-item-tips">标签</div><span class="author-content-item-title">寻找感兴趣的领域</span></div><div class="card-tag-cloud"><a href="/tags/CPP/" style="font-size: 1em; color: #d3d3d3">CPP</a> <a href="/tags/CSS/" style="font-size: 1em; color: #d3d3d3">CSS</a> <a href="/tags/ChatGPT/" style="font-size: 1em; color: #d3d3d3">ChatGPT</a> <a href="/tags/Git/" style="font-size: 1em; color: #d3d3d3">Git</a> <a href="/tags/HTML/" style="font-size: 1em; color: #d3d3d3">HTML</a> <a href="/tags/JavaScript/" style="font-size: 1em; color: #d3d3d3">JavaScript</a> <a href="/tags/LaTeX/" style="font-size: 1em; color: #d3d3d3">LaTeX</a> <a href="/tags/MySQL/" style="font-size: 1em; color: #d3d3d3">MySQL</a> <a href="/tags/Python/" style="font-size: 1em; color: #d3d3d3">Python</a> <a href="/tags/Sublime-Text/" style="font-size: 1em; color: #d3d3d3">Sublime Text</a> <a href="/tags/Typora/" style="font-size: 1em; color: #d3d3d3">Typora</a> <a href="/tags/ai/" style="font-size: 1em; color: #d3d3d3">ai</a> <a href="/tags/algorithm/" style="font-size: 1em; color: #d3d3d3">algorithm</a> <a href="/tags/course/" style="font-size: 1em; color: #d3d3d3">course</a> <a href="/tags/project/" style="font-size: 1em; color: #d3d3d3">project</a> <a href="/tags/syntax/" style="font-size: 1em; color: #d3d3d3">syntax</a> <a href="/tags/tutorial/" style="font-size: 1em; color: #d3d3d3">tutorial</a></div></div><div class="console-card history" onclick="heo.hideConsole()"> </div></div></div><div class="button-group"><div class="console-btn-item"> <a class="darkmode_switchbutton" onclick="rm.switchDarkMode()" title="显示模式切换" href="javascript:void(0);"><i class="fas fa-moon" style="font-size: 1rem;"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="heo.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="fas fa-arrows-alt-h"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="heo.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="fas fa-keyboard"></i></a></div><div class="console-btn-item" id="assist-open" onclick="heo.hideConsole()" title="无障碍工具栏"><a class="assist-btn"><i class="fas fa-wheelchair"></i></a></div><div class="console-btn-item" id="consoleCommentBarrage" onclick="heo.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="fa-solid fa-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="heo.musicToggle()" title="音乐开关"><a class="music-switch"><i class="fas fa-music"></i></a></div></div><div class="console-mask" onclick="heo.hideConsole()" href="javascript:void(0);"></div></div><header class="post-bg" id="page-header" style="background-image: url('/image/img-background/40.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="善良的xwysyy"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E5%A4%B4%E5%83%8F.png"/><span class="site-name">善良的xwysyy</span></a></span><div id="none_space"></div><div class="mask-name-container"><center id="name-container"><a id="page-name" href="javascript:btf.scrollToDest(0, 500)">PAGE_NAME</a></center></div><div id="menus"><div class="back-home-button" tabindex="-1"><i class="back-home-button-icon fas fa-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">主页</div><div class="back-menu-list"><a class="back-menu-item" href="https://index.xwysyy.cn" title="xwysyy主页" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/%E5%A4%B4%E5%83%8F.jpg"/><span class="back-menu-item-text">xwysyy主页</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客线路</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.xwysyy.cn" title="腾讯云线路" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/cube1.png"/><span class="back-menu-item-text">腾讯云主线路</span></a><a class="back-menu-item" href="https://vercel.xwysyy.cn" title="Vercel线路" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/cube2.png"/><span class="back-menu-item-text">Vercel线路</span></a><a class="back-menu-item" href="https://www.xwysyy.life" title="Github线路" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/cube4.png"/><span class="back-menu-item-text">Github线路</span></a><a class="back-menu-item" href="https://netlify.xwysyy.cn" title="Netlify线路" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/cube5.png"/><span class="back-menu-item-text">Netlify线路</span></a><a class="back-menu-item" href="https://xwysyy.pages.dev" title="Cloudflare线路" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/cube6.png"/><span class="back-menu-item-text">Cloudflare线路</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">部署项目</div><div class="back-menu-list"><a class="back-menu-item" href="https://pan.xwysyy.cn" title="xwysyy云盘" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/cube7.png"/><span class="back-menu-item-text">xwysyy云盘</span></a><a class="back-menu-item" href="https://cube.xwysyy.cn" title="Lijz的魔方小站" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/cube9.png"/><span class="back-menu-item-text">Lijz的魔方小站</span></a><a class="back-menu-item" href="https://chatgpt.xwysyy.cn" title="xwysyy ChatGPT" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-icon/cube13.png"/><span class="back-menu-item-text">xwysyy ChatGPT</span></a></div></div></div></div><div class="nav-button" id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="nav-button" id="nav-totop"><a class="totopbtn"><i class="fas fa-arrow-up"></i><span id="percent" onclick="btf.scrollToDest(0,500)"> </span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/log/"><i class="fa-fw fas fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://uptime-kuma.xwysyy.cn/status/monitor"><i class="fa-fw fas fa-shield-alt"></i><span> 监控</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-file-alt"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/charts/"><i class="fa-fw fas fa-chart-area"></i><span> 统计</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-images"></i><span> 图片</span></a></li><li><a class="site-page child" href="/ToDoList/"><i class="fa-fw fas fa-bell"></i><span> 待办</span></a></li><li><a class="site-page child" href="/records/"><i class="fa-fw fas fa-comments"></i><span> 文字瞬间</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fas fa-user-friends"></i><span> 鱼塘</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-archive"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://xwysyy.github.io/Fireworks"><i class="fa-fw fa fa-fire"></i><span> 烟花</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://xwysyy.github.io/reference"><i class="fa-fw fa fa-code"></i><span> 参考</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://xwysyy.github.io/Music"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about-chat/"><i class="fa-fw fas fa-comment"></i><span> 交互版</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-envelope"></i><span> 静态版</span></a></li><li><a class="site-page child" href="/essay/"><i class="fa-fw fas fa-edit"></i><span> 杂谈</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaScript</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-04-21T16:00:00.000Z" title="发表于 2023-04-22 00:00:00">2023-04-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-08-24T10:08:04.019Z" title="更新于 2023-08-24 18:08:04">2023-08-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/syntax/">syntax</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.4w</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>221分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaScript"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>一、Javascript 概述</h1>
<h2 id="1-JS-简介">1. JS 简介</h2>
<p>Javascript，简称 JS， 是一种客户端脚本语言，主要用来向 HTML 网页添加各种动态效果。</p>
<p>作者是 Brendan Eich , 10天完成 Javascript 设计，网景公司初始名为 Livescript，后来和 Sun 合作，改名为 Javascript</p>
<p>Javascript 是一种可以在客户端运行的脚本语言，不需要进行编译</p>
<ul>
<li>编译型语言需要将所有代码在编译器中进行编译再转换为机器语言让CPU运行</li>
<li>解释型语言通过解释器逐行转换为机器语言执行</li>
</ul>
<p>Javascript 可以做什么？</p>
<ul>
<li>表单动态校验（密码强度检测） 也是 JS 产生最初的目的</li>
<li>网页特效</li>
<li>服务端开发（Node.js）</li>
<li>命令行工具（Node.js）</li>
<li>桌面程序 (Electron)</li>
<li>App (Cordova)</li>
<li>控制硬件-物联网 (Ruff)</li>
<li>游戏开发 (cocos2d-js)</li>
</ul>
<h2 id="2-JS-组成">2. JS 组成</h2>
<ul>
<li>ECMAscript - Javascript 语法</li>
<li>DOM - 页面文档对象模型</li>
<li>BOM - 浏览器对象模型</li>
</ul>
<p>ECMAscript</p>
<p>ECMAScript 是 ECMA 国际进行标准化的一门编程语言，往往被称为 Javascript 或 JScript，实际上后两者是 ECMAScript 的是实现和扩展</p>
<p>DOM - 页面文档对象模型</p>
<p>文档对象模型（Document Object Model）通过 DOM 提供接口可以对页面上的各种元素进行操作（大小、位置、颜色）</p>
<p>BOM - 浏览器对象模型</p>
<p>浏览器对象模型（Browser Object Model），可以对浏览器窗口进行互动的对象结构，通过BOM可以操作浏览器窗口，比如弹窗、控制浏览器跳转、获取分辨率等。</p>
<h1>二、JS 基本使用</h1>
<h2 id="1-JS-嵌入方式">1. JS 嵌入方式</h2>
<p>在 HTML 中使用 JS 可以用以下几种方式实现：</p>
<ul>
<li>行内式</li>
<li>内嵌式</li>
<li>外部引用 js 文件</li>
</ul>
<p>行内式，可以在 html 元素中直接用使用 js 语句，但是一般都是调用函数或简短的语句。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input type=&quot;button&quot; value=&quot;Click Me!&quot; onclick=&quot;alert(&#x27;Hellow World&#x27;)&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>内嵌式，一般用于实现比较小的功能，代码不长的情况</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    alert(&#x27;Hello World&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>外部JS文件，最常见的方式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script src=&quot;my.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-JS-注释">2. JS 注释</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 单行注释    </span><br><span class="line">/*  多行注释 */</span><br></pre></td></tr></table></figure>
<h2 id="3-JS-输入输出语句">3. JS 输入输出语句</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alert(msg)  // 浏览器弹出框</span><br><span class="line">console.log(msg)  // 浏览器控制台打印输出信息</span><br><span class="line">prompt(info)  // 浏览器弹出输入框，用户可以输入</span><br></pre></td></tr></table></figure>
<h1>三、变量</h1>
<h2 id="1-定义">1. 定义</h2>
<p>变量是程序在内存中申请的一块用来存放数据的空间。通过变量名称我们可以使用或修改保存在系统中的对应的数据。</p>
<h2 id="2-声明变量">2. 声明变量</h2>
<p>Js 是一种弱类型或者说动态语言，不用提前声明变量的类型，变量的类型会自动判断。即使赋值之后，变量的类型根据重新赋值的数据类型同样进行改变。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age;  <span class="comment">// 声明一个名称为age的变量</span></span><br><span class="line">age = <span class="number">12</span>;  <span class="comment">// 给age这个变量赋值为12</span></span><br></pre></td></tr></table></figure>
<p>通常声明与赋值一起使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">12</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-初始化变量">3. 初始化变量</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">12</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;Tom&#x27;</span></span><br><span class="line">name = <span class="string">&#x27;OO&#x27;</span>  <span class="comment">// 再次给相同变量赋值则不用 var 进行初始化</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>, b = <span class="number">20</span>, c = <span class="number">30</span>;  <span class="comment">// 可以同时声明多个变量</span></span><br></pre></td></tr></table></figure>
<h2 id="4-输入存储变量">4. 输入存储变量</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="title function_">prompt</span>(<span class="string">&#x27;请输入你的名字&#x27;</span>)</span><br><span class="line"><span class="title function_">alert</span>(name)</span><br></pre></td></tr></table></figure>
<h2 id="5-变量的命名规范">5. 变量的命名规范</h2>
<ul>
<li>由字母、数字、下划线、$符号组成，不能以数字开头</li>
<li>不能是关键字和保留字，例如：for,while,this,name</li>
<li>区分大小写</li>
<li>变量名必须有意义</li>
<li>小驼峰命名法，如：<code>myName</code></li>
<li>建议不要用$作为变量名</li>
</ul>
<h2 id="6-查看变量">6. 查看变量</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">alert</span>(变量名)  <span class="comment">// 弹出框显示</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(变量名)  <span class="comment">// 控制台显示</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(变量名)  <span class="comment">// HTML 页面上显示</span></span><br></pre></td></tr></table></figure>
<h1>四、数据类型</h1>
<h2 id="1-数字型">1. 数字型</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">3</span>  <span class="comment">// 十进制</span></span><br><span class="line"><span class="number">010</span>  <span class="comment">// 八进制</span></span><br><span class="line"><span class="number">0xa</span>  <span class="comment">// 十六进制</span></span><br><span class="line"><span class="number">3.14</span>  <span class="comment">// 小数</span></span><br><span class="line"><span class="title class_">NaN</span>  <span class="comment">// 非数字 Not a Number</span></span><br></pre></td></tr></table></figure>
<p>数字型范围：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>.<span class="property">MAX_VALUE</span>);  <span class="comment">// 1.7976931348623157e+308</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>.<span class="property">MIN_VALUE</span>);  <span class="comment">// 5e-324</span></span><br></pre></td></tr></table></figure>
<h2 id="2-字符串型">2. 字符串型</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">&#x27;这是个字符串&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>字符串转义符：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">\n  <span class="comment">// 换行</span></span><br><span class="line">\r  <span class="comment">// 回车</span></span><br><span class="line">\\</span><br><span class="line">\<span class="string">&#x27;</span></span><br><span class="line"><span class="string">\&quot;</span></span><br><span class="line"><span class="string">\t</span></span><br><span class="line"><span class="string">\b  // 空格</span></span><br><span class="line"><span class="string">\xnn  // 16进制字符，如 \x41 代表 &#x27;</span>A<span class="string">&#x27;</span></span><br><span class="line"><span class="string">\unnn  // 16进制 unicode 字符， 如 \u03a3 代表∑</span></span><br></pre></td></tr></table></figure>
<p>字符串长度：</p>
<p>用 <code>变量.length</code> 可以得到字符串长度，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str1);  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果：11</span></span><br></pre></td></tr></table></figure>
<p>字符串拼接：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = str1 + str2;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;字符串&#x27;</span> + <span class="number">123</span>;  <span class="comment">// 输出字符串123，字符串拼接其他类型会自动转换为字符串</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;My age is&#x27;</span> + age + <span class="string">&#x27;years old&#x27;</span>;  <span class="comment">// 字符串+变量拼接</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>只要与字符串做加法运算都会被转换成字符串</p>
</blockquote>
<p>字符串中的双引号和单引号：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;他是&#x27;程序猿&#x27;&quot;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-布尔型">3. 布尔型</h2>
<p>布尔型 Boolean 只有两个值，一个是  true， 一个是 false</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span> + <span class="literal">true</span>);  <span class="comment">// 在运算中，true代表1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>+ <span class="literal">false</span>);  <span class="comment">// false 代表0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;t&#x27;</span> + <span class="literal">true</span>);  <span class="comment">// 在字符串拼接，会直接以字符串形式拼接 ttrue</span></span><br></pre></td></tr></table></figure>
<h2 id="4-null-空值">4. null 空值</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">null</span>+ <span class="string">&#x27;pp&#x27;</span>);  <span class="comment">// 会拼接字符串 nullpp</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">null</span> + <span class="literal">true</span>);  <span class="comment">// 会输出 1</span></span><br></pre></td></tr></table></figure>
<p>null表示&quot;没有对象&quot;，即该处不应该有值。</p>
<ul>
<li>
<p>作为函数的参数，表示该函数的参数不是对象。</p>
</li>
<li>
<p>作为对象原型链的终点。</p>
</li>
</ul>
<h2 id="5-undefined-未定义">5. undefined 未定义</h2>
<p>一个声明后没有被赋值的变量会有一个默认值 undefined</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span> + <span class="string">&#x27;pp&#x27;</span>);  <span class="comment">// 会拼接字符串 undefinedpp</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span> + <span class="literal">true</span>);  <span class="comment">// 会输出 NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span> + <span class="number">1</span>);  <span class="comment">// 会输出 NaN</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>变量被声明了，但没有赋值时，就等于undefined。</p>
</li>
<li>
<p>调用函数时，应该提供的参数没有提供，该参数等于undefined。</p>
</li>
<li>
<p>对象没有赋值的属性，该属性的值为undefined。</p>
</li>
<li>
<p>函数没有返回值时，默认返回undefined。</p>
</li>
</ul>
<p><strong>undefined 和 null 的区别</strong></p>
<p>只设置了null作为表示&quot;无&quot;的值。根据C语言的传统，null被设计成可以自动转为0。JavaScript的最初版本是这样区分的：null是一个表示&quot;无&quot;的对象，转为数值时为0；undefined是一个表示&quot;无&quot;的原始值，转为数值时为NaN。</p>
<ul>
<li>undefined和null在if语句中，都会被自动转为false</li>
</ul>
<h2 id="6-其他类型">6. 其他类型</h2>
<ul>
<li>数组</li>
<li>对象</li>
</ul>
<h2 id="7-数据类型转换">7. 数据类型转换</h2>
<h3 id="7-1-typeof-查看数据类型">7.1. typeof() 查看数据类型</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> num);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">typeof</span>(num));  <span class="comment">// 也可以使用参数的形式查看</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>null 返回的是 object</p>
</blockquote>
<h3 id="7-2-转换为字符串">7.2. 转换为字符串</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="title function_">alert</span>(num.<span class="title function_">toString</span>());  <span class="comment">// 无法用 .toString() 方法转换 undefined 和 null</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="title class_">String</span>(num));  <span class="comment">// 可以转换 undefined 和 null</span></span><br><span class="line"><span class="title function_">alert</span>(num + <span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="7-3-转换为数字型">7.3. 转换为数字型</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 转换为整型</span></span><br><span class="line"><span class="built_in">parseInt</span>(num);</span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;3.14&#x27;</span>);  <span class="comment">// 取整为3</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;90px&#x27;</span>);  <span class="comment">// 去掉单位（只取int遇到字符串自动中断）</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;rem120px&#x27;</span>)  <span class="comment">// 字符串转换后变为 NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">undefined</span>)  <span class="comment">// undefined 转换后变为 NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">null</span>)  <span class="comment">// 转换后为0</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">true</span>)  <span class="comment">// 布尔型转换后变为 1 或 0 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转换为浮点型</span></span><br><span class="line"><span class="built_in">parseFloat</span>(num);</span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="number">3</span>);  <span class="comment">// 还是输出3，不会自带小数点，3.0也是一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 强制转换</span></span><br><span class="line"><span class="title class_">Number</span>(num);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐式转换，可以用 - * / （加号正能用作正负值将字符串转为数字型，如果用在变量后边则变为拼接字符串）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="string">&#x27;100&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123&#x27;</span> - <span class="number">120</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;t&#x27;</span> - <span class="number">120</span>);  <span class="comment">// 输出 NaN</span></span><br></pre></td></tr></table></figure>
<h3 id="7-4-转换为布尔型">7.4. 转换为布尔型</h3>
<p>代表空、否定的值都会被转换为 false，如：0，‘’，NaN，null，undefined<br>
其余值都会被转换为 true</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Boolen</span>(<span class="string">&#x27;abc&#x27;</span>);  <span class="comment">// 返回 True</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="number">0</span>);  <span class="comment">// 返回 False</span></span><br></pre></td></tr></table></figure>
<h1>五、Javascript 运算符</h1>
<p>表达式：任何能代表值的式子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var a = 10, b=20;</span><br><span class="line">var c = a + b; // a + b 就是表达式</span><br></pre></td></tr></table></figure>
<h2 id="1-算数运算符">1. 算数运算符</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">+ - * / %</span><br></pre></td></tr></table></figure>
<p>浮点数运算精度问题，尽量避免用浮点数直接进行运算</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">0.1</span> + <span class="number">0.2</span>);  <span class="comment">// 0.30000000000000004</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">0.07</span> * <span class="number">100</span>);  <span class="comment">// 7.000000000000001</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">0.1</span> + <span class="number">0.2</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num == <span class="number">0.3</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h2 id="2-递增递减运算符">2.  递增递减运算符</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">++i;  <span class="comment">// 前置递增（先自加后返回）</span></span><br><span class="line">--i;  <span class="comment">// 前置递减</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(++i + <span class="number">10</span>);  <span class="comment">// 11 （先自加，然后参与运算）</span></span><br><span class="line"></span><br><span class="line">i++;  <span class="comment">// 后置递增（先返回值，后自增）</span></span><br><span class="line">i--;  <span class="comment">// 后置递减</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i++ + <span class="number">10</span>);  <span class="comment">// 20 （先运算，后自加）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>前置后置递增进阶：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> f = e++ + ++e;</span><br><span class="line">consolo.<span class="title function_">log</span>(f);  <span class="comment">// 22（e++ 返回 10，然后e自增为11，++e 返回12）</span></span><br></pre></td></tr></table></figure>
<h2 id="3-比较运算符">3. 比较运算符</h2>
<p>比较运算符，是两个数据进行比较时所使用的运算符，比较运算后，会返回一个布尔值（true / false）作为运算结果。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 普通比较运算符</span></span><br><span class="line">&lt;</span><br><span class="line">&gt;</span><br><span class="line">&gt;=</span><br><span class="line">&lt;=</span><br><span class="line">==  <span class="comment">// 不会比较数据类型 (18 == &#x27;18&#x27; 为真)</span></span><br><span class="line">=== <span class="comment">// 会比较数据类型</span></span><br><span class="line">!=</span><br><span class="line">!== <span class="comment">// 全不等（包括数据类型）</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>比较运算符两侧表达式先转为布尔型再进行比较</li>
<li>‘0’ 用 Boolen() 做判断的时候是 true，但是用 == 比较运算符和布尔值比较的时候 ‘0’ 是 false，但 ‘0’ == 0 是真</li>
<li>undefined 和 null 在 Boolen() 做判断的时候是 flase，但是用 == 比较的时候他们不等于 false</li>
<li>NaN 和任何值都不相等，包括它本身，即 NaN == NaN 为假</li>
</ul>
</blockquote>
<h2 id="4-逻辑运算符">4. 逻辑运算符</h2>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;&amp;</td>
<td>逻辑与</td>
</tr>
<tr>
<td>||</td>
<td>逻辑或</td>
</tr>
<tr>
<td>!</td>
<td>逻辑非</td>
</tr>
</tbody>
</table>
<ul>
<li>如果只是普通逻辑运算（两侧都是布尔型），返回的还是布尔型</li>
<li>与 undefined, null 做 &amp;&amp; 运算返回 undefined, null</li>
<li>!1 返回 false</li>
</ul>
<h3 id="4-1-逻辑运算短路">4.1. 逻辑运算短路</h3>
<p>逻辑与运算短路</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当表达式1和2为真时，返回表达式2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span> &amp;&amp; <span class="number">456</span>);  <span class="comment">// 返回456</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当表达式1为假时，直接返回表达式1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">0</span> &amp;&amp; <span class="number">456</span>);  <span class="comment">// 返回0</span></span><br></pre></td></tr></table></figure>
<p>逻辑或运算短路</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当表达式1为真，则返回表达式1</span></span><br><span class="line"><span class="comment">// 当表达式1为假，则返回表达式2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span> || num++);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h2 id="5-赋值运算符">5. 赋值运算符</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">num += <span class="number">2</span>;  <span class="comment">// 相当于 num = num + 2</span></span><br><span class="line">num -= <span class="number">1</span>;</span><br><span class="line">num *= <span class="number">1</span>;</span><br><span class="line">num /= <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h2 id="7-运算符优先级">7. 运算符优先级</h2>
<table>
<thead>
<tr>
<th>运算符</th>
<th>结合性</th>
<th>优先级</th>
</tr>
</thead>
<tbody>
<tr>
<td>.、[ ]、( )</td>
<td>从左到右</td>
<td>最高</td>
</tr>
<tr>
<td>++、–、-、！、new、typeof</td>
<td>从右到左</td>
<td></td>
</tr>
<tr>
<td>*、/、%</td>
<td>从左到右</td>
<td></td>
</tr>
<tr>
<td>+、-</td>
<td>从左到右</td>
<td></td>
</tr>
<tr>
<td>＜、＜=、＞、＞=、in、instanceof</td>
<td>从左到右</td>
<td></td>
</tr>
<tr>
<td>==、!=、===、!==</td>
<td>从左到右</td>
<td></td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>从左到右</td>
<td></td>
</tr>
<tr>
<td>II</td>
<td>从左到右</td>
<td></td>
</tr>
<tr>
<td>?:</td>
<td>从右到左</td>
<td></td>
</tr>
<tr>
<td>=、*=、/=、％=、+=、-=、&amp;=、^=、!=</td>
<td>从右到左</td>
<td></td>
</tr>
<tr>
<td>,</td>
<td>从左到右</td>
<td>最低</td>
</tr>
</tbody>
</table>
<p>任何写这种式子的人都是神经病：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="number">4</span> &gt;= <span class="number">6</span> || <span class="string">&#x27;a&#x27;</span> != <span class="string">&#x27;b&#x27;</span> &amp;&amp; !(<span class="number">12</span> * <span class="number">2</span> == <span class="number">144</span>) &amp;&amp; <span class="literal">true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ul>
<li>赋值运算符优先级最低，先不用看它</li>
<li>然后是逻辑运算符 || 和 &amp;&amp;，从左到右开始</li>
<li>4 &gt;= 6 为 false，所以看右侧返回值</li>
<li>右侧的三个 &amp;&amp; 返回的都是 true，最后表达式返回 true</li>
</ul>
<blockquote>
<p>如果最右侧表达式是数值的话，则返回数值</p>
</blockquote>
<h1>六、流程控制</h1>
<h2 id="1-顺序结构">1. 顺序结构</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">A -&gt; B -&gt; C</span><br></pre></td></tr></table></figure>
<h2 id="2-选择结构">2. 选择结构</h2>
<h3 id="2-1-if-分支结构">2.1. if 分支结构</h3>
<p>单分支结构</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">    <span class="comment">// 执行语句</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 其他代码</span></span><br></pre></td></tr></table></figure>
<ul>
<li>当条件表达式为真时，程序进入分支，执行完毕后，继续执行其他代码</li>
<li>当条件表达式为假时，程序直接跳过条件分支，执行其他代码</li>
</ul>
<p>双向分支</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">    <span class="comment">// 执行语句</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 执行语句</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他代码</span></span><br></pre></td></tr></table></figure>
<ul>
<li>当条件表达式为真时，程序进入分支，执行完毕后，继续执行其他代码</li>
<li>当条件表达式为假时，程序执行 else 代码块中的代码，执行完毕后再执行其他代码</li>
</ul>
<p>多分支结构</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件表达式<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// 执行语句1</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (条件表达式<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="comment">// 执行语句2</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 执行语句3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 其他代码</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>如果满足条件表达式1，则执行执行语句1，直接跳出</p>
</li>
<li>
<p>如果不满足，则判断条件表达式2，为真则执行语句2，不为真则去执行 else</p>
</li>
</ul>
<blockquote>
<p>多分支语句只是多选一，最后只有一个语句执行</p>
</blockquote>
<p>例：判断分数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> score = <span class="title function_">promot</span>(<span class="string">&#x27;请输入分数：&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> (score &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;优&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">80</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;良&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;中&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;差&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-三元运算符">2.2. 三元运算符</h3>
<p>如果条件表达式结果为真，则返回表达式1,的值，否则返回表达式2的值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">条件表达式 ? 表达式<span class="number">1</span> : 表达式<span class="number">2</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//输入一个 0~59 数字，如果小于10，则在数字前边补0</span></span><br><span class="line"><span class="keyword">var</span> time = <span class="title function_">prompt</span>(<span class="string">&#x27;请输入一个0~59的数字&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time&lt;<span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + time : time);</span><br></pre></td></tr></table></figure>
<h3 id="2-3-Switch">2.3. Switch</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="attr">value1</span>:</span><br><span class="line">        <span class="comment">// 执行语句1</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="attr">value2</span>:</span><br><span class="line">        <span class="comment">// 执行语句2</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="comment">// 如果无条件满足，最终执行语句</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>开发中表达式通常写为变量，变量值需要和 case 的 value 值全匹配，值和数据必须完全一致</p>
</blockquote>
<p><strong>Switch 与 IF 区别</strong></p>
<ol>
<li>switch…case 语句通常处理 case 为比较确定值的情况，if…else语句通常用于范围判断（大于、小于）</li>
<li>switch 语句进行条件判断直接跳转到case，效率更高，if 语句是顺序判断，效率低</li>
</ol>
<h2 id="3-循环">3. 循环</h2>
<h3 id="3-1-for-循环">3.1. for 循环</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(初始化变量; 条件表达式; 操作表达式)&#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化变量： 用 var 声明的一个普通变量，通常用于计数器使用</span></span><br><span class="line"><span class="comment">// 条件表达式： 用来判断每一次循环是否继续执行，是终止的条件</span></span><br><span class="line"><span class="comment">// 操作表达式： 是每次循环最后执行的代码，经常用于计数器变量的更新（递增或递减）</span></span><br></pre></td></tr></table></figure>
<p>例：输出一百句你好</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i&lt;=<span class="number">100</span>; i++)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例：从0加到100</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sum =<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i&lt;=<span class="number">100</span>; i++)&#123;</span><br><span class="line">    sum+=i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-嵌套循环">3.2. 嵌套循环</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (外层循环初始化变量; 外层循环表条件达式; 外层操作表达式)&#123;</span><br><span class="line">    <span class="keyword">for</span>(内层循环初始化变量; 内层循环表条件达式; 内层操作表达式)&#123;</span><br><span class="line">        <span class="comment">// 循环代码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>外层循环一次，内层循环执行全部</p>
</blockquote>
<p>例：输出 5x5 的 *</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">1</span>; j &lt;= <span class="number">5</span>; j++) &#123;</span><br><span class="line">        str = str + <span class="string">&quot;*&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    str = str + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br></pre></td></tr></table></figure>
<h3 id="3-3-while-循环">3.3. while 循环</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(条件表达式)&#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例：用 while 实现从1加到100</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(num&lt;=<span class="number">100</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">    num++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>while 循环一般需要配一个计数器，然后再循环体内设置一个终止循环，否则会陷入死循环</p>
</blockquote>
<h3 id="3-4-do-while-循环">3.4. do while 循环</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125; <span class="keyword">while</span>(条件表达式)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>和 while 循环比，do while 循环至少需要执行一次，然后进行判断是否终止循环。</p>
</blockquote>
<h3 id="3-5-continue-和-break">3.5. continue 和 break</h3>
<ul>
<li>break 关键字用于直接跳出循环</li>
<li>continue 关键字用于立即跳出本次循环，进入下一次循环</li>
</ul>
<h3 id="3-6-断点调试">3.6. 断点调试</h3>
<p>在 Chrome 中 F12 进入调试模式，进入 Sources，在代码行数下断点，然后刷新则会进入到断点</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/1.jpg" alt="image-20210419120644633"></p>
<h1>七、数组</h1>
<p>数组可以把一组相关的数据一起存放，并提供方便的访问方式。</p>
<h2 id="1-创建数组">1. 创建数组</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 利用对象创建数组</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用 [] 快捷创建数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;Pink&#x27;</span>, <span class="title class_">True</span>];</span><br></pre></td></tr></table></figure>
<h2 id="2-访问数组元素">2. 访问数组元素</h2>
<p>数组可以通过索引来访问、设置、修改对应的数组元素，可以通过 “数组名[索引]“ 的方式来获取数组中的元素。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;王五&#x27;</span>, <span class="string">&#x27;淑芬&#x27;</span>];</span><br><span class="line"><span class="comment">// 索引号：   0       1      2      3</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1);  <span class="comment">// 输出整个数组所有元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1[<span class="number">0</span>]);  <span class="comment">// 使用 数组名[索引号] 获取数组数组内指定元素的值</span></span><br></pre></td></tr></table></figure>
<h2 id="3-遍历数组">3. 遍历数组</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr= [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-数组长度属性-length">4. 数组长度属性 length</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr= [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">length</span>);  <span class="comment">// 输出4</span></span><br></pre></td></tr></table></figure>
<p>利用 length 添加新的数组元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>];</span><br><span class="line">arr[arr.<span class="property">length</span>] = <span class="string">&#x27;e&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[arr.<span class="property">length</span> - <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">e</span><br></pre></td></tr></table></figure>
<h2 id="6-冒泡排序">6. 冒泡排序</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span> - <span class="number">1</span>; i++) &#123; <span class="comment">// 外层循环</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt;= arr.<span class="property">length</span> - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">var</span> temp = arr[j];</span><br><span class="line">            arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">            arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br></pre></td></tr></table></figure>
<h1>八、函数</h1>
<h2 id="1-声明函数">1. 声明函数</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声明函数</span></span><br><span class="line"><span class="keyword">function</span> 函数名()&#123;</span><br><span class="line">    <span class="comment">// 函数内部代码，又称为函数体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line">函数名();  </span><br></pre></td></tr></table></figure>
<p>例：将1~100 累加封装成函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">100</span>; i++)&#123;</span><br><span class="line">        sum = sum+i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(sum);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>();</span><br></pre></td></tr></table></figure>
<h2 id="2-函数参数">2. 函数参数</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名(形参<span class="number">1</span>, 形参<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br><span class="line">函数名(实参<span class="number">1</span>, 实参<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>函数调用参数实例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cook</span>(<span class="params">arg</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">cook</span>(<span class="string">&#x27;炒米饭&#x27;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>如果调用函数的时候，实参个数大于形参，则只会以形参个数为准</li>
<li>如果调用函数的时候，实参个数小于形参，未使用的形参值为 undefined</li>
</ul>
<h2 id="3-return-返回值">3. return 返回值</h2>
<p>函数执行完毕后，只完成里边的代码，如果我们想要获取到函数运行中产生的数据，就需要用到返回值。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getResult</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">666</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getResult</span>());</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>return 会终止函数并只会返回一个值，返回的是最后一个值</p>
</li>
<li>
<p>如果函数没有 return 则会返回 undefined</p>
</li>
</ul>
<h2 id="4-不定参数传递">4. 不定参数传递</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="attr">callee</span>: ƒ, <span class="title class_">Symbol</span>(<span class="title class_">Symbol</span>.<span class="property">iterator</span>): ƒ]</span><br></pre></td></tr></table></figure>
<p>伪数组：</p>
<ol>
<li>
<p>具有数组 length 属性</p>
</li>
<li>
<p>按照索引方式进行存储</p>
</li>
<li>
<p>它没有真正数组的一些方法： pop(), push()</p>
</li>
</ol>
<h2 id="5-函数中调用函数">5. 函数中调用函数</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test1</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test1&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">test1</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test2&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test2</span>();</span><br></pre></td></tr></table></figure>
<h2 id="6-匿名函数">6. 匿名函数</h2>
<p>匿名函数没有名字</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 代码块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用匿名函数：</p>
<p>用小括号的方法实现函数的自调用，注意，这种调用方法只能调用一次</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>还可以将匿名函数赋值给一个变量，当给这个变量加上() 的时候，就相当于调用了这个函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fn = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fn</span>(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>
<h2 id="7-将函数当做参数">7. 将函数当做参数</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> f2 = <span class="keyword">function</span> (<span class="params">fun</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f1</span>());</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">f2</span>(f1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="number">100</span></span><br></pre></td></tr></table></figure>
<h1>九、作用域</h1>
<p>全局变量：</p>
<ul>
<li>变量在<code>&lt;script&gt;</code>标签之内，或者是一个单独js文件</li>
<li>如果在函数内部没有声明的变量也属于全局变量（即在函数内部可以使用外部的变量）</li>
<li>浏览器关闭才会销毁</li>
</ul>
<p>局部变量：</p>
<ul>
<li>
<p>变量声明在函数内部</p>
</li>
<li>
<p>函数的形参也可以看做是局部变量</p>
</li>
<li>
<p>函数执行完毕就会销毁</p>
</li>
</ul>
<p>链式作用域：</p>
<ul>
<li>函数内部可以调用父集中的变量</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">20</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num);  <span class="comment">// 链式作用域，找父集中的变量，如果没有再找上级</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>十、解析机制</h1>
<h2 id="1-预编译">1. 预编译</h2>
<p>js 引擎会把 js 里边所有的 var 提升，然后再提升 function。 提升到 <strong>当前作用域</strong> 的最前面，不提升赋值操作。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);  <span class="comment">// undefined 因为提升了声明，没有提升赋值</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 相当于</span></span><br><span class="line"><span class="keyword">var</span> num;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">num = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fun</span>();  <span class="comment">// 报错，同理</span></span><br><span class="line"><span class="keyword">var</span> fun = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">22</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fn</span>();  <span class="comment">// 函数声明已经提升到最前边，所以可以执行。</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f1 = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">function</span>(<span class="params">f1</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">200</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 实际执行顺序</span></span><br><span class="line"><span class="keyword">var</span> f1;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">200</span>);</span><br><span class="line">&#125;</span><br><span class="line">f1 = <span class="number">100</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f1);</span><br><span class="line"></span><br><span class="line">最后输出 <span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>函数内部的 var 声明只会提升到函数开头，而不会跳出函数到全局。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// console.log(num);  会报错</span></span><br><span class="line"><span class="title function_">show</span>();  <span class="comment">// 可以运行，因为函数声明被提升</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 显示 undefined，已经声明但是没有提升赋值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = b = c = <span class="number">9</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 相当于 </span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">9</span>; b = <span class="number">9</span>; c = <span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 即</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">a = <span class="number">9</span>;</span><br><span class="line">b = <span class="number">9</span>;</span><br><span class="line">c = <span class="number">9</span>;</span><br></pre></td></tr></table></figure>
<h2 id="2-报错机制">2. 报错机制</h2>
<p>js 运行顺序是先进行预编译，之后代码一行一行按顺序执行，如果出现错误：</p>
<ul>
<li>预编译出现错误，当前 script 标签中的整个代码都不执行，寻找下一个 script 标签</li>
<li>执行过程中出现错误，当前 Script 标签中，执行出错之前的代码，之后代码不执行。然后寻找下一个 script 标签</li>
</ul>
<h1>十一、对象</h1>
<h2 id="1-创建对象">1. 创建对象</h2>
<ul>
<li>利用字面量创建对象</li>
<li>利用 Object 方法创建对象</li>
</ul>
<p>使用字面量创建对象：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">uname</span>: <span class="string">&quot;Tom&quot;</span>, <span class="comment">// 属性以键值对形式存在，不用 var 声明</span></span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;male&quot;</span>,</span><br><span class="line">    <span class="attr">sayHi</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">age</span>);</span><br><span class="line">obj.<span class="title function_">sayHi</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>对象的属性名可以不加引号</p>
</blockquote>
<p>使用 new Object 方法创建对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 利用 new Object 创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">obj.<span class="property">uname</span> = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line">obj.<span class="property">saiHi</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hi&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-调用对象中的属性和方法">2. 调用对象中的属性和方法</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 调用属性</span></span><br><span class="line">obj.<span class="property">uname</span>;</span><br><span class="line">obj[<span class="string">&#x27;age&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line">obj.<span class="title function_">sayHi</span>();</span><br></pre></td></tr></table></figure>
<p>给对象属性重新赋值：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">obj.<span class="property">uname</span> = <span class="string">&#x27;zhangsan&#x27;</span>;</span><br><span class="line">obj[<span class="string">&#x27;age&#x27;</span>] = <span class="number">18</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-构造函数创建对象">3. 构造函数创建对象</h2>
<p>自己创建一个函数，利用传参的方式构建对象的属性和方法。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> 构造函数名(参数<span class="number">1</span>, 参数<span class="number">2</span>, 方法<span class="number">1</span> ...)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.属性 = 值;</span><br><span class="line">    <span class="variable language_">this</span>.方法 = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">// 代码块</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age, sex</span>)&#123;  <span class="comment">// 构造函数命名大驼峰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span> = sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;Luis&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;Male&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>);</span><br></pre></td></tr></table></figure>
<p>new 关键字创建对象的执行顺序</p>
<ol>
<li>
<p>在内存中创建一个新对象</p>
</li>
<li>
<p>让 this 指向这个新对象，this 就是这个函数所要创建的对象</p>
</li>
<li>
<p>执行构造函数里边的代码，给这个新对象添加属性和方法</p>
</li>
<li>
<p>返回这个对象</p>
</li>
</ol>
<p>this 指向</p>
<ul>
<li>构造函数中，this 指向所要创建的对象实例</li>
<li>普通函数中，this 指向 window</li>
</ul>
<h3 id="4-for…in-遍历对象">4. for…in 遍历对象</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(变量 <span class="keyword">in</span> 对象)&#123;</span><br><span class="line">    <span class="comment">// 代码块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>数组也可以使用 for…in 来进行遍历</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">uname</span>: <span class="string">&quot;Tom&quot;</span>, </span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;male&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(k);</span><br><span class="line">    <span class="comment">// 因为 k 是变量，所以只能用 obj[k] 的方式</span></span><br><span class="line">    <span class="comment">// 如果使用 obj.k ，那么就会去寻找 obj 中的 k 属性（并不会自动将变量k解析成对应的字符串）</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj[k]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果：</span></span><br><span class="line">uname</span><br><span class="line"><span class="title class_">Tom</span></span><br><span class="line">age</span><br><span class="line"><span class="number">18</span></span><br><span class="line">sex</span><br><span class="line">male</span><br></pre></td></tr></table></figure>
<h2 id="5-内置对象">5. 内置对象</h2>
<p>内置对象是 JS 内部已经做好的对象，方便用户调用</p>
<h3 id="5-1-Math-数学对象">5.1. Math 数学对象</h3>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">45</span>));  <span class="comment">// 取多个值中的最大数</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">3.4</span>);  <span class="comment">// 向下取整 3</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">3.4</span>);  <span class="comment">// 向上取整 4</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">1.1</span>);  <span class="comment">// 四舍五入</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">abs</span>(-<span class="number">3</span>);  <span class="comment">// 取绝对值 3</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>,<span class="number">2</span>)  <span class="comment">// 10的2次方</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="number">100</span>)  <span class="comment">// 开平方</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>();  <span class="comment">// 生成0~1之间的随机小数 [0，1) === 左闭右开区间</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 生成一个区间的随机整数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandom</span>(<span class="params">min, max</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min +<span class="number">1</span>)) + min;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原理：</span></span><br><span class="line"><span class="number">0</span> ~ <span class="number">100</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">100</span>  <span class="comment">// 乘100提升范围</span></span><br><span class="line"></span><br><span class="line"><span class="number">100</span>~<span class="number">200</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">100</span> + <span class="number">100</span>  <span class="comment">// 加100提升基数</span></span><br><span class="line"></span><br><span class="line"><span class="number">0</span>~<span class="number">200</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>() * (<span class="number">300</span>-<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">100</span>~<span class="number">300</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>() * (<span class="number">300</span>-<span class="number">100</span>) + <span class="number">100</span></span><br></pre></td></tr></table></figure>
<h3 id="5-2-Date-日期对象">5.2. Date 日期对象</h3>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date</a></p>
<p>Date 是一个构造函数，需要使用 new 来创建对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date);  <span class="comment">// Wed Apr 21 2021 19:34:46 GMT+0800</span></span><br><span class="line">date.<span class="title function_">getFullYear</span>();  <span class="comment">// 返回当前年份</span></span><br><span class="line">date.<span class="title function_">getMonth</span>();  <span class="comment">// 返回的月份小1月</span></span><br><span class="line">date.<span class="title function_">getDate</span>();  <span class="comment">// 返回几号</span></span><br><span class="line">date.<span class="title function_">getDay</span>();  <span class="comment">// 返回周几，周一是1，周日是0</span></span><br><span class="line">date.<span class="title function_">getHours</span>();</span><br><span class="line">date.<span class="title function_">getMinutes</span>();</span><br><span class="line">date.<span class="title function_">getSeconds</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得总毫秒数从1970年1月1日（时间戳）</span></span><br><span class="line">date.<span class="title function_">valueOf</span>();</span><br><span class="line">date.<span class="title function_">getTime</span>();  </span><br><span class="line"></span><br><span class="line"><span class="comment">// H5 浏览器可以直接用 date 中的方法获取时间戳</span></span><br><span class="line"><span class="keyword">var</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不支持 HTML5 的浏览器可以使用下面的方式获得时间戳</span></span><br><span class="line"><span class="keyword">var</span> now = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br></pre></td></tr></table></figure>
<p>获得指定日期对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">1619005441955</span>);  <span class="comment">// 传入时间戳</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2015</span>, <span class="number">4</span>, <span class="number">1</span>);  <span class="comment">// 传入年、月、日（月份从0开始计数）</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2020-5-10&quot;</span>);  <span class="comment">// 字符串方式传入年-月-日</span></span><br></pre></td></tr></table></figure>
<p>转换成字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">toString</span>()</span><br></pre></td></tr></table></figure>
<p>例：将时间对象整理为 &quot;2020-04-15 11:47:30&quot;的格式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2020-04-21 20:01:01</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">time</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="keyword">var</span> year = now.<span class="title function_">getFullYear</span>();</span><br><span class="line">  <span class="keyword">var</span> month = now.<span class="title function_">getMonth</span>();</span><br><span class="line">  <span class="keyword">var</span> date = now.<span class="title function_">getDate</span>();</span><br><span class="line">  <span class="keyword">var</span> hour = now.<span class="title function_">getHours</span>();</span><br><span class="line">  <span class="keyword">var</span> min = now.<span class="title function_">getMinutes</span>();</span><br><span class="line">  <span class="keyword">var</span> sec = now.<span class="title function_">getSeconds</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 补0仓做</span></span><br><span class="line">  month = month &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + month : month;</span><br><span class="line">  date = date &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + date : date;</span><br><span class="line">  hour = hour &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + hour : hour;</span><br><span class="line">  min = min &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + min : min;</span><br><span class="line">  sec = sec &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + sec : sec;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="string">&quot;&quot;</span> +</span><br><span class="line">    year +</span><br><span class="line">    <span class="string">&quot;-&quot;</span> +</span><br><span class="line">    month +</span><br><span class="line">    <span class="string">&quot;-&quot;</span> +</span><br><span class="line">    date +</span><br><span class="line">    <span class="string">&quot; &quot;</span> +</span><br><span class="line">    hour +</span><br><span class="line">    <span class="string">&quot;:&quot;</span> +</span><br><span class="line">    min +</span><br><span class="line">    <span class="string">&quot;:&quot;</span> +</span><br><span class="line">    sec</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">time</span>());</span><br></pre></td></tr></table></figure>
<h3 id="5-3-数组对象">5.3. 数组对象</h3>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array</a></p>
<h4 id="new-Array-创建数组">new Array() 创建数组</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">2</span>);  <span class="comment">// 创建长度为2的空数组</span></span><br><span class="line"><span class="keyword">var</span> arr2 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">2</span>,<span class="number">3</span>);  <span class="comment">// 创建一个[2,3]的数组</span></span><br></pre></td></tr></table></figure>
<h4 id="isArray-验证是否是数组">isArray() 验证是否是数组</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr <span class="keyword">instanceof</span> <span class="title class_">Array</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr));</span><br></pre></td></tr></table></figure>
<h4 id="push-在数组结尾添加元素">push() 在数组结尾添加元素</h4>
<ul>
<li>
<p>push 可以给数组结尾追加新的元素</p>
</li>
<li>
<p>push() 参数直接写需要添加的数组元素</p>
</li>
<li>
<p>push 完毕之后，返回的结果是新数组的长度</p>
</li>
<li>
<p>原数组会发生改变</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">t = arr.<span class="title function_">push</span>(<span class="number">4</span>, <span class="string">&quot;pink&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(t);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&quot;pink&quot;</span>]</span><br></pre></td></tr></table></figure>
<p>例：遍历数组中大于2000的数值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">800</span>, <span class="number">1500</span>, <span class="number">2010</span>, <span class="number">3100</span>, <span class="number">5000</span>, <span class="number">1800</span>];</span><br><span class="line"><span class="keyword">var</span> newArr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &gt; <span class="number">2000</span>) &#123;</span><br><span class="line">        <span class="comment">// newArr[newArr.length] = arr[i];</span></span><br><span class="line">        newArr.<span class="title function_">push</span>(arr[i]); <span class="comment">// 可以直接用 push 代替上方代码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newArr);</span><br></pre></td></tr></table></figure>
<h4 id="unshift-在数组头部添加元素">unshift() 在数组头部添加元素</h4>
<p>和 push 类似，只不过 unshift 是在数组开始处插入元素，返回值为新数组的长度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;white&quot;</span>, <span class="string">&quot;orange&quot;</span>];</span><br><span class="line">t = arr.<span class="title function_">unshift</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(t);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">[<span class="string">&quot;red&quot;</span>, <span class="string">&quot;black&quot;</span>, <span class="string">&quot;white&quot;</span>, <span class="string">&quot;orange&quot;</span>]</span><br></pre></td></tr></table></figure>
<h4 id="pop-删除数组末尾元素">pop() 删除数组末尾元素</h4>
<p>使用 pop() 可以删除数组最后一个元素， 返回值为删除的元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;white&quot;</span>, <span class="string">&quot;orange&quot;</span>];</span><br><span class="line">t = arr.<span class="title function_">pop</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(t);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">orange</span><br><span class="line">[<span class="string">&quot;black&quot;</span>, <span class="string">&quot;white&quot;</span>]</span><br></pre></td></tr></table></figure>
<h4 id="shift-删除数组起始元素">shift() 删除数组起始元素</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;white&quot;</span>, <span class="string">&quot;orange&quot;</span>];</span><br><span class="line">t = arr.<span class="title function_">shift</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(t);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">black</span><br><span class="line">[<span class="string">&quot;white&quot;</span>, <span class="string">&quot;orange&quot;</span>]</span><br></pre></td></tr></table></figure>
<h4 id="reverse-数组逆序">reverse() 数组逆序</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;white&quot;</span>, <span class="string">&quot;orange&quot;</span>];</span><br><span class="line">arr.<span class="title function_">reverse</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">[<span class="string">&quot;orange&quot;</span>, <span class="string">&quot;white&quot;</span>, <span class="string">&quot;black&quot;</span>]</span><br></pre></td></tr></table></figure>
<h4 id="sort-排序">sort() 排序</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&quot;n&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;z&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;j&quot;</span>, <span class="string">&quot;x&quot;</span>];</span><br><span class="line">arr.<span class="title function_">sort</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;j&quot;</span>, <span class="string">&quot;n&quot;</span>, <span class="string">&quot;x&quot;</span>, <span class="string">&quot;z&quot;</span>]</span><br></pre></td></tr></table></figure>
<p>sort() 对于数值的排序只按第一个字符排序，不会按值大小排序。如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">1</span>, <span class="number">11</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">3</span>];</span><br><span class="line">arr.<span class="title function_">sort</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">11</span>, <span class="number">2</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<p>解决方案：</p>
<p>sort 方法里边可以传一个 compareFunction 匿名函数，函数中有两个参数 a, b。</p>
<ul>
<li>
<p>a 和 b 代表两个用于比较的元素</p>
</li>
<li>
<p>当 <code>compareFunction(a, b)</code> 小于 0 ，那么 a 会被排列到 b 之前；</p>
</li>
<li>
<p>如果 <code>compareFunction(a, b)</code> 大于 0 ， b 会被排列到 a 之前。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">1</span>, <span class="number">11</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">3</span>];</span><br><span class="line">arr.<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;  <span class="comment">// 升序排列</span></span><br><span class="line">    <span class="comment">// return b - a;  // 降序排列</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br></pre></td></tr></table></figure>
<h4 id="indexOf-lastIndexOf-通过值获取索引">indexOf(), lastIndexOf() 通过值获取索引</h4>
<ul>
<li>
<p>indexOf() 返回在数组中可以找到一个给定元素的第一个索引，如果不存在，则返回-1</p>
</li>
<li>
<p>lastIndexOf() 返回指定元素在数组中的最后一个的索引，如果不存在则返回 -1。从数组的后面向前查找</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;Red&quot;</span>, <span class="string">&quot;Blue&quot;</span>, <span class="string">&quot;Yellow&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;PINK&quot;</span>, <span class="string">&quot;Blue&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">indexOf</span>(<span class="string">&quot;Blue&quot;</span>)); <span class="comment">// 只返回第一个找到的索引，找不到返回 -1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;Blue&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>例：数组去重</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> newArr = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (newArr.<span class="title function_">indexOf</span>(arr[i]) === -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 检测新数组中是否存在</span></span><br><span class="line">            newArr.<span class="title function_">push</span>(arr[i]); <span class="comment">// 如不存在则 push 进新数组</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newArr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">800</span>, <span class="number">800</span>, <span class="number">2010</span>, <span class="number">1800</span>, <span class="number">3100</span>, <span class="number">700</span>, <span class="number">3100</span>, <span class="number">5000</span>, <span class="number">1800</span>];</span><br><span class="line"><span class="title function_">unique</span>(arr);</span><br></pre></td></tr></table></figure>
<h4 id="toString-转字符串">toString() 转字符串</h4>
<p>返回一个字符串，表示指定的数组及其元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">&#x27;pink&#x27;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">toString</span>());  </span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果</span></span><br><span class="line"><span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,pink</span><br></pre></td></tr></table></figure>
<h4 id="join-连接数组元素">join() 连接数组元素</h4>
<p>join() 方法将一个数组（或一个类数组对象）的所有元素连接成一个字符串并返回这个字符串。如果数组只有一个项目，那么将返回该项目而不使用分隔符。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> elements = [<span class="string">&#x27;Fire&#x27;</span>, <span class="string">&#x27;Air&#x27;</span>, <span class="string">&#x27;Water&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(elements.<span class="title function_">join</span>());</span><br><span class="line"><span class="comment">// expected output: &quot;Fire,Air,Water&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(elements.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>));</span><br><span class="line"><span class="comment">// expected output: &quot;FireAirWater&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(elements.<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>));</span><br><span class="line"><span class="comment">// expected output: &quot;Fire-Air-Water&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="concat-连接数组">concat() 连接数组</h4>
<p>concat() 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> array2 = [<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> array3 = array1.<span class="title function_">concat</span>(array2);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array3);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]</span></span><br></pre></td></tr></table></figure>
<h4 id="slice-截取数组">slice() 截取数组</h4>
<p>slice() 方法返回一个新的数组对象，这一对象是一个由 begin 和 end 决定的原数组的浅拷贝（包括 begin，不包括end）。原始数组不会被改变。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> animals = [<span class="string">&#x27;ant&#x27;</span>, <span class="string">&#x27;bison&#x27;</span>, <span class="string">&#x27;camel&#x27;</span>, <span class="string">&#x27;duck&#x27;</span>, <span class="string">&#x27;elephant&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animals.<span class="title function_">slice</span>(<span class="number">2</span>));</span><br><span class="line"><span class="comment">// expected output: Array [&quot;camel&quot;, &quot;duck&quot;, &quot;elephant&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animals.<span class="title function_">slice</span>(<span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: Array [&quot;camel&quot;, &quot;duck&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animals.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">5</span>));</span><br><span class="line"><span class="comment">// expected output: Array [&quot;bison&quot;, &quot;camel&quot;, &quot;duck&quot;, &quot;elephant&quot;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="splice-删除元素">splice() 删除元素</h4>
<p>splice() 方法通过删除或替换现有元素或者原地添加新的元素来修改数组,并以数组形式返回被修改的内容。此方法会改变原数组。</p>
<p>返回值：</p>
<p>由被删除的元素组成的一个数组。如果只删除了一个元素，则返回只包含一个元素的数组。如果没有删除元素，则返回空数组。</p>
<ul>
<li>插入元素</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myFish = [<span class="string">&quot;angel&quot;</span>, <span class="string">&quot;clown&quot;</span>, <span class="string">&quot;mandarin&quot;</span>, <span class="string">&quot;sturgeon&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> removed = myFish.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&quot;drum&quot;</span>);</span><br><span class="line"><span class="comment">// 运算后的 myFish: [&quot;angel&quot;, &quot;clown&quot;, &quot;drum&quot;, &quot;mandarin&quot;, &quot;sturgeon&quot;]</span></span><br><span class="line"><span class="comment">// 被删除的元素: [], 没有元素被删除</span></span><br></pre></td></tr></table></figure>
<ul>
<li>删除元素</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> myFish = [<span class="string">&#x27;angel&#x27;</span>, <span class="string">&#x27;clown&#x27;</span>, <span class="string">&#x27;drum&#x27;</span>, <span class="string">&#x27;mandarin&#x27;</span>, <span class="string">&#x27;sturgeon&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> removed = myFish.<span class="title function_">splice</span>(<span class="number">3</span>, <span class="number">1</span>);</span><br><span class="line"><span class="comment">// 运算后的 myFish: [&quot;angel&quot;, &quot;clown&quot;, &quot;drum&quot;, &quot;sturgeon&quot;]</span></span><br><span class="line"><span class="comment">// 被删除的元素: [&quot;mandarin&quot;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>替换元素</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myFish = [<span class="string">&#x27;angel&#x27;</span>, <span class="string">&#x27;clown&#x27;</span>, <span class="string">&#x27;drum&#x27;</span>, <span class="string">&#x27;sturgeon&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> removed = myFish.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">1</span>, <span class="string">&quot;trumpet&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 运算后的 myFish: [&quot;angel&quot;, &quot;clown&quot;, &quot;trumpet&quot;, &quot;sturgeon&quot;]</span></span><br><span class="line"><span class="comment">// 被删除的元素: [&quot;drum&quot;]</span></span><br></pre></td></tr></table></figure>
<h3 id="5-4-字符串对象">5.4. 字符串对象</h3>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String</a></p>
<p><strong>包装对象</strong></p>
<p>字符串、数字、布尔值这三种原始类型的值，为什么会有对象调用方法？这是因为 JS 引擎会自动将原始类型的值转换为包装对象，使用之后会立即销毁。</p>
<ul>
<li>String 对象</li>
<li>Number 对象</li>
<li>Boolen 对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str = <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 内部处理</span></span><br><span class="line"><span class="keyword">var</span> temp = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;123&#x27;</span>);  <span class="comment">// 实际上是将字符串对象化</span></span><br><span class="line">str = temp;  <span class="comment">// 然后将临时变量传递给str</span></span><br><span class="line">temp = <span class="literal">null</span>;  <span class="comment">// 销毁临时变量</span></span><br><span class="line">str.<span class="title function_">length</span>();  <span class="comment">// 这时候 str 已经是对象了，可以调用方法</span></span><br></pre></td></tr></table></figure>
<p>字符串不可变</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">str = <span class="string">&#x27;2&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>看似 str 变量从1变成了2，其实并不是 str 的变量改变，而是系统在内存中又开辟了一个空间存放数值2，然后将 str 的地址引向数据，但是原数据1还是存放在内存当中的。</p>
<h4 id="indexOf-lastIndexOf-查找字符位置">indexOf(), lastIndexOf() 查找字符位置</h4>
<p>和数组类似，可以将字符串也看做数组，第一个字符索引为0。</p>
<p>返回值：</p>
<p>查找的字符串 <code>searchValue</code> 的第一次出现的索引，如果没有找到，则返回 <code>-1</code>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// str.indexOf(&#x27;要查找的字符&#x27;, [起始的位置])</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;白日依山尽&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">indexOf</span>(<span class="string">&#x27;山&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;山&#x27;</span>));</span><br></pre></td></tr></table></figure>
<p>例：求某个字符出现的次数和位置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;adfajiwerasdfjklweasdfawer&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> index = str.<span class="title function_">indexOf</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (index != -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">    num++;</span><br><span class="line">    index = str.<span class="title function_">indexOf</span>(<span class="string">&quot;a&quot;</span>, index + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br></pre></td></tr></table></figure>
<h4 id="charAt-按索引返回字符串">charAt() 按索引返回字符串</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;andy&#x27;</span>;</span><br><span class="line">str.<span class="title function_">charAt</span>(<span class="number">3</span>);  <span class="comment">// 返回index位置的字符</span></span><br><span class="line">str.<span class="title function_">charCodeAt</span>(<span class="number">3</span>);  <span class="comment">// 返回 index 位置的 ASCII 码</span></span><br><span class="line">str[<span class="number">3</span>];  <span class="comment">// 获取指定位置处字符</span></span><br></pre></td></tr></table></figure>
<p>例：遍历字符串中字符</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;andy&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">charAt</span>(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例：统计字符串中出现次数最多的字符</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;tqwerasdfwerqiuyasdfggyweasdf&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> chars = str.<span class="title function_">charAt</span>(i); <span class="comment">// 通过 charAt() 获取字符串每个字符</span></span><br><span class="line">    <span class="keyword">if</span> (o[chars]) &#123;</span><br><span class="line">        <span class="comment">// 判断如果没有该字符属性，则初始化1，有则+1</span></span><br><span class="line">        o[chars]++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        o[chars] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> max = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> max_str = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="comment">// k 是键名</span></span><br><span class="line">    <span class="comment">// o[k] 是值</span></span><br><span class="line">    <span class="keyword">if</span> (o[k] &gt; max) &#123;</span><br><span class="line">        max = o[k];</span><br><span class="line">        max_str = k;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max_str);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">w</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<h4 id="concat-拼接字符串">concat() 拼接字符串</h4>
<p>将一个或多个字符串与原字符串连接合并，形成一个新的字符串并返回。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">&quot;a&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">&quot;b&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> str3 = <span class="string">&quot;c&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> str4 = str1.<span class="title function_">concat</span>(str2, str3);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str4);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">abc</span><br></pre></td></tr></table></figure>
<h4 id="substr-按长度截取字符串">substr()  按长度截取字符串</h4>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">substr</span>(start, length);  <span class="comment">// 从start索引位置开始，length 为取的个数，不输入 length，截取到末尾</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> anyString = <span class="string">&quot;Mozilla&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(anyString.<span class="title function_">substr</span>(<span class="number">1</span>,<span class="number">4</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">ozil</span><br></pre></td></tr></table></figure>
<h4 id="slice-截取字符串">slice() 截取字符串</h4>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">slice</span>(start, end);  <span class="comment">// 从 start 位置开始，截取到 end 位置（不包括end）。不输入 end 默认截取到结尾</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> anyString = <span class="string">&quot;Mozilla&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(anyString.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">4</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">ozi</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果是负数索引，从 -1 开始计数</p>
</blockquote>
<h4 id="substring-截取字符串">substring() 截取字符串</h4>
<p>substring 提取从 indexStart 到 indexEnd（不包括）之间的字符。slice() 用法与 substring() 用法类似，</p>
<ul>
<li>
<p>slice() 方法也可以使用在数组中，并且支持负数索引</p>
</li>
<li>
<p>substring() 只可以在字符串中使用，不支持负数索引</p>
</li>
<li>
<p>如果 <code>indexStart</code> 等于 <code>indexEnd</code>，<code>substring</code> 返回一个空字符串。</p>
</li>
<li>
<p>如果省略 <code>indexEnd</code>，<code>substring</code> 提取字符一直到字符串末尾。</p>
</li>
<li>
<p>如果任一参数小于 0 或为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN"><code>NaN</code></a>，则被当作 0。</p>
</li>
<li>
<p>如果任一参数大于 <code>stringName.length</code>，则被当作 <code>stringName.length</code>。</p>
</li>
<li>
<p>如果 <code>indexStart</code> 大于 <code>indexEnd</code>，则 <code>substring</code> 的执行效果就像两个参数调换了一样。</p>
</li>
</ul>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str.<span class="title function_">substring</span>(indexStart[, indexEnd])</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> anyString = <span class="string">&quot;Mozilla&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(anyString.<span class="title function_">substring</span>(-<span class="number">2</span>,<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="title class_">Moz</span></span><br></pre></td></tr></table></figure>
<h4 id="replace-替换字符串">replace() 替换字符串</h4>
<p>replace() 方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">stringObject.<span class="title function_">replace</span>(regexp/substr,replacement)</span><br></pre></td></tr></table></figure>
<ul>
<li>字符串替换只替换第一个匹配项目</li>
<li>批量替换需要使用正则</li>
</ul>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> anyString = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(anyString.<span class="title function_">replace</span>(<span class="string">&quot;World&quot;</span>, <span class="string">&quot;Javascript&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="title class_">Hello</span> <span class="title class_">Javascript</span></span><br></pre></td></tr></table></figure>
<h4 id="toUpperCase-toLowerCase-大小写转换">toUpperCase(), toLowerCase() 大小写转换</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aBc&quot;</span>.<span class="title function_">toUpperCase</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Abc&quot;</span>.<span class="title function_">toLowerCase</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="variable constant_">ABC</span></span><br><span class="line">abc</span><br></pre></td></tr></table></figure>
<h2 id="5-5-instanceof-判断对象">5.5 instanceof 判断对象</h2>
<p>使用 instanceof() 可以判断该数据或变量是否是某个对象的实例，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span> <span class="keyword">instanceof</span> <span class="title class_">Number</span>);</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr <span class="keyword">instanceof</span> <span class="title class_">Array</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age, score</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">score</span> = score;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaoming&quot;</span>, <span class="number">18</span>, <span class="number">99</span>);</span><br><span class="line"><span class="comment">// true xiaoming 是 Student 对象的实例</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(xiaoming <span class="keyword">instanceof</span> <span class="title class_">Student</span>);</span><br><span class="line"><span class="comment">// true xiaoming 也是 Object 对象的实例，因为 Student 算是 Object 的子类</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(xiaoming <span class="keyword">instanceof</span> <span class="title class_">Object</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1>算法：</h1>
<h2 id="1-交换变量的值">1. 交换变量的值</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用第三个临时变量</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>, b =<span class="number">2</span>, <span class="keyword">var</span> c;</span><br><span class="line">c = a;</span><br><span class="line">a = b;</span><br><span class="line">b = c;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加减法交换</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>, b =<span class="number">2</span>;</span><br><span class="line">a = a + b;  <span class="comment">// a = 3  b = 2</span></span><br><span class="line">b = a - b;  <span class="comment">// a = 3  b = 1</span></span><br><span class="line">b = a - b;  <span class="comment">// a = 2  b = 1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="2-交换数组变量的值">2. 交换数组变量的值</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">1</span>, b=<span class="number">2</span>;</span><br><span class="line"><span class="comment">// 数组中先放a的值</span></span><br><span class="line"><span class="comment">// 第一个值确定后，执行表达式 a = b，此时 a = 2</span></span><br><span class="line"><span class="comment">// 但是数组第一个值已经确定下来，不影响整个数组，数组现在是 [1, 2]</span></span><br><span class="line"><span class="comment">// [a,a=b]  // [1, 2] a =2</span></span><br><span class="line"><span class="comment">// 最后只要拿到数组下标为0的值给b就完成了值的互换</span></span><br><span class="line">b = [a, a=b][<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h2 id="3-交换对象的值">3. 交换对象的值</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">1</span>, b=<span class="number">2</span>;</span><br><span class="line">b = &#123;<span class="string">&quot;attr1&quot;</span>:a, <span class="string">&quot;attr2&quot;</span>:a=b&#125;.<span class="property">attr1</span>;</span><br></pre></td></tr></table></figure>
<h1>-------------------------------</h1>
<h1>JS 与 浏览器交互</h1>
<h1>-------------------------------</h1>
<h1>Javascript 与 BOM/DOM</h1>
<h2 id="1-Web-API">1. Web API</h2>
<p>API（Application Programming  Interface, 应用程序编程接口）是一些预先定义的<strong>函数</strong>，无需访问源码，或理解内部工作机制。简单的说就是API给程序员提供一种工具，以便更轻松的实现想要完成的功能。</p>
<p>WEB API 是浏览器的提供的一套操作浏览器功能和页面元素的API（BOM和DOM）如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;弹出窗口&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>在 javascript 基本语法中，并没有 alert 这个方法，这个方法是浏览器提供给我们的 API，所以这条命令我们只能成功运行在浏览器中，离开浏览器就无法正常运行了。</p>
<h2 id="2-BOM">2. BOM</h2>
<p>BOM 即浏览器对象模型（browser object model），其提供了一系列接口供开发者使用 <code>JavaScript</code> 与浏览器窗口进行交互。</p>
<p>BOM 提供的是与浏览器窗口交互的能力，其包含了一些处理窗口的方法，如打开新窗口，控制新窗口大小，也提供了窗口相关的属性，如窗口尺寸。</p>
<p>像刚才演示的 alert 就是 bom，它的完整写法其实应该是：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">windows.<span class="title function_">alert</span>(<span class="string">&#x27;弹出窗口&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>可以看到，其实 alert 是 window 对象下边的一个方法，而 window 对象就是我们的浏览器窗口。</p>
<h2 id="3-DOM">3. DOM</h2>
<p>DOM（Document Object Model），是 HTML 或 XML 的标准编程接口，通过DOM接口，可以改变网页的内容、结构和样式。</p>
<p>当网页被加载时，浏览器会创建页面的文档对象模型（Document Object Model），HTML DOM 模型被结构化为对象树：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/2.jpg" alt="image-20210419192051067"></p>
<p>HTML DOM 是 HTML 的标准对象模型和编程接口。它定义了：</p>
<ul>
<li>作为对象的 HTML 元素</li>
<li>所有 HTML 元素的属性</li>
<li>访问所有 HTML 元素的方法</li>
<li>所有 HTML 元素的事件</li>
</ul>
<p>文档：一个页面就是一个文档，DOM中使用 document 表示</p>
<p>元素：页面中所有的标签都是元素，DOM中使用element表示</p>
<p>节点：网页中所有内容都是节点（标签、属性、文本、注释等），DOM中使用node表示</p>
<h1>查找 HTML DOM 元素</h1>
<p>HTML DOM 能够通过 JavaScript 进行访问（也可以通过其他编程语言）。在 DOM 中，所有 HTML 元素都被定义为对象。我们可以通过 Javascript 对这些对象操作，改变 HTML 元素的内容。</p>
<ul>
<li>getElementById()</li>
<li>getElementsByTagName()</li>
<li>getElementsByClassName()</li>
<li>querySelector()</li>
<li>querySelectorAll()</li>
</ul>
<h2 id="1-getElementByID">1. getElementByID()</h2>
<p>因为 id 元素是唯一的，就是为了在 js 中通过元素 id 来查找元素，document 是页面文档对象，getElementById 是 document 的方法，通过传递的参数（id字符串），是一个标签的id值。可以返回的该元素对象</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;new&quot;</span>&gt;</span>This is new Element<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 页面文档从上往下加载，需要将 script 代码写在下边</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;new&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">	<span class="comment">// 显示id为new的对象中内容</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(dom);</span></span><br><span class="line"><span class="language-javascript">	<span class="comment">// 可以打印我们返回的元素对象，更好的查看里边的属性和方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(dom);  </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-getElementsByTagName">2. getElementsByTagName()</h2>
<p>注意是 elements 不是 element ，通过标签名来查找元素，获取元素对象的集合，以类似数组的形式存储，如果没有获取到元素，返回一个空的伪数组</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(dom);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(dom[<span class="number">0</span>]);  <span class="comment">// 获取第一个元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(dom.<span class="property">length</span>)  <span class="comment">// 查看对象长度</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 遍历元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dom.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(dom[i]);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>每一个元素都是 DOM 的节点，他们都拥有相同的方法，刚才一直用 document.getElementById() 和 document.getElementsByTagName() 从根节点查找元素。其实还可以从下级元素中查找元素，如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>4<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>6<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;ul&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 从第二个ul元素中查找li元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> li = ul[<span class="number">1</span>].<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(li);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-getElementsByClassName">3. getElementsByClassName()</h2>
<p>注意是 elements 不是 element，通过类名查找元素，这里返回集合</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a box<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(box);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-getElementsByName">4. getElementsByName()</h2>
<p>通过 name 属性获取元素，也是以集合的方式返回</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">name</span>=<span class="string">&quot;w&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取普通 name 属性标签元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> w = <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;w&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取 input 标签</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(w);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-querySelector">4. querySelector()</h2>
<p>H5 选择器，使用 CSS 选择器查找元素，只返回第一个元素查找结果</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查找类名为box的元素</span></span><br><span class="line"><span class="keyword">var</span> firstBox = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.box&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找id名为box的元素</span></span><br><span class="line"><span class="keyword">var</span> nav= <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#box&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找li标签元素</span></span><br><span class="line"><span class="keyword">var</span> li= <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找 name 属性值为 username 的标签元素</span></span><br><span class="line"><span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;input[name=username]&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="5-querySelectorAll">5. querySelectorAll()</h2>
<p>H5 选择器，使用 CSS 选择器查找元素，返回所有元素集合</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> doms = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.box&#x27;</span>);  </span><br></pre></td></tr></table></figure>
<h2 id="6-查找-HTML-对象">6. 查找 HTML 对象</h2>
<table>
<thead>
<tr>
<th style="text-align:left">属性</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">DOM</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">document.anchors</td>
<td style="text-align:left">返回拥有 name 属性的所有 <a> 元素。</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.applets</td>
<td style="text-align:left">返回所有 <applet> 元素（HTML5 不建议使用）</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.baseURI</td>
<td style="text-align:left">返回文档的绝对基准 URI</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.body</td>
<td style="text-align:left">返回 <body> 元素</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.cookie</td>
<td style="text-align:left">返回文档的 cookie</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.doctype</td>
<td style="text-align:left">返回文档的 doctype</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.documentElement</td>
<td style="text-align:left">返回 <html> 元素</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.documentMode</td>
<td style="text-align:left">返回浏览器使用的模式</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.documentURI</td>
<td style="text-align:left">返回文档的 URI</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.domain</td>
<td style="text-align:left">返回文档服务器的域名</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.domConfig</td>
<td style="text-align:left">废弃。返回 DOM 配置</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.embeds</td>
<td style="text-align:left">返回所有 <embed> 元素</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.forms</td>
<td style="text-align:left">返回所有 <form> 元素</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.head</td>
<td style="text-align:left">返回 <head> 元素</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.images</td>
<td style="text-align:left">返回所有 <img> 元素</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.implementation</td>
<td style="text-align:left">返回 DOM 实现</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.inputEncoding</td>
<td style="text-align:left">返回文档的编码（字符集）</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.lastModified</td>
<td style="text-align:left">返回文档更新的日期和时间</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.links</td>
<td style="text-align:left">返回拥有 href 属性的所有 <area> 和 <a> 元素</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.readyState</td>
<td style="text-align:left">返回文档的（加载）状态</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.referrer</td>
<td style="text-align:left">返回引用的 URI（链接文档）</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.scripts</td>
<td style="text-align:left">返回所有 <script> 元素</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.strictErrorChecking</td>
<td style="text-align:left">返回是否强制执行错误检查</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">document.title</td>
<td style="text-align:left">返回 <title> 元素</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">document.URL</td>
<td style="text-align:left">返回文档的完整 URL</td>
<td style="text-align:left">1</td>
</tr>
</tbody>
</table>
<h1>改变 HTML 元素</h1>
<table>
<thead>
<tr>
<th style="text-align:left">方法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">element.innerHTML = <em>new html content</em></td>
<td style="text-align:left">改变元素的 HTML 内容</td>
</tr>
<tr>
<td style="text-align:left">element.innerTEXT = new text</td>
<td style="text-align:left">改变元素的文本内容</td>
</tr>
<tr>
<td style="text-align:left">element.attribute = <em>new value</em></td>
<td style="text-align:left">改变 HTML 元素的属性值</td>
</tr>
<tr>
<td style="text-align:left">element.setAttribute(<em>attribute</em>, <em>value</em>)</td>
<td style="text-align:left">改变 HTML 元素的属性值</td>
</tr>
<tr>
<td style="text-align:left">element.hasAttribute(attribute)</td>
<td style="text-align:left">判断元素是否有该属性</td>
</tr>
<tr>
<td style="text-align:left">element.removeAttribute(attribute)</td>
<td style="text-align:left">删除元素属性</td>
</tr>
<tr>
<td style="text-align:left">element.style.property = <em>new style</em></td>
<td style="text-align:left">改变 HTML 元素的样式</td>
</tr>
</tbody>
</table>
<h2 id="1-element-innerHTML">1. element.innerHTML</h2>
<p>元素属性 innerHTML 就是元素的 HTML 代码，当查找到元素后，可以对其 innerHTML 属性进行重新赋值修改。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> h1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 将原本的div里边的所有HTML内容更改，如果没有子元素，InnerHTML 就会修改该元素下的 Text 内容</span></span></span><br><span class="line"><span class="language-javascript">    h1.<span class="property">innerHTML</span> = <span class="string">&quot;&lt;h2&gt;2020-05-05&lt;/h2&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 输出结果</span><br><span class="line">2020-05-05</span><br></pre></td></tr></table></figure>
<h2 id="2-element-innerText">2. element.innerText</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> h1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 只更改文本，HTML 不解析，同时去除空格和换行</span></span></span><br><span class="line"><span class="language-javascript">    h1.<span class="property">innerText</span> = <span class="string">&quot;&lt;h2&gt;2020-05-05&lt;/h2&gt;    ABC&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 输出结果</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>2020-05-05 ABC<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-element-attribute-改变元素属性值">3. element.attribute 改变元素属性值</h2>
<p>这里的 attribute 是代词，具体要看元素有什么属性，比如 a 链接就有 href 属性，所以使用的时候需要用 element.href 来改变。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.163.com&quot;</span>&gt;</span>网址<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    a.<span class="property">href</span> = <span class="string">&quot;https://www.qq.com&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-element-setAttribute-改变元素属性值">4. element.setAttribute 改变元素属性值</h2>
<p>还可以通过 element.setAttribute 方法来改变元素属性值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">element.<span class="title function_">setAttribute</span>(attribute, value)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>attribute：属性名</p>
</li>
<li>
<p>value：属性值</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;hightlight&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.163.com&quot;</span>&gt;</span>网址<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    a.<span class="title function_">setAttribute</span>(<span class="string">&quot;href&quot;</span>, <span class="string">&quot;https://www.qq.com&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 用 .属性方法更改 class 属性使用 className</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 注意空格，这里是增加一个class</span></span></span><br><span class="line"><span class="language-javascript">    a.<span class="property">className</span> += <span class="string">&quot; hidden&quot;</span>;  </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 用 setAttribute 更改 class 属性直接用 class</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 也可以直接写上两个属性</span></span></span><br><span class="line"><span class="language-javascript">    a.<span class="title function_">setAttribute</span>(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;hightlight hidden&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>常用元素属性</p>
<ul>
<li>innerText</li>
<li>innerHTML</li>
<li>src</li>
<li>href</li>
<li>id, alt, title</li>
</ul>
<h2 id="5-element-hasAttribute">5. element.hasAttribute</h2>
<p>通过 element.hasAttribute 判断元素是否有指定属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index.php&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;1&quot;</span>&gt;</span>123<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> d = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 返回 true</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(d.<span class="title function_">hasAttribute</span>(<span class="string">&quot;href&quot;</span>));</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-element-removeAttribute">6. element.removeAttribute</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index.php&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;1&quot;</span>&gt;</span>123<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> d = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">d.<span class="title function_">removeAttribute</span>(<span class="string">&quot;data-index&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="7-H5-新增属性">7. H5 新增属性</h2>
<p>原生属性可以使用 element.属性的方法获取属性值，自定义属性需要使用 element.getAttribute() 等方法获取、修改、删除属性值</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 用 data-index 命名自定义属性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-index</span>=<span class="string">&quot;1&quot;</span> <span class="attr">data-list-name</span>=<span class="string">&quot;Andy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取属性值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-index&quot;</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取属性索引</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>.<span class="property">index</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取属性索引</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>[<span class="string">&quot;index&quot;</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取属性值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>.<span class="property">listName</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取属性值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>[<span class="string">&quot;listName&quot;</span>]);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="案例：">案例：</h2>
<ul>
<li>element.属性： 获取内置属性值（元素本身自带属性）</li>
<li>element.getAttribute(‘属性’)：主要用于获取自定义属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span> <span class="attr">index</span>=<span class="string">&quot;1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1. 获取元素的属性值</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// (1) element.属性</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">id</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//(2) element.getAttribute(&#x27;属性&#x27;)  get得到获取 attribute 属性的意思 我们程序员自己添加的属性我们称为自定义属性 index</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="title function_">getAttribute</span>(<span class="string">&#x27;id&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="title function_">getAttribute</span>(<span class="string">&#x27;index&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2. 设置元素属性值</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// (1) element.属性= &#x27;值&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">id</span> = <span class="string">&#x27;test&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">className</span> = <span class="string">&#x27;navs&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// (2) element.setAttribute(&#x27;属性&#x27;, &#x27;值&#x27;);  主要针对于自定义属性</span></span></span><br><span class="line"><span class="language-javascript">        div.<span class="title function_">setAttribute</span>(<span class="string">&#x27;index&#x27;</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">        div.<span class="title function_">setAttribute</span>(<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;footer&#x27;</span>); <span class="comment">// class 特殊  这里面写的就是class 不是className</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 3 移除属性 removeAttribute(属性)    </span></span></span><br><span class="line"><span class="language-javascript">        div.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;index&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-style-property-修改样式">8. style.property 修改样式</h2>
<p>使用元素中的 style 属性可以修改该元素的样式。如 <code>a.style.fontSize</code>，<code>a.style.display</code>。修改的样式直接作用在行内CSS样式中，</p>
<ul>
<li>修改样式的属性名需要改写，将横杠从CSS属性名中去除，然后将横杠后第一个字母大写，如：background-color 写成 backgroundColor</li>
<li>属性值都是字符串，设置时必须包括单位</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.163.com&quot;</span>&gt;</span>网址<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    a.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&quot;24px&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>例：Tongle 切换背景效果</p>
<ul>
<li>通过类名切换背景</li>
<li>也可以通过 document.body.style.backgroundColor 属性切换背景颜色</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.cls</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: coral;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;button&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">className</span> == <span class="string">&quot;&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">className</span> = <span class="string">&quot;cls&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">className</span> = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>getComputedStyle()</p>
<p>接受一个节点对象，返回该节点对象最终样式信息的对象。</p>
<blockquote>
<p>getComputedStyle() 是 window 对象下的方法，不是 DOM 对象。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 200px; background-color: cadetblue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getComputedStyle</span>(div));</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>也可以指定查看属性如： getComputedStyle(div).width</p>
</blockquote>
<h1>事件</h1>
<p>事件是一种触发机制，给 HTML 元素加上事件，可以让元素与用户实现动态交互，即实现在某个交互动作或时间，该标签或其他标签会被改变。</p>
<p>事件是由三部分组成，事件源、事件类型、事件处理程序</p>
<ol>
<li>
<p>事件源：事件被触发的对象，如：DOM 元素</p>
</li>
<li>
<p>事件类型：事件是如何被触发，如：鼠标点击，鼠标经过，还是键盘按下</p>
</li>
<li>
<p>事件处理程序：通过一个函数赋值的方式完成</p>
</li>
</ol>
<p>.</p>
<h2 id="1-常见-HTML-事件">1. 常见 HTML 事件</h2>
<h3 id="1-1-鼠标事件">1.1. 鼠标事件</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">onclick  		// 鼠标点击左键</span><br><span class="line">ondbclick		// 鼠标双击</span><br><span class="line">oncontextmenu	// 鼠标点击右键</span><br><span class="line">mousedown		// 鼠标按键被按下</span><br><span class="line">mouseup			// 松开鼠标按键</span><br><span class="line">onselect		// 文本被选中</span><br><span class="line">oncopy			// 元素内容被复制</span><br><span class="line">onmouseenter	// 鼠标移动到事件监听的元素内（不区分子元素）</span><br><span class="line">onmouseover  	// 鼠标移动到有事件监听的元素或它的子元素内</span><br><span class="line">onmouseleave	// 鼠标离开元素外（不区分子元素）</span><br><span class="line">onmouseout  	// 鼠标离开元素，或它的子元素外</span><br><span class="line">onfocus  		// 获得鼠标焦点(点击input输入框)</span><br><span class="line">onblur  		// 失去鼠标焦点（进入其他input输入框）</span><br><span class="line">onmousemove  	// 鼠标移动</span><br><span class="line">onmouseup  		// 鼠标弹起</span><br><span class="line">onmousedown  	// 鼠标按下</span><br></pre></td></tr></table></figure>
<h3 id="1-2-键盘事件">1.2. 键盘事件</h3>
<p>执行顺序：keydown - keypress - keyup</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">onkeyup  <span class="comment">// 某个按键被松开时触发</span></span><br><span class="line">onkeydown  <span class="comment">// 某个键被按下时触发</span></span><br><span class="line">onkeypress  <span class="comment">// 某个键被按下时触发（但是不识别功能键如CTRL、SHIFT、方向键等）</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 常用的键盘事件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1. keyup 按键弹起的时候触发 </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// document.onkeyup = function() &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//         console.log(&#x27;我弹起了&#x27;);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我弹起了&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3. keypress 按键按下的时候触发  不能识别功能键 比如 ctrl shift 左右箭头啊</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keypress&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我按下了press&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//2. keydown 按键按下的时候触发  能识别功能键 比如 ctrl shift 左右箭头啊</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我按下了down&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 4. 三个事件的执行顺序  keydown -- keypress -- keyup</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>e.keyCode 返回 ASCII 值</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">按键1  // 返回 49</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>keyup / keydown 不区分大小写，返回都是大写的 ASCII 值</p>
</li>
<li>
<p>keypress 返回区分大小写</p>
</li>
</ul>
<h3 id="1-3-表单事件">1.3. 表单事件</h3>
<p>表单事件需要绑定在表单上边，而不是提交按钮上</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>reset</td>
<td>点击重置按钮时，先过一遍js代码再提交</td>
</tr>
<tr>
<td>submit</td>
<td>点击提交按钮时</td>
</tr>
</tbody>
</table>
<h3 id="1-4-内容变化事件">1.4. 内容变化事件</h3>
<table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>change</td>
<td>当内容改变且失去焦点时触发（表单验证：邮箱、用户名长度判断）</td>
</tr>
<tr>
<td>input</td>
<td>当内容值改变时触发，类似键盘弹起</td>
</tr>
</tbody>
</table>
<h2 id="2-事件书写的方式">2. 事件书写的方式</h2>
<ul>
<li>行内式</li>
<li>函数式</li>
<li>结合式</li>
</ul>
<h3 id="2-1-行内式">2.1. 行内式</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onclick</span>=<span class="string">&quot;this.innerHTML = &#x27;Hello!&#x27;&quot;</span>&gt;</span>点击此文本！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-函数式（常用）">2.2. 函数式（常用）</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>点击H1文本！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>点击H2文本<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>点击H3文本<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>点击H4文本<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> h1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    h1.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        h1.<span class="property">innerHTML</span> = <span class="string">&quot;Hello&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 可以省略变量部分</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h2&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h2&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;Hello&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 直接使用函数名（将匿名函数赋值给变量），需要注意函数的预编译执行顺序</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> f1 = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h3&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;Hello&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h3&quot;</span>).<span class="property">onclick</span> = f1;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 直接使用函数名</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h4&quot;</span>).<span class="property">onclick</span> = f2;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">f2</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h4&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;Hello&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>为什么在 script 标签中绑定 onclick 事件后边函数不用加 ()</p>
<ul>
<li>因为加括号就是调用函数，页面加载 js 文件后就会调用该函数，这不是我们所希望的</li>
<li>不加括号是一个函数对象就像匿名函数那样，function() {} 只是声明在那里，只有触发事件才会调用，在绑定的时候我们不需要调用该函数。</li>
<li>HTML 调用一定要加 ()</li>
</ul>
<h3 id="2-3-结合式">2.3. 结合式</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onclick</span>=<span class="string">&quot;sayHi()&quot;</span>&gt;</span>点击此文本！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;sayHi&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-4-事件中的-this">2.4. 事件中的 this</h3>
<p>在普通函数中，this 代表 windows 对象。在对象构造函数中，this 代表这个对象本身。而在事件中的 this 是该标签对象本身</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> h1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;h1&quot;</span>);</span><br><span class="line">f1 = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;Hi~&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 把一个方法赋值给 h1.onclick</span></span><br><span class="line"><span class="comment">// onclick 就相当于是 h1 对象的一个方法。在对象方法中的 this 指向的就是该对象本身。</span></span><br><span class="line">h1.<span class="property">onclick</span> = f1;</span><br></pre></td></tr></table></figure>
<h2 id="3-案例">3. 案例</h2>
<h3 id="3-1-点击按钮显示不同图片">3.1. 点击按钮显示不同图片</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&#x27;ldh&#x27;</span>&gt;</span>刘德华<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&#x27;zxy&#x27;</span>&gt;</span>张学友<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/ldh.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ldh = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ldh&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> zxy = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;zxy&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;img&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    zxy.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">src</span> = <span class="string">&quot;images/zxy.jpg&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">title</span> = <span class="string">&#x27;张学友&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    ldh.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">src</span> = <span class="string">&quot;images/ldh.jpg&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">title</span> = <span class="string">&#x27;刘德华&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-根据时间显示不同内容">3.2. 根据时间显示不同内容</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span> =<span class="string">&quot;images/s.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>上午好<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> img = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;img&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div= <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> h = date.<span class="title function_">getHours</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (h&lt;<span class="number">12</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">src</span> = <span class="string">&#x27;images/s.gif&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">innerHTML</span> = <span class="string">&#x27;上午好&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (h&lt;<span class="number">18</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">src</span> = <span class="string">&#x27;images/z.gif&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">innerHTML</span> = <span class="string">&#x27;中午好&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="property">src</span> = <span class="string">&#x27;images/w.gif&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">innerHTML</span> = <span class="string">&#x27;晚上好&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-点击按钮修改表单属性">3.3. 点击按钮修改表单属性</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;输入内容&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 注意这里不能用 inner.HTML，HTML 只适用于普通标签</span></span></span><br><span class="line"><span class="language-javascript">        input.<span class="property">value</span> = <span class="string">&#x27;点击了&#x27;</span>; </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 点击过一次禁用按钮</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 也可以使用 this.disabled = true;</span></span></span><br><span class="line"><span class="language-javascript">        btn.<span class="property">disabled</span> = <span class="literal">true</span>;         </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-4-实现密码框明文显示">3.4. 实现密码框明文显示</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#cccccc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box</span> <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">370px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">2px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">right</span>: <span class="number">2px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/hide.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span> =<span class="string">&quot;eye&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;psw&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> eye = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;eye&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> psw = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;psw&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> flag = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">        eye.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (flag == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                psw.<span class="property">type</span> = <span class="string">&#x27;text&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                eye.<span class="property">src</span> = <span class="string">&#x27;images/display.png&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                flag = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                psw.<span class="property">type</span> = <span class="string">&#x27;password&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                eye.<span class="property">src</span> = <span class="string">&#x27;images/hide.png&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                flag = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-修改背景颜色">3.5. 修改背景颜色</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            div.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;purple&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// this.style.backgroundColor = &#x27;purple&#x27;;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-6-显示隐藏二维码">3.6. 显示隐藏二维码</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    这是一个二维码</span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/qr.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;close-btn&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.close-btn&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.box&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        box.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-7-循环填入小图片">3.7. 循环填入小图片</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;li&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 图标y坐标相隔44个像素</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> index = i * <span class="number">44</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//Position需要是负值，循环遍历更改style</span></span></span><br><span class="line"><span class="language-javascript">        lis[i].<span class="property">style</span>.<span class="property">backgroundPosition</span> = <span class="string">&#x27;0 -&#x27;</span> + index + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-8-输入框点击，默认文字消失（利用焦点）">3.8. 输入框点击，默认文字消失（利用焦点）</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">text</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;手机&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        input.<span class="property">onfocus</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (input.<span class="property">value</span> === <span class="string">&#x27;手机&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">value</span> = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;#333&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        input.<span class="property">onblur</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span> === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">value</span> = <span class="string">&quot;手机&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;#ccc&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-9-利用类名批量更改-CSS-换风格">3.9. 利用类名批量更改 CSS 换风格</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.change</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: powderblue;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;default&quot;</span>&gt;</span>文本<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            div.<span class="property">className</span> = <span class="string">&#x27;change&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// div.className = &#x27;default change&#x27;; 保留原类名，直接用双类名</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-10-验证密码长度">3.10. 验证密码长度</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;register&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;message&quot;</span>&gt;</span>请输入6~16位密码<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> ipt = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.ipt&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> message = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.message&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        ipt.<span class="property">onblur</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">value</span>.<span class="property">length</span> &lt;<span class="number">6</span> || <span class="variable language_">this</span>.<span class="property">value</span>.<span class="property">length</span> &gt; <span class="number">16</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                message.<span class="property">className</span> = <span class="string">&#x27;message wrong&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                message.<span class="property">innerHTML</span> = <span class="string">&#x27;您输入的密码位数需要6~16位&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                message.<span class="property">className</span> = <span class="string">&#x27;message right&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                message.<span class="property">innerHTML</span> = <span class="string">&#x27;您输入的密码符合要求&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-11-排他思想（控制多个元素）">3.11. 排他思想（控制多个元素）</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮4<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> btns = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            btns[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    btns[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-12-网页背景换肤功能">3.12. 网页背景换肤功能</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;baidu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/4.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> imgs = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.baidu&#x27;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            imgs[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">backgroundImage</span> = <span class="string">&#x27;url(&#x27;</span> + <span class="variable language_">this</span>.<span class="property">src</span> + <span class="string">&#x27;)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-13-表格鼠标移动行表格隔行变色">3.13. 表格鼠标移动行表格隔行变色</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> trs = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;tbody&#x27;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;tr&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; trs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                trs[i].<span class="property">onmouseover</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;bg&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                trs[i].<span class="property">onmouseout</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-14-表单全选">3.14. 表单全选</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 全选和取消全选做法：  让下面所有复选框的checked属性（选中状态） 跟随 全选按钮即可</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> j_cbAll = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;j_cbAll&#x27;</span>); <span class="comment">// 全选按钮</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> j_tbs = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;j_tb&#x27;</span>).<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;input&#x27;</span>); <span class="comment">// 下面所有的复选框</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 注册事件</span></span></span><br><span class="line"><span class="language-javascript">    j_cbAll.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// this.checked 它可以得到当前复选框的选中状态如果是true 就是选中，如果是false 就是未选中</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">checked</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; j_tbs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                j_tbs[i].<span class="property">checked</span> = <span class="variable language_">this</span>.<span class="property">checked</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2. 下面复选框需要全部选中， 上面全选才能选中做法： 给下面所有复选框绑定点击事件，每次点击，都要循环查看下面所有的复选框是否有没选中的，如果有一个没选中的， 上面全选就不选中。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; j_tbs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        j_tbs[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// flag 控制全选按钮是否选中</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> flag = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 每次点击下面的复选框都要循环检查者4个小按钮是否全被选中</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; j_tbs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!j_tbs[i].<span class="property">checked</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    flag = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>; <span class="comment">// 退出for循环 这样可以提高执行效率 因为只要有一个没有选中，剩下的就无需循环判断了</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            j_cbAll.<span class="property">checked</span> = flag;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-15-TAB栏切换">3.15. TAB栏切换</h3>
<h1>节点操作</h1>
<h2 id="1-节点层级关系">1. 节点层级关系</h2>
<p>除了使用 ID，标签，CSS 选择器查找元素外，我们还可以利用节点层次关系（父集、子集）来选择元素。</p>
<p>一般节点至少拥有 nodeType（节点类型）、nodeName（节点名称）、nodeValue（节点值）三个属性</p>
<p>节点类型：</p>
<ul>
<li>元素节点 nodeType 为 1</li>
<li>属性节点 nodeType 为 2</li>
<li>文本节点 nodeType 为 3</li>
</ul>
<p>节点名称：</p>
<ul>
<li>nodeName 是只读的</li>
<li>元素节点的 nodeName 与标签名相同</li>
<li>属性节点 nodeName 与属性名相同</li>
<li>文本节点的 nodeName 始终是 #text</li>
<li>文档节点的 nodeName 始终是 #document</li>
</ul>
<p>节点值：</p>
<ul>
<li>元素节点 nodeValue 是 undefined 或 null</li>
<li>文本节点的 nodeValue 是 文本本身</li>
<li>属性节点的 nodeValue 是属性值</li>
</ul>
<p>使用 nodeName 和 nodeType 判断标签</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> nodes = docoument.<span class="title function_">getElementById</span>(<span class="string">&quot;uu&quot;</span>).<span class="property">childNodes</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nodes.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> node = nodes[i];</span><br><span class="line">        <span class="comment">// 判断 node 是否是 li</span></span><br><span class="line">        <span class="keyword">if</span> (node.<span class="property">nodeType</span> == <span class="string">&quot;1&quot;</span> &amp;&amp; node.<span class="property">nodeName</span> == <span class="string">&quot;LI&quot;</span>) &#123;</span><br><span class="line">            node.<span class="property">style</span>.<span class="property">backgroundColor</span> = count % <span class="number">2</span> == <span class="number">0</span> ? <span class="string">&quot;red&quot;</span> : <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>节点层级：</p>
<ul>
<li>
<p>父节点 parentNode / parentElement</p>
</li>
<li>
<p>子节点 childNodes（注意：会同时包含文本节点和元素节点）</p>
</li>
<li>
<p>子节点 children（非标准，但是只获得元素节点）</p>
</li>
<li>
<p>第一个子节点 firstChild  / firstElementChild</p>
</li>
<li>
<p>最后一个子节点 lastChild  / lastElementChild</p>
</li>
<li>
<p>下一个兄弟节点 nextSibling / nextElementSibling</p>
</li>
<li>
<p>上一个兄弟节点 previousSibling / previousElementSibling</p>
</li>
<li>
<p>带有 Element 的节点可以操作里边的HTML内容、文本内容、属性内容，一般用来做节点内容操作</p>
</li>
<li>
<p>带有 Node 字样的一般是用来做布局插入使用，它包含了文本节点和元素节点（比如换行也算做文本节点）</p>
</li>
</ul>
<p>很多函数是不支持 IE9 的，比如 firstElementChild，nextElementSibling，如果项目要考虑兼容性，需要自己封装函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getNextElementSibling</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> el = element;</span><br><span class="line">    <span class="keyword">while</span> (el = el.<span class="property">nextSibling</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (el.<span class="property">nodeType</span> === <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> el;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-1-ParentElement-父节点">1.1. ParentElement 父节点</h3>
<p>表示当前元素的父节点</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    a.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变 a 元素的父节点div中的innerHTML</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">parentElement</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;别点我&lt;/a&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-子节点">1.2. 子节点</h3>
<p>childNodes 选择元素所有子节点，返回一个集合，其中包含子元素，以及文本节点</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 200px; background-color: cadetblue&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    div.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">childNodes</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// innerHTML = &#x27;&lt;a href=&quot;#&quot;&gt;别点我&lt;/a&gt;&#x27;;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 输出结果 </span></span><br><span class="line"><span class="comment">NodeList(5) [text, a, text, a, text]</span></span><br><span class="line"><span class="comment">0: text</span></span><br><span class="line"><span class="comment">1: a</span></span><br><span class="line"><span class="comment">2: text</span></span><br><span class="line"><span class="comment">3: a</span></span><br><span class="line"><span class="comment">4: text</span></span><br><span class="line"><span class="comment">length: 5  --&gt;</span></span><br></pre></td></tr></table></figure>
<p>children 选择元素所有子节点，返回一个集合，可以用 [索引]的方式选择其中的子元素</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 200px; background-color: cadetblue&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    div.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">children</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// innerHTML = &#x27;&lt;a href=&quot;#&quot;&gt;别点我&lt;/a&gt;&#x27;;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 输出结果</span></span><br><span class="line"><span class="comment">HTMLCollection(2) [a, a]</span></span><br><span class="line"><span class="comment">0: a</span></span><br><span class="line"><span class="comment">1: a</span></span><br><span class="line"><span class="comment">length: 2</span></span><br><span class="line"><span class="comment">__proto__: HTMLCollection</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
<p>第一个/最后一个子节点</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 200px; background-color: cadetblue&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    div.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">firstElementChild</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;别点我&lt;/a&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// this.lastElementChild.innerHTML = &#x27;&lt;a href=&quot;#&quot;&gt;别点我&lt;/a&gt;&#x27;;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-3-兄弟节点">1.3. 兄弟节点</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 200px; background-color: cadetblue&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;a1&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#a1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    a.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">nextElementSibling</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;别点我&lt;/a&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-节点操作">2. 节点操作</h2>
<table>
<thead>
<tr>
<th style="text-align:left">方法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">document.createElement(<em>element</em>)</td>
<td style="text-align:left">创建 HTML 元素</td>
</tr>
<tr>
<td style="text-align:left">document.removeChild(<em>element</em>)</td>
<td style="text-align:left">删除 HTML 元素</td>
</tr>
<tr>
<td style="text-align:left">document.appendChild(<em>element</em>)</td>
<td style="text-align:left">尾部添加 HTML 元素</td>
</tr>
<tr>
<td style="text-align:left">node.insertBefore(child, targetChild)</td>
<td style="text-align:left">起始位置添加子节点</td>
</tr>
<tr>
<td style="text-align:left">document.replaceChild(<em>element</em>)</td>
<td style="text-align:left">替换 HTML 元素</td>
</tr>
<tr>
<td style="text-align:left">node.cloneNode()</td>
<td style="text-align:left">复制节点</td>
</tr>
<tr>
<td style="text-align:left">document.write(<em>text</em>)</td>
<td style="text-align:left">写入 HTML 输出流</td>
</tr>
</tbody>
</table>
<h3 id="2-1-创建节点">2.1. 创建节点</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;tagName&#x27;</span>)  <span class="comment">// 用来生成网页元素节点，参数为元素的标签名</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">createTextNode</span>()  <span class="comment">// 用来生成文本节点，参数为所要生成文本节点的内容</span></span><br></pre></td></tr></table></figure>
<p>创建标签的三种方式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">document.write()  // 直接写入页面内容流，会重写页面内容</span><br><span class="line">element.innerHTML  // 直接使用会导致效率低下，如果使用数组拼接后再写入则效率更高</span><br><span class="line">document.createElement()  // 添加大量标签效率要比 innerHTML 高</span><br></pre></td></tr></table></figure>
<p>例：插入节点</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> d1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#d1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> h1 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;h1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    h1.<span class="property">innerText</span> = <span class="string">&quot;12345&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 插入子节点</span></span></span><br><span class="line"><span class="language-javascript">    d1.<span class="title function_">appendChild</span>(h1);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>例：插入文本节点</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> d1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#d1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> divText = <span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="string">&quot;文本内容&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    d1.<span class="title function_">appendChild</span>(divText);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-添加节点">2.2. 添加节点</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">node.<span class="title function_">appendChild</span>(child)  <span class="comment">// 接受一个节点对象为参数，添加子节点（如有相同元素，则在后方插入）</span></span><br><span class="line">node.<span class="title function_">hasChildNodes</span>()  <span class="comment">// 返回一个布尔值，表示当前节点是否有子节点</span></span><br><span class="line">node.<span class="title function_">inserBefore</span>(child, targetChild)  <span class="comment">// 添加子节点（指定某个子节点的前方插入）</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-删除节点">2.3. 删除节点</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">node.<span class="title function_">removeChild</span>(child)  <span class="comment">// 接受一个子节点为参数，从父节点中删除一个子节点</span></span><br></pre></td></tr></table></figure>
<h3 id="2-4-复制节点">2.4. 复制节点</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">node.<span class="title function_">cloneNode</span>();  <span class="comment">// 用于克隆一个选中节点，它接受一个布尔值为参数，表示是否克隆该节点的子节点，默认 false（不会克隆节点上的事件）</span></span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;li1&quot;</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>大鸭梨<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;ul&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> li1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#li1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 文本也算是子节点，所以需要将参数设置为 true</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> newLi = li1.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">    ul.<span class="title function_">appendChild</span>(newLi);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-5-案例">2.5. 案例</h3>
<h4 id="2-5-1">2.5.1</h4>
<h4 id="2-5-2-留言板添加留言案例">2.5.2. 留言板添加留言案例</h4>
<h4 id="2-5-3-留言板删除留言案例">2.5.3. 留言板删除留言案例</h4>
<h4 id="2-5-4-动态生成表格">2.5.4. 动态生成表格</h4>
<h1>高级事件（推荐使用）</h1>
<p>传统注册方式：利用 on 开头的事件 onclick，如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;hi~&#x27;)&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;button&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;bye~&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>传统注册事件的方式具有唯一性，同一个元素同一个事件只能设置一个处理函数，最后注册的处理函数将会覆盖前面的注册的处理函数。</p>
<h2 id="1-addEventListenner-添加事件监听">1. addEventListenner 添加事件监听</h2>
<p>eventTarget.addEventListener() 方法将指定的监听器注册到 eventTarget （目标对象）上，当该对象触发指定的事件时，就会执行事件处理函数。</p>
<ul>
<li>type: 事件类型字符串，如 click，mouseover 等，这里不用带 on</li>
<li>listener：事件处理函数，事件触发时，会调用该监听函数</li>
<li>useCapture：可选参数，默认 false</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;弹出&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">        btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;第二次弹出&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>同一个元素，同一个事件可以添加多个侦听器</p>
</blockquote>
<h2 id="2-EventTarget-attachEvent">2. EventTarget.attachEvent()</h2>
<p>仅支持 IE9 以前的浏览器，不建议使用，只是为了开发兼容性，才需要使用。</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">EventTarget</span>.<span class="title function_">attachEvent</span>(eventNameWithOn, callback)</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li>eventNameWithOn: 事件类型字符串，比如 onclick、onmouseover</li>
<li>callback：事件处理函数</li>
</ul>
<p>注册事件兼容性封装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addEventListener</span>(<span class="params">element, eventName, fn</span>) &#123;</span><br><span class="line">    <span class="comment">// 判断当前浏览器是否支持 addEventListener 方法</span></span><br><span class="line">    <span class="keyword">if</span> (element.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">        element.<span class="title function_">addEventListener</span>(eventName, fn);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">attachEvent</span>) &#123;</span><br><span class="line">        element.<span class="title function_">attachEvent</span>(<span class="string">&#x27;on&#x27;</span> + eventName, fn);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 相当于 element.onclick = fn;</span></span><br><span class="line">        element[<span class="string">&#x27;on&#x27;</span> + eventName] = fn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">addEventListener</span>(btn, <span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;弹出3&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="3-removeEventListener-删除事件监听">3. removeEventListener 删除事件监听</h2>
<p>传统方式：可以利用覆盖来删除事件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;弹出&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 等于 null 或 &#x27;&#x27; 都可以</span></span></span><br><span class="line"><span class="language-javascript">        btn.<span class="property">onclick</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>取消后续动作：</p>
<p>可以利用 return flase 取消后续事件，比如表单提交之前验证，如果没有通过验证就取消提交，不执行跳转。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;f&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名&lt;/label</span><br><span class="line">        &gt;<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">name</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">value</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> f = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#f&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// submit 事件要给 form 标签绑定</span></span></span><br><span class="line"><span class="language-javascript">    f.<span class="title function_">addEventListener</span>(<span class="string">&quot;submit&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (input.<span class="property">value</span> === <span class="string">&quot;&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;没有输入用户名&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>移除 addEventListener 监听绑定事件方式：</p>
<p>语法：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">eventTarget.removeEvenetListener(type, listener[, useCapture]);</span><br></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, fn);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    fn = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;弹出&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        btn.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, fn);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>不能用匿名函数，需要将 function 单独写出来</p>
</blockquote>
<h2 id="4-eventTarget-detachEvent">4. eventTarget.detachEvent()</h2>
<p>还是旧版兼容性问题，可以使用 detachEvent() 方法解除监听</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">eventTarget.<span class="title function_">detachEvent</span>(eventNameWithOn, callback)</span><br></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">btn.<span class="title function_">detachEvent</span>(<span class="string">&#x27;onclick&#x27;</span> fn);</span><br></pre></td></tr></table></figure>
<h2 id="5-事件流">5. 事件流</h2>
<p>事件流描述的是从页面接受事件的顺序。事件发生时会在元素节点之间按照特定的顺序传播，这个传播的过程即DOM事件流</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/3.jpg" alt="image-20210419215557694"></p>
<p>addEventListener(type, listener[, useCapture]) 这第三个可选参数 Capture 如果是 true，表示在事件捕获阶段调用事件处理程序；如果是 false（默认），表示在事件冒泡阶段调用事件处理程序。</p>
<ul>
<li><del>onclick 和 attachEvent 只能得到冒泡阶段，也就是说从内向外依次执行</del></li>
<li><del>有些事件没有冒泡，比如 onblur、onfocus、onmouseenter、onmouseleft</del></li>
</ul>
<p>事件触发顺序：（大盒子套小盒子）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/4.jpg" alt="image-20210422105858035"></p>
<ul>
<li>当事件监听方式为默认方式，没有捕获阶段，只有冒泡阶段，比如 onclick，点击小盒子会先触发小盒子上绑定的事件，然后会依次触发大盒子、document、window 上边的事件</li>
<li>当事件监听方式设置为捕获方式，会先触发外部盒子上边的事件，然后再触发小盒子，之后再按冒泡顺序触发其他事件</li>
<li>默认事件都是冒泡顺序，只有用事件监听方式将 Capture 参数开启后才能实现捕获阶段触发事件，比如将 onclick 设置 Capture = true 的话，再点击小盒子就会先触发外边的盒子上的事件</li>
</ul>
<h2 id="6-事件对象">6. 事件对象</h2>
<p>event 对象代表事件的状态，比如键盘的按键状态、鼠标的位置、鼠标按钮的状态等，简单理解为事件发生后，跟事件相关的一系列数据集合都存放在这个 event 对象中。它包括很多属性和方法。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(event);            </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 事件对象e可以看做形参，名称可以自己命名</span></span></span><br><span class="line"><span class="language-javascript">    btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);            </span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>IE8 浏览器兼容性处理</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);            </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>事件对象常见的属性和方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">e.<span class="property">target</span>  <span class="comment">// 返回触发事件的对象（标准）</span></span><br><span class="line">e.<span class="property">srcElement</span>  <span class="comment">// 返回触发事件的对象（非标准 ie6-8 使用）</span></span><br><span class="line">e.<span class="property">type</span>  <span class="comment">// 返回事件的类型，比如 click、mouseover（不带on）</span></span><br><span class="line">e.<span class="title function_">stopPropagation</span>()  <span class="comment">// 阻止冒泡（标准）</span></span><br><span class="line">e.<span class="property">cancelBubble</span>  <span class="comment">// 该属性阻止冒泡（非标准 ie6-8 使用）</span></span><br><span class="line">e.<span class="title function_">preventDefault</span>()  <span class="comment">// 阻止默认事件（标准）如让连接不跳转</span></span><br><span class="line">e.<span class="property">returnValue</span>  <span class="comment">// 阻止默认事件（非标准 ie6-8 使用）</span></span><br></pre></td></tr></table></figure>
<p>e.target 返回触发事件的对象（点击对象）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>e.target 是点击对象，this 是绑定对象（类似currentTarget）</p>
</blockquote>
<p>阻止默认事件行为</p>
<p>之前用的 return false 可以阻止事件默认行为，也可以使用事件对象的方式阻止。</p>
<ul>
<li>取消浏览器对当前事件的默认行为</li>
<li>比如：点击链接跳转到指定页面，按空格，页面向下滚动一段距离，组织提交数据</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;#&#x27;</span>&gt;</span>链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    a.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 传统方式</span></span></span><br><span class="line"><span class="language-javascript">    a.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 低版本浏览器 ie678  returnValue  属性</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// e.returnValue;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 我们可以利用return false 也能阻止默认行为 没有兼容性问题 特点： return 后面的代码不执行了， 而且只限于传统的注册方式</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// return false;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>阻止事件冒泡</p>
<ul>
<li>两个嵌套盒子都有自己的事件，当点击内部盒子时，由于冒泡规则，外部事件也会触发，如果不想让外部盒子绑定事件生效，就需要组织冒泡事件。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span>son儿子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 常见事件对象的属性和方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 阻止冒泡  dom 推荐的标准 stopPropagation() </span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> son = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.son&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    son.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;son&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        e.<span class="title function_">stopPropagation</span>(); <span class="comment">// stop 停止  Propagation 传播</span></span></span><br><span class="line"><span class="language-javascript">        e.<span class="property">cancelBubble</span> = <span class="literal">true</span>; <span class="comment">// 非标准 cancel 取消 bubble 泡泡</span></span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> father = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.father&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    father.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;father&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;document&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="7-事件委托">7. 事件委托</h2>
<p>不是给每个子节点单独设置事件监听器，而是将事件监听器设置在其父节点上，然后利用冒泡原理影响设置每个子节点。</p>
<ul>
<li>event.target：对事件起源目标的引用，属性返回触发事件的那个节点</li>
<li>event.currentTarget：属性返回事件当前所在的节点，即正在执行的监听函数所绑定的那个节点。</li>
</ul>
<blockquote>
<p>currentTarget 用 console 控制台显示的时候一直显示 null ，这是因为currentTarget 只能用于事件正在处理过程中，当回调结束，会被重新赋值。</p>
</blockquote>
<p>如：给 ul 注册点击事件，然后利用事件对象的 target 来找到当前点击的 li，因为点击 li，事件会冒泡到 ul 上，ul 有注册事件，就会触发事件监听器</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 事件委托的核心原理：给父节点添加侦听器， 利用事件冒泡影响每一个子节点</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    ul.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// alert(&#x27;知否知否，点我应有弹框在手！&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// e.target 这个可以得到我们点击的对象</span></span></span><br><span class="line"><span class="language-javascript">        e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;pink&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>禁止鼠标右键、禁止复制文字</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">我是一段不愿意分享的文字</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. contextmenu 我们可以禁用右键菜单</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2. 禁止选中文字 selectstart</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;selectstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-鼠标事件对象">8. 鼠标事件对象</h2>
<p>event 对象代表事件的状态，跟事件相关的一系列信息的集合。鼠标事件对象 MouseEvent，键盘事对象 KeyboardEvent</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">e.<span class="property">clientX</span>  <span class="comment">// 返回鼠标相对于浏览器窗口可视区域 X 坐标</span></span><br><span class="line">e.<span class="property">clientY</span></span><br><span class="line">e.<span class="property">pageX</span>  <span class="comment">// 返回鼠标相对于文档页面 X 坐标 IE9+</span></span><br><span class="line">e.<span class="property">pageY</span></span><br><span class="line">e.<span class="property">screenX</span>  <span class="comment">// 返回鼠标相对于电脑屏幕的 X 坐标</span></span><br><span class="line">e.<span class="property">screenY</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 鼠标事件对象 MouseEvent</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1. client 鼠标在可视区的x和y坐标</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">clientX</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">clientY</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---------------------&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2. page 鼠标在页面文档的x和y坐标</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">pageX</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">pageY</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---------------------&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 3. screen 鼠标在电脑屏幕的x和y坐标</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">screenX</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">screenY</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>跟随精灵</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/angel.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> pic = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;img&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1. mousemove只要我们鼠标移动1px 就会触发这个事件</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.log(1);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2.核心原理： 每次鼠标移动，我们都会获得最新的鼠标坐标， 把这个x和y坐标做为图片的top和left 值就可以移动图片</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> x = e.<span class="property">pageX</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> y = e.<span class="property">pageY</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;x坐标是&#x27;</span> + x, <span class="string">&#x27;y坐标是&#x27;</span> + y);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//3 . 千万不要忘记给left 和top 添加px 单位</span></span></span><br><span class="line"><span class="language-javascript">        pic.<span class="property">style</span>.<span class="property">left</span> = x - <span class="number">50</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        pic.<span class="property">style</span>.<span class="property">top</span> = y - <span class="number">40</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="9-键盘事件对象">9. 键盘事件对象</h2>
<p>监控按键，然后移动页面焦点</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 核心思路： 检测用户是否按下了s 键，如果按下s 键，就把光标定位到搜索框里面</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 使用键盘事件对象里面的keyCode 判断用户按下的是否是s键</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 搜索框获得焦点： 使用 js 里面的 focus() 方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> search = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.log(e.keyCode);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">83</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            search.<span class="title function_">focus</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1>兼容性问题</h1>
<h2 id="1-事件对象">1. 事件对象</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span><br></pre></td></tr></table></figure>
<h2 id="2-阻止浏览器默认行为">2. 阻止浏览器默认行为</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (event.<span class="property">preventDefault</span>) &#123;</span><br><span class="line">    event.<span class="title function_">preventDefault</span>()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    event.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>也可以使用 return false</p>
</blockquote>
<h2 id="3-阻止事件传播（冒泡）">3. 阻止事件传播（冒泡）</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (event.<span class="property">stopPropagation</span>) &#123;</span><br><span class="line">    event.<span class="title function_">stopPropagation</span>()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    event.<span class="property">cancelBubble</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>BOM</h1>
<p>BOM(Browser Object Model) 浏览器对象模型，它提供了独立于页面内容与浏览器窗口进行交互的对象，其核心对象是 window。</p>
<ul>
<li>BOM 缺乏标准</li>
<li>BOM 包含 DOM</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/5.jpg" alt="image-20210419221302452"></p>
<p>Window 对象是浏览器的顶级对象：</p>
<ol>
<li>
<p>它是 JS 访问浏览器窗口的一个接口</p>
</li>
<li>
<p>它是一个全局对象。定义在全局作用域中的变量、函数都会变成 window 对象的属性和方法。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">num</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="variable language_">window</span>);  <span class="comment">// 查看 window 对象属性和方法</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在调用的时候可以省略 window</p>
</blockquote>
<h2 id="1-window-对象的常见事件">1. window 对象的常见事件</h2>
<h3 id="对话框事件">对话框事件</h3>
<p>之前使用的 alert, prompt(), confirm() 其实都是 windows 对象的方法，完整写法应该是：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">alert</span>();</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">prompt</span>();</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">confirm</span>();</span><br></pre></td></tr></table></figure>
<h3 id="1-1-窗口加载事件">1.1. 窗口加载事件</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br></pre></td></tr></table></figure>
<p>以下三种情况都会触发 load 事件：</p>
<ol>
<li>
<p>a标签链接</p>
</li>
<li>
<p>F5或者刷新按钮</p>
</li>
<li>
<p>前进或后退</p>
</li>
</ol>
<p>可以将 JS 代码放到 onload 中，确保所有资源（CSS、JS、图片）已经加载完毕再对页面 DOM 进行操作</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&#x27;点击操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>window.onload 传统注册事件方式只能写一次，如果有多个，以最后一个 window.onload 为准，而 addEventListener 没有这种限制，推荐使用</p>
</blockquote>
<p>pageshow</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pageshow&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(e.<span class="property">persisted</span>)&#123;  <span class="comment">// 判断页面是否是缓存页面</span></span><br><span class="line">        <span class="title function_">fn</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>与 load 类似，兼容火狐浏览器，防止 JS 缓存而不刷新执行</p>
</blockquote>
<h3 id="1-2-DOMContentLoaded-事件">1.2. DOMContentLoaded 事件</h3>
<p>仅当 DOM 加载完成，不包括样式表、图片、Flash 等（IE9+），如果页面图标较多，此时用 DOM 事件比较合适</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded &quot;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="1-3-调整窗口大小事件">1.3. 调整窗口大小事件</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;变化了&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">innerWidth</span> &lt;= <span class="number">800</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                div.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                div.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-4-定时器-setTimeout">1.4. 定时器 setTimeout</h3>
<p>setTimeout 设置一个定时器，在指定时间后执行调用函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(调用函数, [延迟的毫秒数]);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;时间到了&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">2000</span>);</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">callback</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;爆炸了&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> timer1 = <span class="built_in">setTimeout</span>(callback, <span class="number">3000</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> timer2 = <span class="built_in">setTimeout</span>(callback, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// setTimeout(&#x27;callback()&#x27;, 3000); // 我们不提倡这个写法</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>例：5秒自动关闭广告</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>停止 setTimeout() 定时器：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">clearTimeout</span>(timer);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>停止定时器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">clearTimeout</span>(timer);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    timer = <span class="built_in">setTimeout</span>(fn, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-5-循环定时器">1.5. 循环定时器</h3>
<p>每隔一段时间，就会调用函数，其他用法和 setTimeout 一样</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="built_in">setInterval</span>(回调函数, [间隔毫秒数]);</span><br></pre></td></tr></table></figure>
<p>例：倒计时效果</p>
<p>停止 setInterval() 定时器</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">clearInterval</span>(定时器名字);</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;begin&quot;</span>&gt;</span>开启定时器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;stop&quot;</span>&gt;</span>停止定时器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> begin = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.begin&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> stop = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.stop&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> timer = <span class="literal">null</span>; <span class="comment">// 全局变量  null是一个空对象</span></span></span><br><span class="line"><span class="language-javascript">    begin.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        timer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ni hao ma&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    stop.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">clearInterval</span>(timer);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>发送短信验证按钮60秒等待效果</p>
<h3 id="1-6-防抖">1.6 防抖</h3>
<p>防抖表示用户触发事件比较频繁，只取最后一次结果，如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    inp = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    inp.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br></pre></td></tr></table></figure>
<p>一个简单的 input 框，当我们输入 “前端” 时，事件被触发了9次，即</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">q</span><br><span class="line">test.html:15 qi</span><br><span class="line">test.html:15 qia</span><br><span class="line">test.html:15 qian</span><br><span class="line">test.html:15 qiand</span><br><span class="line">test.html:15 qiandu</span><br><span class="line">test.html:15 qiandua</span><br><span class="line">test.html:15 qianduan</span><br><span class="line">test.html:15 前端</span><br></pre></td></tr></table></figure>
<p>搜索框往往会显示模糊搜索，用户输入关键词，会对后端进行数据请求，然后拿到数据，如果不开启防抖，那么就会对后端造成很多无用请求，我们可以开启一个定时器，当用户输入完毕1秒后，开始进行请求</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">inp = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">inp.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 判断之前是否有定时器，如果有，那么就清空计时器</span></span><br><span class="line">    <span class="keyword">if</span> (timer != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设定定时器，1秒后执行</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>封装为 debounce 函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">inp = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (timer != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        &#125;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 执行函数并改变 this 指向</span></span><br><span class="line">            fn.<span class="title function_">call</span>(<span class="variable language_">this</span>)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inp.<span class="title function_">addEventListener</span>(</span><br><span class="line">    <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">    <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="1-7-节流">1.7 节流</h3>
<p>节流为了控制高频事件执行次数，比如滚动条事件，当用户滑动滚动条时，事件会不断触发，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>只触发一次</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        <span class="comment">// 开启定时器，500毫秒后执行</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;, <span class="number">500</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// flag 为 true 执行完定时器后关闭 flag</span></span><br><span class="line">    <span class="comment">// 事件再次触发后只会执行 flag = false</span></span><br><span class="line">    flag = <span class="literal">false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>控制次数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        <span class="comment">// 开启定时器，500毫秒后把 flag 打开</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">            flag = <span class="literal">true</span></span><br><span class="line">        &#125;, <span class="number">500</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    flag = <span class="literal">false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>封装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">                flag = <span class="literal">true</span></span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125;</span><br><span class="line">        flag = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(</span><br><span class="line">    <span class="string">&#x27;scroll&#x27;</span>,</span><br><span class="line">    <span class="title function_">throttle</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;, <span class="number">500</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="2-JS-执行队列">2. JS 执行队列</h2>
<p>JS 是单线程，同一时间只能执行一件事情，为了解决这个问题，新版 HTML5 中允许 Javascript 脚本创建多个线程。于是 JS 中出现了同步和异步。</p>
<ul>
<li>
<p>同步：单线程，顺序执行</p>
</li>
<li>
<p>异步：多线程，一起执行</p>
</li>
</ul>
<p>同步任务：</p>
<p>同步任务都在主线程上执行，行程一个执行栈，然后顺序执行。</p>
<p>异步任务：</p>
<p>JS 异步任务是通过回调函数实现的，一般而言，异步任务有以下三种类型：</p>
<ol>
<li>
<p>普通事件，如 click、resize</p>
</li>
<li>
<p>资源加载，如 load、error等</p>
</li>
<li>
<p>定时器，包括 setInterval、setTimeout 等</p>
</li>
</ol>
<p>执行机制：</p>
<p>先执行执行栈中的同步任务，将异步任务（回调函数）放入任务队列中，一旦执行栈中的所有同步任务执行完毕，系统就会按次序读取任务队列中的异步任务，将异步任务放入执行栈进行执行。</p>
<h2 id="3-location-对象">3. location 对象</h2>
<p>window 对象给我们提供了一个 location 属性用于获取设置窗体的 URL，并且可以用于解析 URL，这个属性返回的是一个对象，所以们将这个属性也成为 location 对象</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location.href  // URL</span><br><span class="line">location.host  // 返回主机名（域名）</span><br><span class="line">location.port  // 返回端口</span><br><span class="line">location.pathname  // 返回路径</span><br><span class="line">location.search  // 返回参数</span><br><span class="line">location.hash  // 返回锚点</span><br></pre></td></tr></table></figure>
<p>5秒后跳转页面</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>5秒后会自动跳转页面<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> time = <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (time == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            location.<span class="property">href</span> = <span class="string">&#x27;#&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            div.<span class="property">innerText</span> = time + <span class="string">&#x27;秒后会自动跳转页面&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            time--;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">1000</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>获取提交表单参数，显示在第二个页面中</p>
<p>login.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;index.html&quot;</span>&gt;</span></span><br><span class="line">    用户名： <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;uname&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">search</span>); <span class="comment">// ?uname=andy</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1.先去掉？  substr(&#x27;起始的位置&#x27;，截取几个字符);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> params = location.<span class="property">search</span>.<span class="title function_">substr</span>(<span class="number">1</span>); <span class="comment">// uname=andy</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(params);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. 利用=把字符串分割为数组 split(&#x27;=&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> arr = params.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [&quot;uname&quot;, &quot;ANDY&quot;]</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3.把数据写入div中</span></span></span><br><span class="line"><span class="language-javascript">    div.<span class="property">innerHTML</span> = arr[<span class="number">1</span>] + <span class="string">&#x27;欢迎您&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>location 对象的方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">location.<span class="title function_">assign</span>()  <span class="comment">// 跟 href 一样，可以跳转页面（也成为重定向）</span></span><br><span class="line">location.<span class="title function_">replace</span>()  <span class="comment">// 替换当前页面（不记录历史，不能后退）</span></span><br><span class="line">location.<span class="title function_">reload</span>()  <span class="comment">// 重新加载当前页面，相当于刷新，如果参数为 true，强制刷新</span></span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">location.<span class="title function_">assign</span>(<span class="string">&#x27;http://www.forece.net&#x27;</span>);</span><br><span class="line">location.<span class="title function_">assign</span>(<span class="string">&#x27;http://www.forece.net&#x27;</span>);</span><br><span class="line">location.<span class="title function_">reload</span>(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<h2 id="4-navigator-对象">4. navigator 对象</h2>
<p>navigator 对象包含有关浏览器信息，它有很多属性，最常见的属性就是 userAgent，可以判断用户浏览器头部的参数，用来显示不同的页面。</p>
<ul>
<li>navigator.userAgent  浏览器类型</li>
<li>navigator.platform 浏览器所在系统平台</li>
<li>navigator.geolocation 地理位置定位</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(navigator);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (navigator.<span class="property">userAgent</span>.<span class="property">match</span>)&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> =<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> =<span class="string">&#x27;&#x27;</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-history-对象">5. history 对象</h2>
<p>history 对象与浏览器历史记录进行交互，改对象包含用户访问过的URL</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">back()  // 后退</span><br><span class="line">forward()  // 前进</span><br><span class="line">go(参数)  // 参数为数字，1为前进一个页面，-2为后退两个页面</span><br></pre></td></tr></table></figure>
<h2 id="6-元素偏移量-offset">6. 元素偏移量 offset</h2>
<p>offset 属性可以动态得到该元素的位置（偏移）大小等。</p>
<ul>
<li>获得元素距离带有定位父元素的位置</li>
<li>获得元素自身的大小（宽度高度）</li>
<li>返回的数值不带单温</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">element.offsetParent  // 返回作为该元素带有定位的父集元素，如果父集没有定位返回 body</span><br><span class="line">element.offsetTop  // 返回相对父元素定位上方偏移</span><br><span class="line">element.offsetLeft  // 返回相对父元素定位左方 偏移</span><br><span class="line">element.offsetWidth  // 返回自身包含 padding、边框、内容区的宽度</span><br><span class="line">element.offsetHeight  // 返回自身包含 padding、边框、内容区的高度</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// offset 系列</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> father = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.father&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> son = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.son&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1.可以得到元素的偏移 位置 返回的不带单位的数值  </span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(father.<span class="property">offsetTop</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(father.<span class="property">offsetLeft</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 它以带有定位的父亲为准  如果么有父亲或者父亲没有定位 则以 body 为准</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(son.<span class="property">offsetLeft</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> w = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.w&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2.可以得到元素的大小 宽度和高度 是包含padding + border + width </span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(w.<span class="property">offsetWidth</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(w.<span class="property">offsetHeight</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3. 返回带有定位的父亲 否则返回的是body</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(son.<span class="property">offsetParent</span>); <span class="comment">// 返回带有定位的父亲 否则返回的是body</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(son.<span class="property">parentNode</span>); <span class="comment">// 返回父亲 是最近一级的父亲 亲爸爸 不管父亲有没有定位</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>offset 与 style 的区别</p>
<table>
<thead>
<tr>
<th>offset</th>
<th>style</th>
</tr>
</thead>
<tbody>
<tr>
<td>offset 可以得到任意样式表中的样式值</td>
<td>style 只能得到行内样式表中的样式值</td>
</tr>
<tr>
<td>offset 系列获得的数值是没有单位的</td>
<td>style.width 获得的是带有单位的字符串</td>
</tr>
<tr>
<td>offsetWidth 包含 padding + border + width</td>
<td>style.width 获得不包含 padding 和 border 的值</td>
</tr>
<tr>
<td>offsetWidth 等属性是只读属性，只能获取不能赋值</td>
<td>style.width 是可读写属性，可以获取也可以赋值</td>
</tr>
<tr>
<td>所以，我们想要获取元素大小位置，用 offset 更合适</td>
<td>所以，我们想要给元素更改值，需要使用 style</td>
</tr>
</tbody>
</table>
<p>拖动框悬浮效果</p>
<p>京东放大镜效果</p>
<h2 id="7-元素可视区-client">7.  元素可视区 client</h2>
<p>使用 client 系列的相关属性可以获取元素可视区的相关信息，如：元素的边框大小、元素大小等。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">element.clientTop  // 返回元素上边框的大小</span><br><span class="line">element.clientLeft  // 返回元素左边框的大小</span><br><span class="line">element.clientWidth  // 返回自身包括 padding、内容区的宽度，不含边框，不带单位</span><br><span class="line">element.clientHeight  // 返回自身包括 padding、内容区的高度，不含边框，不带单位</span><br></pre></td></tr></table></figure>
<blockquote>
<p>clientWidth 不包含边框，offsetWidth 包含边框</p>
</blockquote>
<h2 id="8-立即执行函数">8. 立即执行函数</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)();</span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;());</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a+b);</span><br><span class="line">    &#125;)(<span class="number">1</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>立即执行函数最大的作用就是独立创建了一个作用域</p>
</blockquote>
<h2 id="9-元素滚动-scroll">9. 元素滚动 scroll</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">element.scrollTop  // 返回被卷去的上侧距离</span><br><span class="line">element.scrollLeft  // 返回被卷去的左侧距离</span><br><span class="line">element.scrollWidth  // 返回自身的实际宽度，不含边框</span><br><span class="line">element.scrollHeight  // 返回自身的实际高度，不含边框</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/6.jpg" alt="image-20210419224247403"></p>
<p>滚动事件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">div.addEvenetListener(&quot;scroll&quot;, function()&#123;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>页面被卷去的头部</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">element.pageYscrollY</span><br><span class="line">element.pageXscrollX</span><br></pre></td></tr></table></figure>
<blockquote>
<p>一个是页面被卷曲，另外一个是元素被卷曲</p>
</blockquote>
<p>侧边工具栏固定</p>
<p>offsetWidth、clientWidth、scrollWidth 区别</p>
<ul>
<li>offset 包含边框</li>
<li>client 不包含边框</li>
<li>scroll 会返回超出边框元素的实际大小</li>
</ul>
<p>实际应用：</p>
<p>offset 常用于获取元素的位置</p>
<p>client 常用于获取元素大小</p>
<p>scroll 常用于获取滚动距离</p>
<p>pageXoffset 常用于页面滚动距离</p>
<p>获取文档高度</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">网页可见区域宽： document.body.clientWidth</span><br><span class="line">网页可见区域高： document.body.clientHeight</span><br><span class="line">网页可见区域宽： document.body.offsetWidth (包括边线的宽)</span><br><span class="line">网页可见区域高： document.body.offsetHeight (包括边线的高)</span><br><span class="line">网页正文全文宽： document.body.scrollWidth</span><br><span class="line">网页正文全文高： document.body.scrollHeight</span><br><span class="line">网页被卷去的高： document.body.scrollTop</span><br><span class="line">网页被卷去的左： document.body.scrollLeft</span><br><span class="line">网页正文部分上： window.screenTop</span><br><span class="line">网页正文部分左： window.screenLeft</span><br><span class="line">屏幕分辨率的高： window.screen.height</span><br><span class="line">屏幕分辨率的宽： window.screen.width</span><br><span class="line">屏幕可用工作区高度： window.screen.availHeight</span><br><span class="line">屏幕可用工作区宽度： window.screen.availWidth</span><br></pre></td></tr></table></figure>
<h2 id="10-动画函数">10. 动画函数</h2>
<p>本质上设定一个定时器，然后利用CSS中的绝对定位将left值不断变化</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 动画原理</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 获得盒子当前位置  </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. 让盒子在当前位置加上1个移动距离</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3. 利用定时器不断重复这个操作</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 4. 加一个结束定时器的条件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 5. 注意此元素需要添加定位， 才能使用element.style.left</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (div.<span class="property">offsetLeft</span> &gt;= <span class="number">400</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 停止动画 本质是停止定时器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">clearInterval</span>(timer);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        div.<span class="property">style</span>.<span class="property">left</span> = div.<span class="property">offsetLeft</span> + <span class="number">1</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">30</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>封装动画函数</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>夏雨荷<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 简单动画函数封装obj目标对象 target 目标位置</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params">obj, target</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (obj.<span class="property">offsetLeft</span> &gt;= target) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 停止动画 本质是停止定时器</span></span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">clearInterval</span>(timer);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            obj.<span class="property">style</span>.<span class="property">left</span> = obj.<span class="property">offsetLeft</span> + <span class="number">1</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">30</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> span = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;span&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 调用函数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">animate</span>(div, <span class="number">300</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">animate</span>(span, <span class="number">200</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>完整动画函数</p>
<p>轮播幻灯图</p>
<p>滚动窗口到指定坐标</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">scroll</span>(x,y);</span><br></pre></td></tr></table></figure>
<p>回到顶部</p>
<h2 id="11-移动端事件">11. 移动端事件</h2>
<p>移动端浏览器兼容性比较好，可以兼容桌面版的JS特效，Touch 触摸事件可以响应用户手指对屏幕的接触。</p>
<p>常见触摸事件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">touchstart  // 手指触摸到一个 DOM 元素时触发</span><br><span class="line">touchmove  // 手指在一个 DOM 元素上滑动时触发</span><br><span class="line">touchend  // 手指从一个 DOM 元素上移开时触发</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;触摸&#x27;</span>);            </span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchmove&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;滑动&#x27;</span>);            </span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchend&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;摸完&#x27;</span>);            </span></span><br><span class="line"><span class="language-javascript">    &#125;)    </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>touch 事件不会对桌面 click 事件有任何影响</li>
<li>click 事件会和 touch 触摸事件同步执行</li>
</ul>
<h3 id="11-1-触摸事件对象">11.1. 触摸事件对象</h3>
<p>TouchEvent 是一类描述手指在触摸屏上状态变化的事件，用于描述一个或多个触点</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">touches  // 正在触摸屏幕上所有手指的一个列表</span><br><span class="line">targetTouches  // 正在触摸当前DOM元素上的手指的一个列表</span><br><span class="line">changedTouches  // 手指状态发生了改变的列表</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;e.targetTouches[0]&#x27;</span>);  <span class="comment">// 一般常用targetTouches</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>手机端中滑动 div 盒子</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> startX = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> startY = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> x =<span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> y=<span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        startX = e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">pageX</span></span></span><br><span class="line"><span class="language-javascript">        startY = e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">pageY</span></span></span><br><span class="line"><span class="language-javascript">        x = <span class="variable language_">this</span>.<span class="property">offsetLeft</span>;</span></span><br><span class="line"><span class="language-javascript">        y = <span class="variable language_">this</span>.<span class="property">offsetTop</span>;   </span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchmove&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> moveX =   e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">pageX</span> - startX;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> moveY = e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">pageY</span> - startY;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">left</span> = x + moveX + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">top</span> = y + moveY + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;)  </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>手机端轮播图制作</p>
<h3 id="11-2-classList-属性">11.2. classList 属性</h3>
<p>classList 属性是 HTML5 新增的一个属性，返回元素的类名，只支持 ie10 以上版本，但是手机端基本上都支持。</p>
<p>查看 div 中所有的类</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">classList</span>);        </span><br></pre></td></tr></table></figure>
<p>该属性用于在元素中添加，移除以及切换CSS类</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">element.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;类名&#x27;</span>);  <span class="comment">// 追加类名</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;类名&#x27;</span>);   <span class="comment">// 移除类</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">tongle</span>(<span class="string">&#x27;类名&#x27;</span>);   <span class="comment">// 切换类（有则删除，没有则添加）</span></span><br></pre></td></tr></table></figure>
<p>移除带有 current 类，给选中的标签加上 current 类</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ol.<span class="title function_">querySelector</span>(<span class="string">&#x27;.current&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;current&#x27;</span>);</span><br><span class="line">ol.<span class="property">children</span>[index].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;current&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>返回顶部手机端代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 返回顶部模块制作</span></span><br><span class="line"><span class="keyword">var</span> goBack = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.goBack&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> nav = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;nav&#x27;</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">pageYOffset</span> &gt;= nav.<span class="property">offsetTop</span>) &#123;</span><br><span class="line">        goBack.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        goBack.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">goBack.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">scroll</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>click 延迟解决方案</p>
<p>移动端 click 事件有 300ms 延迟，原因是移动端屏幕双击会缩放(double tap to zoom)</p>
<p>解决方案：</p>
<ul>
<li>禁用缩放，浏览器禁用默认的双击缩放行文并且去掉 300ms 的点击延迟</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;user-scalable=no&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>利用 touch 事件自己封装事件</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1k4411w7sV?p=155">https://www.bilibili.com/video/BV1k4411w7sV?p=155</a></p>
<ul>
<li>fastclick 插件</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/ftlabs/fastclick">https://github.com/ftlabs/fastclick</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;addEventListener&#x27;</span> <span class="keyword">in</span> <span class="variable language_">document</span>) &#123;</span><br><span class="line">	<span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title class_">FastClick</span>.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>);</span><br><span class="line">	&#125;, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="number">1</span>);</span><br><span class="line">&#125;)   </span><br></pre></td></tr></table></figure>
<h1>移动端插件</h1>
<p>swiper 插件</p>
<p><a target="_blank" rel="noopener" href="https://www.swiper.com.cn/">https://www.swiper.com.cn/</a></p>
<p>使用方法：</p>
<ol>
<li>
<p>引入 css、js 文件</p>
</li>
<li>
<p>引入自己 js，需要放在 swiper js 文件下方</p>
</li>
<li>
<p>插入 div，按照 swiper 结构插入</p>
</li>
<li>
<p>添加 js 代码</p>
</li>
</ol>
<p>其他滑动插件：</p>
<p>superslide：<a target="_blank" rel="noopener" href="http://www.superslide2.com/">http://www.superslide2.com/</a></p>
<p>iscroll：<a target="_blank" rel="noopener" href="https://github.com/cubiq/iscroll">https://github.com/cubiq/iscroll</a></p>
<p>视频插件：</p>
<p>zy.media：<a target="_blank" rel="noopener" href="https://github.com/ireaderlab/zyMedia">https://github.com/ireaderlab/zyMedia</a></p>
<h1>移动端框架</h1>
<p>前端常用框架有 Bootstrap、Vue、Angular、React 等，既能开发 PC 端，也可以开发移动端。</p>
<p>Bootstrap 轮播图</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://gitee.com/xiaoqiang001/jsapis_material/tree/master/%E7%AC%AC%E4%B8%83%E5%A4%A9/06-bootstrap%E8%BD%AE%E6%92%AD%E5%9B%BE</span><br></pre></td></tr></table></figure>
<h1>本地存储</h1>
<p>本地存储特性</p>
<ol>
<li>数据存储在用户浏览器中</li>
<li>设置、读取方便、甚至页面刷新都不丢失数据</li>
<li>容量较大，sessionStorage 约 5M、localStorage约20M</li>
<li>只能存储字符串，可以将对象JSON.stringify() 编码后存储</li>
</ol>
<h2 id="1-window-sessionStorage">1. window.sessionStorage</h2>
<ol>
<li>生命周期为关闭浏览器窗口</li>
<li>在同一个窗口（页面）数据可以共享</li>
<li>以键值对的形式存储使用</li>
</ol>
<p>相关 API</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sessionStorage.<span class="title function_">setItem</span>(key, value)</span><br><span class="line">sessionStorage.<span class="title function_">getItem</span>(key)</span><br><span class="line">sessionStorage.<span class="title function_">removeItem</span>(key)</span><br></pre></td></tr></table></figure>
<p>sessionStorage 案例</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/xiaoqiang001/jsapis_material/blob/master/%E7%AC%AC%E4%B8%83%E5%A4%A9/08-%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E4%B9%8BsessionStorage.html">https://gitee.com/xiaoqiang001/jsapis_material/blob/master/第七天/08-本地存储之sessionStorage.html</a></p>
<h2 id="2-window-localStorage">2. window.localStorage</h2>
<ol>
<li>生命周期永久存在</li>
<li>多窗口都可以使用</li>
<li>以键值对形式使用</li>
</ol>
<p>相关 API</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">localStorage.setItem(key, value)  // 如果键名存在会更新值</span><br><span class="line">localStorage.getItem(key)</span><br><span class="line">localStorage.removeItem(key)</span><br><span class="line">localStorage.clear()</span><br></pre></td></tr></table></figure>
<p>localStorage 案例</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/xiaoqiang001/jsapis_material/blob/master/%E7%AC%AC%E4%B8%83%E5%A4%A9/09-%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E4%B9%8BlocalStorage.html">https://gitee.com/xiaoqiang001/jsapis_material/blob/master/第七天/09-本地存储之localStorage.html</a></p>
<p>setItem 方法会将数据转换为字符串类型</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;num&#x27;</span>,<span class="number">666</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>存放在浏览器缓存中的数据是字符串而不是整型</p>
</blockquote>
<p>对象也是一样</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">p = &#123;<span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>:<span class="string">&#x27;18&#x27;</span>&#125;</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;person&#x27;</span>, p)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>存放结果是 [object Object]，相当于将 p.toString() 存储在浏览器缓存中</p>
</blockquote>
<p>如果想将对象数据存放在 localStorage 中，则需要使用 JSON.stringify() 先将数据转换成字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">localStroage.<span class="title function_">setItem</span>(<span class="string">&#x27;person&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(p))</span><br></pre></td></tr></table></figure>
<p>读取数据时还需要将数据转换回原来的模式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;person&#x27;</span>)</span><br><span class="line">p = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(p)</span><br></pre></td></tr></table></figure>
<p>读取一个不存在的数据返回 null</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(localStroage.<span class="title function_">getItem</span>(<span class="string">&#x27;lol&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h1>---------------------------------</h1>
<h1>JS 高级编程进阶</h1>
<h1>---------------------------------</h1>
<h1>面向对象编程概念</h1>
<h2 id="1-面向过程编程-POP">1. 面向过程编程 POP</h2>
<p>POP (Process-oriented programming) ，面向过程就是分析出解决问题所需要的的步骤，然后用函数把这些步骤一步一步实现，使用的时候在一次一次调用就可以了。</p>
<p>举个例子：把大象装进冰箱，面向过程的做法：</p>
<ol>
<li>打开冰箱门</li>
<li>大象装进去</li>
<li>关上冰箱门</li>
</ol>
<h2 id="2-面向对象编程">2. 面向对象编程</h2>
<p>面向对象是把事务分解成一个个对象，然后由对象之间分工合作。</p>
<p>举个例子：把大象装进冰箱，面向对象做法：</p>
<ol>
<li>
<p>大象对象</p>
<ul>
<li>进入方法</li>
</ul>
</li>
<li>
<p>冰箱对象</p>
<ul>
<li>打开</li>
<li>关闭</li>
</ul>
</li>
<li>
<p>使用大象和冰箱的功能</p>
</li>
</ol>
<p>面向对象想程序开发思想中，每一个对象都是功能中心，具有明确分工，面向对象具有灵活、代码可重复使用，容易维护和开发的优点，更适合多人合作。</p>
<p>面向对象的特性：</p>
<ul>
<li>封装性（包装代码，直接调用）</li>
<li>继承性（子类拥有父类的属性和方法）</li>
<li>多态性（子类可以定义自己的独有的属性和方法，可以与父类相同方法，但不同功能）</li>
</ul>
<h2 id="3-面向过程和面向对象的对比">3. 面向过程和面向对象的对比</h2>
<p>面向过程</p>
<ul>
<li>优点：性能比面向对象高，适合根硬件联系很紧密的东西，例如单片机就采用的面向过程编程</li>
<li>缺点：没有面向对象易维护、易复用、易扩展</li>
</ul>
<p>面向对象</p>
<ul>
<li>优点：易维护、易复用、易扩展，由于面向对象有封装、继承、多态的特性，可以设计出低耦合的系统，使系统更加灵活、更加易于维护</li>
<li>缺点：性能比面向过程低</li>
</ul>
<p>程序简单建议使用面向过程，如果程序项目庞大，建议使用面向对象来写。</p>
<h1>面向对象</h1>
<p>面向对象更贴近我们的实际生活，可以使用面向对象描述现实世界事物，但是事物分为具体事物和抽象事物。</p>
<p>比如说：</p>
<ul>
<li>手机就是一个抽象事物，是泛指的一个概念</li>
<li>华为P30 PRO 128G 就是一个具体事物，特指的</li>
</ul>
<p>面向对象的思维特点：</p>
<ol>
<li>抽取（抽象）对象共用的属性和行为组织（封装）成一个类（模板）</li>
<li>对类进行实例化，获取类的对象</li>
</ol>
<p>面向对象编程我们考虑的是有哪些对象，按照面向对象的思维特点，不断创建对象，使用对象，指挥对象做事情。</p>
<h2 id="1-对象">1. 对象</h2>
<p>现实生活中，万物皆对象，对象是一个具体的事物，看的见摸得着的实物，例如：一本书、一个人、一辆汽车都可以是对象。一个数据库、一个网页、一个与服务器的连接对象也可以是对象</p>
<p>在 Javascript 中，对象是一组无需的相关属性和方法的集合，所有的事物都是对象，例如字符串、数值、数组、函数等等。</p>
<p>对象是由属性和方法组成的：</p>
<ul>
<li>属性：事物的特征，在对象中用属性来表示（常用名词），比如手机的尺寸、重量、内存大小</li>
<li>方法：事物的行为，在对象中用方法来表示（常用动词），比如打电话、发短信</li>
</ul>
<h2 id="2-类-class">2. 类 class</h2>
<p>在 ES6 中新增加了类的概念，可以使用 class 关键字声明一个类，之后以这个类来实例化对象。</p>
<ul>
<li>
<p>类抽象了对象的公共部分，它泛指某一大类（class）模板</p>
</li>
<li>
<p>对象特指某一个，通过类实例化的一个具体对象</p>
</li>
</ul>
<h2 id="3-创建类">3. 创建类</h2>
<p>如果多个对象拥有相同的属性和方法，一个个手动创建是实在是太累了，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> student1 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zx&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>:<span class="number">16</span>,</span><br><span class="line">	<span class="attr">score</span>:<span class="number">80</span>,</span><br><span class="line">    <span class="attr">sayHi</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;say hi&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student2 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ls&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>:<span class="number">17</span>,</span><br><span class="line">	<span class="attr">score</span>:<span class="number">90</span>,</span><br><span class="line">    <span class="attr">sayHi</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;say hi&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么我们可以封装一个函数来帮助我们创建对象，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age, score</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">name</span>: name,</span><br><span class="line">        <span class="attr">age</span>: age,</span><br><span class="line">        <span class="attr">score</span>: score,</span><br><span class="line">        <span class="attr">sayhi</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;say hi&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student1 = <span class="title class_">Student</span>(<span class="string">&quot;zs&quot;</span>, <span class="number">16</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">var</span> student2 = <span class="title class_">Student</span>(<span class="string">&quot;ls&quot;</span>, <span class="number">17</span>, <span class="number">90</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student2);</span><br></pre></td></tr></table></figure>
<p>之前学习对象的时候，我们是通过构造函数创建的对象：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age, score</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">score</span> = score;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sayhi</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;say hi&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> student1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zs&quot;</span>, <span class="number">16</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">var</span> student2 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ls&quot;</span>, <span class="number">17</span>, <span class="number">90</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student2);</span><br></pre></td></tr></table></figure>
<p>在 ES6 中可以使用 class 关键字来创建类。</p>
<p>定义类：类名一般首字母大写</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Name</span> &#123;</span><br><span class="line">    <span class="comment">// 定义类属性</span></span><br><span class="line">    <span class="comment">// 定义类方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建实例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    name = <span class="string">&#x27;zx&#x27;</span>;</span><br><span class="line">	age = <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xx = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意，这样写只是创建普通的对象，不能够传递参数</p>
</blockquote>
<h2 id="4-类-constructor-构造函数">4. 类 constructor 构造函数</h2>
<p>constructor() 方法是类的构造函数（默认方法），用于传递参数，返回实例对象，通过 new 命令生成对象实例时，自动调用该方法，如果没有显示定义，类内部会自动给我们创建一个 constructor()</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Star</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">        <span class="comment">// this.uname 是属性名，后边的 uname 是传递进来的参数</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 写在构造函数外部，不需要加逗号分隔</span></span><br><span class="line">    <span class="title function_">sing</span>(<span class="params">song</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;唱&quot;</span> + song);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&quot;刘德华&quot;</span>, <span class="number">48</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">uname</span>);</span><br><span class="line">ldh.<span class="title function_">sing</span>(<span class="string">&quot;冰雨&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>通过 class 关键字创建类，类名首字母大写</p>
</li>
<li>
<p>类里边有个 constructor 函数，可以接受传递过来的参数，同时返回实例对象</p>
</li>
<li>
<p>constructor 函数只要使用 new 生成实例时，就会自动调用这个函数，如果不写这个函数，类也会自动生成这个函数</p>
</li>
<li>
<p>生成实例 new 不能省略</p>
</li>
<li>
<p>类名后边不需要加小括号，生成实例类名后要加小括号。</p>
</li>
<li>
<p>类里边定义的方法，不需要加 function() ，直接写上方法名，并且需要定义在构造函数外边，并且不需要加逗号分割</p>
</li>
</ul>
<h2 id="5-静态方法">5. 静态方法</h2>
<p>静态方法不需要实例化对象，直接使用类名.方法() 调用，只有使用类名才可以查看或调用，实例无权限查看。静态方法因为没有实例化，所以构造函数没有执行，也就是构造函数中的属性和方法没有定义。如果使用 this.age 会显示 undefined</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;zhangsan&quot;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我是zs&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 添加静态方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">coding</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;写代码&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 添加静态属性</span></span><br><span class="line">    <span class="keyword">static</span> v = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加静态方法</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">bye</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;bye&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加静态成员</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">sex</span> = <span class="string">&quot;male&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只能通过类名查看和调用</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">bye</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property">sex</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例无法查看静态属性和方法，报错</span></span><br><span class="line">x = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">x.<span class="title function_">bye</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sex)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-类的继承">5. 类的继承</h2>
<p>现实中的继承：子承父业、比如说我们都继承了父亲的姓。</p>
<p>程序中的继承：子类可以继承父类的属性和方法</p>
<p>在 JS 中可以使用 extends 关键字继承父类</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    <span class="title function_">money</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>();</span><br><span class="line">son.<span class="title function_">money</span>();</span><br></pre></td></tr></table></figure>
<h3 id="5-1-super-关键字">5.1. super 关键字</h3>
<p>当子类继承父类的方法时，还需要使用父类构造函数中的属性，那么就需要使用 super 关键字。</p>
<p>super 关键字用于访问和调用对象父类上的函数，可以调用父类的构造函数，也可以调用父类的普通函数。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">30</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 调用父类的构造函数</span></span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sex</span> = <span class="string">&quot;secret&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> <span class="title class_">Son</span>();</span><br><span class="line">x.<span class="title function_">say</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="property">sex</span>);</span><br></pre></td></tr></table></figure>
<h4 id="5-1-1-super-调用构造函数（传递参数）">5.1.1. super() 调用构造函数（传递参数）</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span> + <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 这里传递的参数是子类的属性</span></span><br><span class="line"><span class="comment">// sum() 方法调用的是父类的属性，</span></span><br><span class="line"><span class="comment">// 因为子类定义了自己的构造函数，造成方法调用数据的不统一</span></span><br><span class="line"><span class="comment">// 使用 super() 方法让子类也调用父类的 constructor 函数</span></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">son.<span class="title function_">sum</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这样写会报错</p>
</blockquote>
<p>子类不用定义自己的 this.x 和 this.y ，只需要将子类中的构造函数参数中的 x 和 y 值，使用 super() 方法传递给父类中的构造函数即可。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">super</span>(x,y)</span><br></pre></td></tr></table></figure>
<h4 id="5-1-2-super-调用普通函数">5.1.2. super() 调用普通函数</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;我是爸爸&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">super</span>.<span class="title function_">say</span>() + <span class="string">&quot;的儿子&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>();</span><br><span class="line">son.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure>
<ul>
<li>继承中，如果实例化子类中输出一个方法，先看子类有没有这个方法，如果子类没有就去父类去寻找</li>
<li>super.方法() 可以直接调用父类中的方法</li>
</ul>
<h4 id="5-1-3-子类扩展方法">5.1.3. 子类扩展方法</h4>
<p>在子类中直接添加新的方法，就是子类独有的方法，使用 extends 同时还可以继承父类的方法。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span> + <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="comment">// 利用 super 调用父类的构造函数方法</span></span><br><span class="line">    <span class="comment">// super 必须在子类 this 之前调用</span></span><br><span class="line">    <span class="variable language_">super</span>(x, y);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">substract</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">son.<span class="title function_">sum</span>();</span><br><span class="line">son.<span class="title function_">substract</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果子类在构造函数中使用了 super 调用父类的构造函数，那么必须放到 this 之前。先调用父类构造函数，再调用子类构造函数</p>
</blockquote>
<h2 id="6-执行顺序">6. 执行顺序</h2>
<p>JS 中类不像变量和函数声明一样被预编译，所以在实例化类前，必须先定义类。</p>
<p>构造函数中可以直接调用类中的方法，实现当实例化类时自动执行类中的方法，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Star</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="comment">// 实例化时直接调用类里边的方法</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">sing</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sing</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">uname</span> + <span class="string">&quot;唱歌&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&quot;刘德华&quot;</span>, <span class="number">18</span>);</span><br></pre></td></tr></table></figure>
<h2 id="7-this-指向问题">7. this 指向问题</h2>
<p>constructor 里边的 this 指向实例对象，方法里边的 this 指向这个方法的调用者</p>
<p>如果不是对象调用类中的方法，却需要使用 this 这个对象指向的话，需要定义一个变量 that 进行引用。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> that;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Star</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">    that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">btn</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">    <span class="comment">// btn.onclick 调用 sing 方法</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">btn</span>.<span class="property">onclick</span> = <span class="variable language_">this</span>.<span class="property">sing</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">sing</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// btn.onclick 调用的 sing</span></span><br><span class="line">    <span class="comment">// 这里的 this 实际上指向的 btn</span></span><br><span class="line">    <span class="comment">// 需要使用 that 才可以获得对象中的 uname 属性</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(that.<span class="property">uname</span> + <span class="string">&quot;唱歌&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&quot;刘德华&quot;</span>, <span class="number">18</span>);</span><br></pre></td></tr></table></figure>
<h2 id="案例：面向对象-TAB-栏切换">案例：面向对象 TAB 栏切换</h2>
<p><a target="_blank" rel="noopener" href="https://gitee.com/xiaoqiang001/js_advanced_material/tree/master">https://gitee.com/xiaoqiang001/js_advanced_material/tree/master</a></p>
<h3 id="1-ES6-插入元素">1. ES6 插入元素</h3>
<p>之前用过 node.appendChild 和 node.inserBefore 两个方法，在插入之前先要使用 document.createElement(‘tagName’) 创建元素，然后再用 inner.HTML 创建内容，之后再进行插入。</p>
<p>在 ES6 中有个新方法，insertAdjacentHTML 可以直接以字符串形式插入元素，而不用进行创建 node 节点。</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">element.<span class="title function_">insertAdjacentHTML</span>(position, text)</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li>
<p>position 参数</p>
<ul>
<li>beforebegin 在元素前面</li>
<li>afterbegin 插入元素内部的第一个子节点之前</li>
<li>beforeend 插入元素内部的最后一个子节点之后</li>
<li>afterend 元素自身的后边</li>
</ul>
</li>
<li>
<p>text 是要被解析为 HTML 并插入到 DOM 树中的字符串</p>
</li>
</ul>
<p>例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;ul&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> li = <span class="string">&quot;&lt;li&gt;测试4&lt;/li&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    ul.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforeend&quot;</span>, li);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-删除元素">2. 删除元素</h3>
<p>element.remove() 可以直接删除元素，如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> li = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    li[<span class="number">2</span>].<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-点击元素">3. 点击元素</h3>
<p>element.click() 可以直接点击元素，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;button&gt;按钮&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;button&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">btn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">alert</span>(<span class="string">&quot;点我了&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">btn.<span class="title function_">click</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="4-符号的应用">4. &amp;&amp; 符号的应用</h3>
<p>判断元素是否存在，存在就执行对应方法</p>
<p>之前是用 if else 进行判断，其实可以用到逻辑运算符，&amp;&amp;。因为在&amp;&amp;运算时，先判断左侧表达式是否为真，如果为假则短路停止继续判断，返回 false，如果为真则继续判断右侧，返回右侧表达式值，利用这一特性，可以简单的写出判断代码。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当li存在索引时（即li元素标签存在），执行 click() </span></span><br><span class="line">li[index] &amp;&amp; li[index].<span class="title function_">click</span>();</span><br></pre></td></tr></table></figure>
<h3 id="5-禁止双击选中文字">5. 禁止双击选中文字</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">getSelection</span> ? <span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">removeAllRanges</span>() : <span class="variable language_">document</span>.<span class="property">selection</span>.<span class="title function_">empty</span>();</span><br></pre></td></tr></table></figure>
<h3 id="6-选中-input-文本">6. 选中 input 文本</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;测试文本&quot;</span> /&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;input&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">input.<span class="title function_">select</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="7-按回车调用表单失去焦点事件">7. 按回车调用表单失去焦点事件</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;测试文本&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;input&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    input.<span class="property">onkeyup</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">13</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">blur</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-ES5-构造函数创建对象">8. ES5 构造函数创建对象</h2>
<p>在学 js 基础的时候，ES5 没有 class 关键字，需要使用 function 构造函数定义类。如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成实例</span></span><br><span class="line"><span class="keyword">new</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span><br></pre></td></tr></table></figure>
<p>Js 构造函数创建对象过程：</p>
<ol>
<li>执行 new 创建对象时，首先创建一个空对象 var obj = {}</li>
<li>将创建的对象，赋给 this 关键字， this  = obj</li>
<li>将一些属性方法设置在 obj 上</li>
<li>自动将新对象返回 return this</li>
<li>将 return 的对象赋值给 var 变量</li>
</ol>
<h3 id="8-1-实例成员">8.1.  实例成员</h3>
<p>实例成员就是构造函数内部通过 this 添加的成员，如 this.uname, this.age 。</p>
<ul>
<li>实例成员只能通过实例化的对象来访问</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成实例</span></span><br><span class="line"><span class="keyword">new</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问实例成员</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">uname</span>)</span><br></pre></td></tr></table></figure>
<h3 id="8-2-静态成员">8.2. 静态成员</h3>
<p>静态成员在构造函数本身上添加的成员，如： Star.sex = ‘male’</p>
<ul>
<li>静态成员只能通过构造函数来访问</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成实例</span></span><br><span class="line">ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加静态成员</span></span><br><span class="line"><span class="title class_">Star</span>.<span class="property">sex</span> = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问静态成员</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Star</span>.<span class="property">sex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例无法访问静态成员，显示 undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">sex</span>)</span><br></pre></td></tr></table></figure>
<h3 id="8-2-构造函数原型-prototype">8.2. 构造函数原型 prototype</h3>
<p>构造函数虽然很好用，但是存在浪费内存的问题，每次实例化一次对象，属性是变量，是简单数据类型。方法是函数，是复杂数据类型。所以系统会单独开辟一片空间用来存储函数。每生成一个实例，就会开一段空间给这同一个函数。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/7.jpg" alt="image-20210423163303552"></p>
<p>虽然可以将变量单独定义出来，用传参的方式传递进去，这样就保证了不在生成对象的同时创建函数，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age, score, fn</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">score</span> = score;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sayhi</span> = fn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;say hi&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> student1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zs&quot;</span>, <span class="number">16</span>, <span class="number">80</span>, fn);</span><br><span class="line"><span class="keyword">var</span> student2 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ls&quot;</span>, <span class="number">17</span>, <span class="number">90</span>, fn);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student2);</span><br></pre></td></tr></table></figure>
<p>但是，如果每个对象都有不同的方法，如果项目很大，有多个对象，就会造成函数与对象配对困难，造成维护难度直线上升的问题。针对这个问题，我们可以通过针对每个不同构造函数，创建一个方法对象，使用这个构造函数就去对应的方法对象中取函数就可以了。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> animalMethod = &#123;</span><br><span class="line">    <span class="attr">say</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;喵喵喵&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">eat</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃猫粮&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> peopleMethod = &#123;</span><br><span class="line">    <span class="attr">say</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">eat</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃饭&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">n, a</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = n;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = a;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">say</span> = peopleMethod.<span class="property">say</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eat</span> = peopleMethod.<span class="property">eat</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Cat</span>(<span class="params">n, a</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = n;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = a;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">say</span> = animalMethod.<span class="property">say</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eat</span> = animalMethod.<span class="property">eat</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;zx&quot;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">var</span> cat1 = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&quot;dd&quot;</span>, <span class="number">2</span>);</span><br><span class="line">person1.<span class="title function_">eat</span>();</span><br><span class="line">cat1.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure>
<p>然而 Js 已经提供了这个公共对象方法，那就是可以通过 prototype 原型来解决这个问题。Js 的每个对象都继承另一个父级对象，父级对象称为原型 （prototype），我们通过构造函数创建的实例，就继承了父级对象中的 prototype 属性。因为原型也是一个对象，原型对象上的所有属性和方法，都能被子对象（派生对象）共享。</p>
<ul>
<li>
<p>每一个构造函数 Person 都自动分配了一个公共对象</p>
</li>
<li>
<p>构造函数通过 prototype 原型分配的函数是所有对象所共享的。也就是说所有通过 Person 构造函数创建的实例，都可以直接访问 Person 中 prototype 中的方法，相当于我们之前例子中为每个构造函数创建的公共方法对象。</p>
</li>
</ul>
<p>JS 规定，每一个构造函数都有一个 prototype 属性，指向另一个对象，注意这个 prototype 就是一个对象，这个对象的所有属性和方法，都会被构造函数所拥有。</p>
<p>我们可以把那些不变的方法，直接定义在 prototype 对象上，这样所有的对象的实例就可以共享这些方法了。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我会唱歌&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&quot;刘德华&quot;</span>, <span class="number">18</span>);</span><br><span class="line">ldh.<span class="title function_">sing</span>();</span><br></pre></td></tr></table></figure>
<h4 id="8-2-1-构造函数原型属性-proto">8.2.1. 构造函数原型属性  <code>__proto__</code></h4>
<p>任何对象都会有一个属性 <code>__proto__</code> 指向构造函数 prototype 原型对象，之所以我们对象可以是用构造函数 prototype 原型对象的属性和方法，就是因为对象有 <code>__proto__</code> 原型的存在。</p>
<p><code>__proto__</code> 对象原型和原型对象 prototype 是等价的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ldh.__proto__ === Star.prototype</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以把 <code>ldh.__proto__</code> 看做是继承自 Star.prototype，访问 <code>__proto__</code> 就是访问父类的 Star.prototype</p>
</blockquote>
<p>方法查找规则：</p>
<ul>
<li>首先看 ldh 对象身上是否 有 sing 方法，如果有则执行 sing 方法</li>
<li>如果没有，就去构造函数原型对象 prototype 身上去查看是否有 sing 方法</li>
</ul>
<p><code>__proto__</code> 对象原型的意义就在于为对象的查找机制提供一个方向，但是它是一个非标准属性，因此在实际开发中，不可以使用这个属性，它只是用于内部指向原型 prototype</p>
<h4 id="8-2-2-constructor-构造函数">8.2.2. constructor 构造函数</h4>
<p>对象原型 (<code>__proto__</code>) 和构造函数（prototype）原型对象里边都有一个属性 constructor 属性，constructor 我们称为构造函数，因此它指向构造函数本身。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">&#125;</span><br><span class="line">p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;zx&#x27;</span>,<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// constructor 就是构造函数本身</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">constructor</span> == <span class="title class_">Person</span>);  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">constructor</span> == <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 因为对象中的原型属性__proto__ 和构造函数中的属性 prototype 指向一样</span></span><br><span class="line"><span class="comment">// 这个属性的值是一个对象，对象中又有属性和方法</span></span><br><span class="line"><span class="comment">// 其中一个叫做 constructor </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">__prototype__</span>.<span class="property">constructor</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>)</span><br></pre></td></tr></table></figure>
<p>之前给构造函数（类）添加方法用的是，这样不会破坏 prototype 对象的结构，只是给它添加了一个方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;唱歌&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果需要直接给 prototype 以对象的方式重新定义的方式添加方法，就会失去 constructor 这个属性。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="attr">sing</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;唱歌&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">dance</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;跳舞&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然这么做也有好处，就是可以让代码可读性更高，将所有代码写在一个代码块中，不过我们就需要将这个 constructor 属性重新加回来，让这个属性指向构造函数本身（Star）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="attr">constructor</span>: <span class="title class_">Star</span>,</span><br><span class="line">    <span class="attr">sing</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;唱歌&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">dance</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;跳舞&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-3-构造函数、实例、原型对象三者之间的关系">8.3. 构造函数、实例、原型对象三者之间的关系</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/8.jpg" alt="image-20210423195627650"></p>
<h3 id="8-4-原型链">8.4. 原型链</h3>
<p>因为 Star 是我们从 Object 顶级对象中构造出来的类，也就是说 Star 算是 Object 的子类，因此也继承了 Object 的属性和方法，因此 Star 也拥有 <code>__proto__</code> 属性。因此构成了一个原型链</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/9.jpg" alt="image-20210423200251515"></p>
<h3 id="8-5-Javascript-成员的查找机制">8.5. Javascript 成员的查找机制</h3>
<ul>
<li>当访问一个对象的属性（包括方法）时，首先查找这个对象自身有没有该属性</li>
<li>如果没有就查找它的原型（也就是 <code>__proto__ </code> 指向的 prototype 原型对象）</li>
<li>如果还没有就查找原型对象的原型（Object的原型对象）</li>
<li>以此类推一直找到 Object 为止（null）</li>
</ul>
<h3 id="8-6-原型对象中-this-指向">8.6 原型对象中 this 指向</h3>
<p>原型对象中的 this 指向的也是实例对象本身，因为按照谁调用指向谁的原则，在原型对象中的方法，最终调用者还是实例，所以，this 最终也指向实例。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">    <span class="comment">// this 指向实例对象</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> that;</span><br><span class="line"><span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我会唱歌&quot;</span>);</span><br><span class="line">    that = <span class="variable language_">this</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&quot;刘德华&quot;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="comment">// ldh 调用了 this 方法</span></span><br><span class="line"><span class="comment">// 所以 sing 方法中的 this 就是 ldh</span></span><br><span class="line">ldh.<span class="title function_">sing</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(that === ldh);</span><br></pre></td></tr></table></figure>
<h3 id="8-7-扩展内置对象（更改系统对象）">8.7 扩展内置对象（更改系统对象）</h3>
<p>可以通过原型对象，对原来的内置对象进行扩展自定义方法，比如给数组增加自定义求偶数和的功能。</p>
<p>比如数组是系统自带的对象，它的内部也有 prototype，通过给 prototype 添加方法，我们就可以给原生对象添加功能了。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可以看到原生数组对象中包含很多方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>数组中也有 <code>__proto__</code> 属性，它的原生对象就是 Object.prototype，所以数组也可以使用 Object 中的一些方法</p>
</blockquote>
<p>内置对象结构，如 String</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">String</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 属性</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">String</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toUpperCase</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>给 Array 内置对象添加求和功能</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sum</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="variable language_">this</span>.<span class="property">length</span>; i++)&#123;</span><br><span class="line">        sum += <span class="variable language_">this</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;     </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">sum</span>());</span><br></pre></td></tr></table></figure>
<p>注意扩展方法时，不要和原对象中的方法名重复，否则就会覆盖原来的方法。</p>
<h3 id="8-8-构造函数中的继承">8.8. 构造函数中的继承</h3>
<p>继承就是多个子类对象可以共用父类对象的成员属性和成员方法（代码重用），ES6 之前并没有给我们提供 extends 继承，我们可以通过构造函数 + 原型对象模拟实现继承。</p>
<h4 id="8-8-1-call">8.8.1. call()</h4>
<p>调用这个函数，并且修改函数运行时 this 的指向</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fun.<span class="title function_">call</span>(thisArg, arg1, arg2, ...)</span><br></pre></td></tr></table></figure>
<ul>
<li>thisArg：当前调用函数 this 的指向对象</li>
<li>arg1, arg2：其他参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;随便说点什么&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日常调用函数方法</span></span><br><span class="line"><span class="title function_">fn</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 万物皆对象，函数也是对象</span></span><br><span class="line"><span class="comment">// 利用函数对象中的 call 方法也可以调用函数</span></span><br><span class="line">fn.<span class="title function_">call</span>();</span><br></pre></td></tr></table></figure>
<p>使用 call 方法修改函数中 this 的指向</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">/image/js<span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;随便说点什么&quot;</span>);</span><br><span class="line">    <span class="comment">// 由于使用 call 调用的函数，并且修改了 this 指向</span></span><br><span class="line">    <span class="comment">// 所以现在函数中的 this 指向 o 对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Andy&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">fn.<span class="title function_">call</span>(o);</span><br></pre></td></tr></table></figure>
<h4 id="8-8-2-借用父构造函数继承属性">8.8.2. 借用父构造函数继承属性</h4>
<p>在没有 extends 关键字的时候，利用 call 实现继承</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Father</span>(<span class="params">uname, age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">uname, age</span>)&#123;</span><br><span class="line">    <span class="comment">// 在子函数中调用父函数</span></span><br><span class="line">    <span class="comment">// 这里的 this 指向 Son 的实例</span></span><br><span class="line">    <span class="comment">// 通过 call 调用让父函数的 this 改变了指向</span></span><br><span class="line">    <span class="comment">// 将子函数中的 uname, age 传入父函数中</span></span><br><span class="line">    <span class="comment">// 最终实现继承</span></span><br><span class="line">    <span class="title class_">Father</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>,uname,age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>缺点：只能继承父类构造函数中设置的属性和方法，无法使用 Father.prototype 中的方法。</p>
</blockquote>
<h4 id="8-8-3-借用原型对象继承父类方法（constructor丢失？）">8.8.3. 借用原型对象继承父类方法（constructor丢失？）</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 借用父构造函数继承属性</span></span><br><span class="line"><span class="comment">// 1. 父构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Father</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">    <span class="comment">// this 指向父构造函数的对象实例</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Father</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">money</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100000</span>);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 2 .子构造函数 </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">uname, age, score</span>) &#123;</span><br><span class="line">    <span class="comment">// this 指向子构造函数的对象实例</span></span><br><span class="line">    <span class="title class_">Father</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, uname, age);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">score</span> = score;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Son.prototype = Father.prototype;  这样直接赋值会有问题,如果修改了子原型对象,父原型对象也会跟着一起变化</span></span><br><span class="line"><span class="comment">// 让父类的实例成为子类的原型</span></span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Father</span>();；</span><br><span class="line"><span class="comment">// 赋值的形式更改 prototype，丢失 constructor</span></span><br><span class="line"><span class="comment">// 造成 Son 的实例对象 __proto__ 属性直接指向了 Object，应该指向的是 Son</span></span><br><span class="line"><span class="comment">// 如果利用对象的形式修改了原型对象,别忘了利用constructor 指回原来的构造函数</span></span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Son</span>;</span><br><span class="line"><span class="comment">// 这个是子构造函数专门的方法</span></span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">exam</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;孩子要考试&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>, <span class="number">100</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Father</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>);</span><br></pre></td></tr></table></figure>
<p>让父类创建一个实例，让子类继承这个实例，这样写更容易理解</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Father</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Father</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">money</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100000</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">uname, age, score</span>) &#123;</span><br><span class="line">    <span class="title class_">Father</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, uname, age);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">score</span> = score;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Father</span>();</span><br><span class="line"><span class="comment">// 让父类的实例成为子类的原型</span></span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span> = obj;</span><br><span class="line"><span class="comment">// 找回丢失的 contructor</span></span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Son</span>;</span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">exam</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;孩子要考试&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&quot;刘德华&quot;</span>, <span class="number">18</span>, <span class="number">100</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son);</span><br><span class="line"><span class="comment">// 调用父类的方法</span></span><br><span class="line">son.<span class="title function_">money</span>();</span><br></pre></td></tr></table></figure>
<h4 id="8-8-4-使用-Object-create-方法继承">8.8.4. 使用 Object.create() 方法继承</h4>
<p>使用 Object.create() 创建一个新对象，并且指定其原对象，适用于通过一个对象进行继承，而不是直接定义的构造函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>&#125;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br></pre></td></tr></table></figure>
<p>相当于</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>&#125;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>()</span><br><span class="line">obj.<span class="property">__proto__</span> = person</span><br></pre></td></tr></table></figure>
<h2 id="9-贪食蛇面向对象案例">9. 贪食蛇面向对象案例</h2>
<h1>ES5 新增方法</h1>
<h2 id="1-数组方法">1. 数组方法</h2>
<p>迭代遍历方法：</p>
<ul>
<li>forEach()</li>
<li>map()</li>
<li>filter()</li>
<li>some()</li>
<li>every()</li>
</ul>
<h3 id="1-1-forEach">1.1. forEach()</h3>
<p>forEach() 方法对数组的每个元素执行一次给定的函数。</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>currentValue：数组当前项值</li>
<li>index：数组当前项索引</li>
<li>arr：数组对象本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">v, k, arr</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;每个数组元素&quot;</span> + v);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;元素索引号&quot;</span> + k);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;数组本身&quot;</span> + arr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>注意：在 forEach 中如果有 return 不会终止迭代</p>
<h3 id="1-2-filter">1.2. filter()</h3>
<p>filter() 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。 主要用于筛选数组。</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>))</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li>currentValue: 数组当前项的值</li>
<li>index：数组当前项的索引</li>
<li>arr：数组对象本身</li>
</ul>
<p>返回值：</p>
<p>一个新的、由通过测试的元素组成的数组，如果没有任何数组元素通过测试，则返回空数组。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">88</span>, <span class="number">39</span>, <span class="number">22</span>, <span class="number">45</span>];</span><br><span class="line"><span class="comment">// 用不到的参数可以不用写，可选的</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value &gt;= <span class="number">20</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newArr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">[<span class="number">88</span>, <span class="number">39</span>, <span class="number">22</span>, <span class="number">45</span>]</span><br></pre></td></tr></table></figure>
<p>注意：filter 在迭代中遇到 return 也不会终止迭代</p>
<h3 id="1-3-map">1.3. map()</h3>
<p>map 用法和 filter 十分类似，遍历每个元素，只不过返回的是每个元素经过回调函数后返回的布尔值，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">88</span>, <span class="number">39</span>, <span class="number">22</span>, <span class="number">45</span>];</span><br><span class="line"><span class="keyword">var</span> newArr = arr.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value &gt;= <span class="number">20</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newArr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">[<span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>]</span><br></pre></td></tr></table></figure>
<h3 id="1-4-some">1.4. some()</h3>
<p>some() 方法用于检测数组中的元素是否满足指定条件。如果找到第一个满足条件的元素，则终止循环不再继续查找</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">some</span>(<span class="keyword">function</span>(<span class="params">currentValue, index, arr</span>))</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li>currentValue: 数组当前项的值</li>
<li>index：数组当前项的索引</li>
<li>arr：数组对象本身</li>
</ul>
<p>返回值：</p>
<p>需要自定义 return ，布尔值（如果查找到这个元素，返回true，如果查不到就返回false）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">88</span>, <span class="number">39</span>, <span class="number">22</span>, <span class="number">45</span>];</span><br><span class="line"><span class="comment">// 用不到的参数可以不用写，可选的</span></span><br><span class="line"><span class="keyword">var</span> flag = arr.<span class="title function_">some</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="comment">// 一般用 if 判断，然后 return 一个 true 的布尔值</span></span><br><span class="line">    <span class="comment">// if (value &gt;= 20) &#123;</span></span><br><span class="line">    <span class="comment">//   return true;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// 如果单纯的数值，直接 return 即可，比较运算符会自动给出布尔值</span></span><br><span class="line">    <span class="keyword">return</span> value &gt;= <span class="number">20</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flag);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="1-5-every">1.5. every()</h3>
<p>every() 方法测试一个数组内的所有元素是否都能通过某个指定函数的测试。它返回一个布尔值。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">88</span>, <span class="number">39</span>, <span class="number">22</span>, <span class="number">45</span>];</span><br><span class="line"><span class="keyword">var</span> flag = arr.<span class="title function_">some</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value &gt;= <span class="number">20</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flag);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>every 只要有一项不满足条件都返回false</p>
</li>
<li>
<p>some有一项满足都会返回true</p>
</li>
</ul>
<h3 id="1-6-reduce">1.6 reduce()</h3>
<p>reduce() 方法用给数组做累加计算</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">reduce</span>(<span class="function">(<span class="params">累加的结果,当前循环项</span>)=&gt;</span>&#123;    </span><br><span class="line">&#125;, 初始值)</span><br></pre></td></tr></table></figure>
<p>return 的 sum 值，会继续充当第二次遍历的 sum 值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">const</span> res = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, val</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sum += val</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br></pre></td></tr></table></figure>
<p>例：选中商品统计总价</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr =[</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">1</span>, <span class="attr">name</span>:<span class="string">&#x27;西瓜&#x27;</span>, <span class="attr">state</span>:<span class="literal">true</span>, <span class="attr">price</span>:<span class="number">10</span>, <span class="attr">qty</span>:<span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">1</span>, <span class="attr">name</span>:<span class="string">&#x27;榴莲&#x27;</span>, <span class="attr">state</span>:<span class="literal">false</span>, <span class="attr">price</span>:<span class="number">80</span>, <span class="attr">qty</span>:<span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">1</span>, <span class="attr">name</span>:<span class="string">&#x27;草莓&#x27;</span>, <span class="attr">state</span>:<span class="literal">true</span>, <span class="attr">price</span>:<span class="number">20</span>, <span class="attr">qty</span>:<span class="number">3</span>&#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment">// 通过 filter 过滤出 state 为 true 的商品，然后用</span></span><br><span class="line"><span class="keyword">const</span> res = arr.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>item.<span class="property">state</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, item</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sum += item.<span class="property">price</span> * item.<span class="property">qty</span></span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br></pre></td></tr></table></figure>
<h3 id="查询商品案例：">查询商品案例：</h3>
<p><a target="_blank" rel="noopener" href="https://gitee.com/xiaoqiang001/js_advanced_material/tree/master">https://gitee.com/xiaoqiang001/js_advanced_material/tree/master</a></p>
<h2 id="2-字符串方法">2. 字符串方法</h2>
<ul>
<li>trim()</li>
</ul>
<h3 id="2-1-trim">2.1. trim()</h3>
<p>trim() 方法会从一个字符串的两端删除空白字符。trim() 方法并不影响字符串本身，它返回的是一个新的字符串。</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str.<span class="title function_">trim</span>()</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;   abcce&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">trim</span>(<span class="string">&quot;e&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>表单提交时空格验证</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// trim 方法去除字符串两侧空格</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> str = <span class="string">&#x27;   an  dy   &#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> str1 = str.<span class="title function_">trim</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str1);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> str = input.<span class="property">value</span>.<span class="title function_">trim</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (str === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&#x27;请输入内容&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript">            div.<span class="property">innerHTML</span> = str;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-对象方法">3. 对象方法</h2>
<h3 id="1-Object-keys">1. Object.keys()</h3>
<p>Object.key() 方法用于获取对象自身所有的属性名（键名）。效果类似于 for…in ，返回一个由属性名组成的数组。</p>
<p>for…in 遍历对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">pname</span>: <span class="string">&#x27;小米&#x27;</span>,</span><br><span class="line">    <span class="attr">price</span>: <span class="number">1999</span>,</span><br><span class="line">    <span class="attr">num</span>: <span class="number">2000</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Object.keys(obj)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">pname</span>: <span class="string">&#x27;小米&#x27;</span>,</span><br><span class="line">    <span class="attr">price</span>: <span class="number">1999</span>,</span><br><span class="line">    <span class="attr">num</span>: <span class="number">2000</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> arr = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br></pre></td></tr></table></figure>
<h3 id="2-Object-hasOwnProperty">2. Object.hasOwnProperty()</h3>
<p>判断对象是否拥有自己的属性和方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">40</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eat</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;吃饭&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">say</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁了`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;age&quot;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;eat&quot;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;say&quot;</span>));  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>应用场景：</p>
<p>在对代码的效率要求特别高的时候，原型链的查找方式是非常浪费时间，用 hasOwnProperty 进行判断，禁止在原型链上查找成员。</p>
<h3 id="3-Object-isPrototypeOf">3. Object.isPrototypeOf()</h3>
<p>判断一个对象是否是另外一个对象的原型对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Object 是 Array 的原型对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(<span class="title class_">Array</span>));  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="4-Object-getPrototypeOf">4. Object.getPrototypeOf()</h3>
<p>获取一个实例对象的原型对象，之前可以用属性的方法直接调用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>)  <span class="comment">// 通过构造函数中查找</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">__proto__</span>)  <span class="comment">// ES6 通过对象查找</span></span><br></pre></td></tr></table></figure>
<p>还可以使用 Object 自带的方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(obj))</span><br></pre></td></tr></table></figure>
<h3 id="3-Object-defineProperty">3. Object.defineProperty()</h3>
<p>Object.defineProperty() 定义对象中心属性或修改原有的属性。</p>
<p>之前可以用字面量的方式修改对象的属性和方法，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">pname</span>: <span class="string">&#x27;小米&#x27;</span>,</span><br><span class="line">    <span class="attr">price</span>: <span class="number">1999</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加属性</span></span><br><span class="line">obj.<span class="property">qt</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改属性</span></span><br><span class="line">obj.<span class="property">price</span> = <span class="number">2299</span>;</span><br></pre></td></tr></table></figure>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, prop, descriptor)</span><br></pre></td></tr></table></figure>
<ul>
<li>obj：目标对象</li>
<li>prop： 需定义或修改的属性名字</li>
<li>descriptor：目标属性所拥有的的特性，以对象形式 {} 书写
<ul>
<li>value：设置属性的值，默认为 undefined</li>
<li>writable：值是否可以重写。 true | false， 默认为 false</li>
<li>enumerable：目标属性是否可以被枚举。 true|false，默认为 false</li>
<li>configurable：目标属性是否可以被删除或者是否可以再次修改特性 true | false，默认为 false</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">pname</span>: <span class="string">&quot;小米&quot;</span>,</span><br><span class="line">    <span class="attr">price</span>: <span class="number">1999</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;num&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">1000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;address&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&#x27;北京&#x27;</span>,</span><br><span class="line">    <span class="comment">// 不可以被修改</span></span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// forEach 或 Object.keys() 遍历的时候不可见，使用该方法添加的属性默认不可见，原有属性可枚举选项为 true</span></span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 不可以被修改或删除该属性</span></span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>函数进阶</h1>
<h2 id="1-函数的定义方式">1. 函数的定义方式</h2>
<h3 id="1-1-自定义函数（命名函数）">1.1. 自定义函数（命名函数）</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function fn() &#123;&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="1-2-匿名函数">1.2. 匿名函数</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fun = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="1-3-new-Function-定义函数">1.3. new Function() 定义函数</h3>
<p>这种方式执行效率低，也不方便书写，因此比较少使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;参数1&#x27;</span>, <span class="string">&#x27;参数2&#x27;</span> ... <span class="string">&#x27;函数体&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;console.log(a+b)&#x27;</span>)</span><br><span class="line"><span class="title function_">f</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>所有参数都必须是字符串</p>
</blockquote>
<p>这意味着所有的函数都是 Function 的实例（对象）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/10.jpg" alt="image-20210423232414303"></p>
<h2 id="2-函数的调用">2. 函数的调用</h2>
<ul>
<li>普通函数</li>
<li>对象的方法</li>
<li>构造函数</li>
<li>绑定事件函数</li>
<li>定时器函数</li>
<li>立即执行函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 普通函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;人生的巅峰&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>();</span><br><span class="line">fn.<span class="title function_">call</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 对象的方法</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="attr">sayHi</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;人生的巅峰&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">o.<span class="title function_">sayHi</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">x, y, fn</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fn</span> = fn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> add = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span> + <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">add.<span class="title function_">fn</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 绑定事件函数</span></span><br><span class="line"><span class="comment">// 点击了按钮就可以调用这个函数</span></span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;   </span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 定时器函数</span></span><br><span class="line"><span class="comment">// 这个函数是定时器自动1秒钟调用一次</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;, <span class="number">1000</span>);  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. 立即执行函数</span></span><br><span class="line"><span class="comment">// 立即执行函数是自动调用</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;人生的巅峰&#x27;</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-this-指向">3. this 指向</h2>
<table>
<thead>
<tr>
<th>调用方式</th>
<th>this指向</th>
</tr>
</thead>
<tbody>
<tr>
<td>普通函数调用</td>
<td>window</td>
</tr>
<tr>
<td>构造函数调用</td>
<td>实例对象，原型对象里面的方法也指向实例对象</td>
</tr>
<tr>
<td>对象方法调用</td>
<td>该方法所属对象</td>
</tr>
<tr>
<td>事件绑定方法</td>
<td>绑定事件对象</td>
</tr>
<tr>
<td>定时器函数</td>
<td>window</td>
</tr>
<tr>
<td>立即执行函数</td>
<td>window</td>
</tr>
</tbody>
</table>
<h3 id="3-1-改变函数内部指向">3.1. 改变函数内部指向</h3>
<p>JS 为我们专门提供了一些函数方法帮我们处理函数内部 this 的指向问题，常用的有：</p>
<ul>
<li>call()</li>
<li>bind()</li>
<li>apply()</li>
</ul>
<h4 id="3-1-1-call">3.1.1. call()</h4>
<p>之前说过的 call() 方法可以调用函数，通过参数的方法可以改变 this 的指向</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fun.call(thisArg, arg1, arg2, ...)</span><br></pre></td></tr></table></figure>
<p>call() 的返回值就是函数的返回值。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> score = [<span class="number">33</span>, <span class="number">44</span>, <span class="number">60</span>, <span class="number">90</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = fun.<span class="title function_">call</span>(<span class="variable language_">window</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s);</span><br></pre></td></tr></table></figure>
<h4 id="3-1-2-apply">3.1.2. apply()</h4>
<p>apply() 方法调用一个函数，也可以改变 this 的指向</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fun.<span class="title function_">apply</span>(thisArg, [argsArray])</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li>thisArg： 在 fun 函数运行时指定 this 值</li>
<li>argsArray：传递的值，必须包含在数组里边</li>
<li>返回值就是函数的返回值，因为它就是调用函数</li>
</ul>
<p>改变 this 指向：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Andy&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    cosnole.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn.<span class="title function_">apply</span>(o);</span><br></pre></td></tr></table></figure>
<p>参数必须是数组：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Andy&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="comment">// 会以字符串形式显示</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> arr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn.<span class="title function_">apply</span>(o,[<span class="string">&#x27;pink&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<p>apply 的主要应用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> score = [<span class="number">33</span>, <span class="number">44</span>, <span class="number">60</span>, <span class="number">90</span>];</span><br><span class="line"><span class="comment">// 可以让this 指向 null，但不建议</span></span><br><span class="line"><span class="comment">// var max = Math.max.apply(null, score);</span></span><br><span class="line"><span class="comment">// 还是谁调用指向谁</span></span><br><span class="line"><span class="keyword">var</span> max = <span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="title class_">Math</span>, score);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Math.max(1,2,3,4) 普通调用不能是数组，必须是数字内容，因为 apply 会将传入的数组以字符串形式转换，所以使用 apply 调用这样写更加方便。</p>
</blockquote>
<h4 id="3-1-3-bind">3.1.3. bind()</h4>
<p>bind() 方法不会调用函数，但是能改变函数内部 this 指向</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fun.<span class="title function_">bind</span>(thisArg, arg1, arg2, ...)</span><br></pre></td></tr></table></figure>
<ul>
<li>thisArg： 在 fun 函数运行时指定 this 值</li>
<li>argsArray：传递的值，必须包含在数字里边</li>
<li>返回值由指定的 this 值和初始化参数改造的原函数拷贝</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Andy&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    cosnole.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只改变指向，不执行，但是可以返回一个函数</span></span><br><span class="line"><span class="keyword">var</span> f = fn.<span class="title function_">bind</span>(o);</span><br><span class="line"><span class="title function_">f</span>();</span><br></pre></td></tr></table></figure>
<p>例：点击按钮，禁止60秒后开启（发送验证码效果）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">disabled</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 定时器函数里边的 this 指向 window</span></span><br><span class="line">    <span class="comment">// 解决方法1：可以直接写对象名，如 btn</span></span><br><span class="line">    <span class="comment">// 解决方法2：可以使用 that 做个 this 的复制，然后使用 that.disable</span></span><br><span class="line">    <span class="comment">// 解决方法3：bind 方法，绑定在计时器的匿名函数上， </span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">disabled</span> = <span class="literal">false</span>;</span><br><span class="line">  &#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>) , <span class="number">60000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-1-4-call-apply-bind-总结">3.1.4. call, apply, bind 总结</h4>
<p>相同点：</p>
<p>都可以改变函数内部的 this 指向</p>
<p>不同点：</p>
<ul>
<li>call 和 apply 会调用函数，并且改变函数内部 this 的指向</li>
<li>call 和 apply 传递的参数不一样，call 传递参数和普通函数传递参数一样，apply 必须以数组形式</li>
<li>bind 不会调用函数，只改变函数内部 this 指向</li>
</ul>
<p>主要应用场景</p>
<ul>
<li>call 常用作继承</li>
<li>apply 常用作和数组有关系的函数</li>
<li>bind 用作异步函数比较多，比如定时器</li>
</ul>
<h2 id="4-严格模式">4. 严格模式</h2>
<p>JS 除了提供正常模式外，还提供严格模式 (strict mode)，ES5 的严格模式是采用具有限制性 JS 变体的一种方式，即在严格条件下运行 JS 代码。</p>
<p>严格模式在 IE10 以上的版本浏览器才会被支持，旧版本浏览器中会被忽略</p>
<p>严格模式对正常的 JS 语义做了一些更改：</p>
<ul>
<li>消除了 JS 语法的一些不合理、不严谨之处，减少了一些怪异行为</li>
<li>消除代码运行的一些不安全之处</li>
<li>提高编译器效率，增加运行速度</li>
<li>禁用了在 ECMAScript 的未来版本中可能会定义的一些语法，为未来新版本的 JS 做好铺垫，比如一些保留字： class, enum, export, extends, import, super 不能做变量名。</li>
</ul>
<h3 id="4-1-开启严格模式">4.1. 开启严格模式</h3>
<p>严格模式可以应用到整个脚本或者个别函数中，因此在使用时，可以将严格模式分为为脚本开启严格模式和为函数开启严格模式两种情况。</p>
<p>为脚本开启严格模式：</p>
<p>在所有语句之前放一个特定语句</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="meta"></span></span></span><br><span class="line"><span class="meta"><span class="language-javascript">	&#x27;use strict&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 代码段</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>为函数开启严格模式：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 只为 fn1 开启严格模式</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&#x27;use strict&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 代码段</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-严格模式中的变化">4.2. 严格模式中的变化</h3>
<ol>
<li>变量规定</li>
</ol>
<p>在正常模式中，如果一个变量没有声明就赋值，默认是全局变量，严格模式禁止使用这种用法，变量都必须先用 var 命令声明，然后再使用。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 普通模式可以使用</span></span><br><span class="line">num = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 严格模式必须使用</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>
<p>不能删除已经声明的变量，列入 delete x ，语法是错误的</p>
</li>
<li>
<p>严格模式中，this 指向发生变化</p>
<ul>
<li>全局作用域中定义的函数里， this 的指向不再是 window 对象，而是 undefined</li>
<li>构造函数必须使用 new 创建实例 new Star()，不能使用全局模式创建，如 Star()</li>
<li>定时器指向还是 window</li>
<li>事件、对象还是指向调用者</li>
</ul>
</li>
<li>
<p>函数中不能有重名的参数</p>
</li>
<li>
<p>函数必须声明在顶层，新版本 ES6 的 js 会引入 “块作用域” ，为了与新版本接轨，不允许在非函数的代码块内（if, for, while ）声明函数。</p>
</li>
</ol>
<h2 id="5-高阶函数">5. 高阶函数</h2>
<p>高阶函数时对其他函数进行操作的函数，它接受函数作为参数或将函数作为返回值输出。</p>
<p>接受函数为参数（回调函数）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">callback</span>)&#123;</span><br><span class="line">    callback &amp;&amp; <span class="title function_">callback</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 被当做参数传入的函数叫做回调函数</span></span><br><span class="line"><span class="title function_">fun</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>将函数作为返回值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 代码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fn</span>();</span><br></pre></td></tr></table></figure>
<h2 id="6-闭包">6. 闭包</h2>
<h3 id="6-1-变量作用域">6.1. 变量作用域</h3>
<p>变量根据作用域的不同分为两种：全局作用域和局部变量。</p>
<ul>
<li>函数内部可以使用全局变量</li>
<li>函数外部不可以使用局部变量</li>
<li>函数执行完毕，本作用域的局部变量会销毁</li>
</ul>
<h3 id="6-2-闭包的定义">6.2. 闭包的定义</h3>
<p>闭包(closure) 指有权访问另一个函数作用域中变量的函数。也就是说让一个作用域（一般来说是函数外部作用域）可以访问函数内部的局部变量。</p>
<p>内部作用域访问函数外部作用域变量（常见）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 变量所在的函数，被访问的函数叫做闭包（这里fn()）是闭包函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 内部函数访问外部函数变量</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fun</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>();</span><br></pre></td></tr></table></figure>
<p>外部作用域访问函数内部的局部变量（闭包应用）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 内部函数访问外部函数变量</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 将函数内部的函数返回给外部函数</span></span><br><span class="line">    <span class="comment">// fn 的返回值是 fun 函数</span></span><br><span class="line">    <span class="keyword">return</span> fun;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用 fn </span></span><br><span class="line"><span class="comment">// fn 返回值是 fun 函数</span></span><br><span class="line"><span class="comment">// f 就相当于 fn() 的内部函数 fun</span></span><br><span class="line">f = <span class="title function_">fn</span>();</span><br><span class="line"><span class="comment">// fun 函数内部可以访问 num</span></span><br><span class="line"><span class="comment">// 现在调用 f 也就相当于调用了 fun() ，就可以访问到 num</span></span><br><span class="line"><span class="title function_">f</span>();</span><br></pre></td></tr></table></figure>
<p>可以直接使用匿名函数作为返回值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">f = <span class="title function_">fn</span>();</span><br><span class="line"><span class="title function_">f</span>();</span><br></pre></td></tr></table></figure>
<p>甚至可以把外部的函数也做成匿名函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将外部函数做成立即执行的匿名函数</span></span><br><span class="line">f = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="title function_">f</span>();</span><br></pre></td></tr></table></figure>
<p>闭包应用：回调函数中参数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个带参数的闭包函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">callback</span>)&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">    <span class="comment">// callback(data) 相当于执行外部调用传过来的 funcion(data)&#123;&#125; 函数</span></span><br><span class="line">    <span class="comment">// 这里的 data 是实参</span></span><br><span class="line">    <span class="comment">// 这里执行参数里传过来的函数，可以拿到外边的 data</span></span><br><span class="line">    <span class="title function_">callback</span>(data)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里的 data 是形参</span></span><br><span class="line"><span class="title function_">fn</span>(<span class="params"><span class="keyword">function</span>(data)</span>)&#123;</span><br><span class="line">   <span class="comment">// 这里就可以拿到函数内部的变量</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>将这个函数传入一个回调函数当做参数</li>
<li>当调用 fn 函数，function(data) 这个函数以参数的形式传入 fn(callback)</li>
<li>延迟1秒后执行 fn(callback) 内部函数</li>
<li>内部函数定义了一个变量 data</li>
<li>在函数内部调用参数 callback(data)，实际上就是执行 function(‘hello’)</li>
<li>显示 hello</li>
</ol>
<p>闭包应用：参数+回调函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y, callback</span>)&#123;</span><br><span class="line">  <span class="comment">// var x = 10</span></span><br><span class="line">  <span class="comment">// var y = 20</span></span><br><span class="line">  <span class="comment">// var callback = function(ret)&#123; console.log(ret) &#125;</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">var</span> ret = x + y</span><br><span class="line">  		<span class="keyword">return</span> <span class="title function_">callback</span>(ret)  <span class="comment">// 将ret结果当做参数传给回调函数 callback，将结果 return 给异步函数 setTimeout</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传一个函数过去，这个函数的功能就是显示 ret</span></span><br><span class="line"><span class="comment">// 其实这里传的参数就是我们想要拿到的 return 结果</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">10</span>,<span class="number">20</span>, <span class="keyword">function</span>(<span class="params">ret</span>)&#123;</span><br><span class="line">  <span class="comment">// 函数内部就可以直接使用异步函数中的变量</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>使用回调函数目的就是为了拿到返回值，如果在异步函数中只用 return 的话，程序会不等异步函数执行就往下走了。造成函数已经执行但是没有拿到 return 的结果。</p>
</li>
<li>
<p>如果使用 callback，不论异步函数什么时候执行，都会去调用 callback 函数，所以一直都可以拿到 return 结果。</p>
</li>
</ul>
<h3 id="6-3-闭包作用域问题">6.3. 闭包作用域问题</h3>
<p>当 f1 被调用的时候，返回的是外部定义的函数，这里需要注意的是，函数在哪定义，代码里的作用域就属于哪。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 虽然 f 在 f1 内部被调用了，但是 f 是在全局定义的，返回函数里的 num 是全局变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 和 f1 其实没多大关系， res = f;</span></span><br><span class="line"><span class="keyword">var</span> res = <span class="title function_">f1</span>();</span><br><span class="line"><span class="title function_">res</span>();  <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<p>函数本身所处的作用域和在哪里调用这个函数没有任何关系，里边变量的取值取决于函数在哪里定义的。即使在 f1 中调用了 f() ，结果依然是 100</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">200</span>;</span><br><span class="line">    <span class="title function_">f</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f1</span>(); <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<h3 id="6-4-案例1：动态给元素添加属性">6.4 案例1：动态给元素添加属性</h3>
<p>原来的做法是给 li 添加 index 属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>鸭梨<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>罐头<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.nav&quot;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// for 循环是异步任务</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 如果直接使用 cosnole.log(i)，</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// for 循环已经执行完毕，当我们点击的时候。i 早就循环到4了</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 所以以添加 index 属性的方式让 index 固定下来</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        lis[i].<span class="property">index</span> = i;</span></span><br><span class="line"><span class="language-javascript">        lis[i].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">index</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>闭包方式得到当前 li 的索引号</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;ul <span class="keyword">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>鸭梨<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>罐头<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.nav&quot;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&quot;li&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// for 循环异步函数执行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 创建4个立即执行函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 相当于创建了4个onclick事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 将 i 值以参数形式传递给立即执行函数，4个函数的i值不同</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 立即执行函数里边的形参接收 i</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 函数内部 lis[m] 就相当于有了不同的 index</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        (<span class="keyword">function</span>(<span class="params">m</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            lis[m].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)(i);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>只是闭包应用的例子，在这里这种方法创建多个函数，资源占用多，没有第一种好</p>
</blockquote>
<h3 id="6-5-闭包实现常驻内存">6.5. 闭包实现常驻内存</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num); </span><br><span class="line">    num++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// res 是 f1 中的匿名函数，只有赋值的时候执行了 var num = 100;</span></span><br><span class="line"><span class="keyword">var</span> res = <span class="title function_">f1</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 之后的调用和 f1 没有任何关系，实际上就是执行里边的匿名函数</span></span><br><span class="line"><span class="title function_">res</span>();  <span class="comment">// 100</span></span><br><span class="line"><span class="title function_">res</span>();  <span class="comment">// 101</span></span><br><span class="line"><span class="title function_">res</span>();  <span class="comment">// 102</span></span><br></pre></td></tr></table></figure>
<p>当一个函数的返回值是另外一个函数的时候，js 无法判断内部函数是否会被调用，所以会在内存中保存数据，不会被销毁。也称作 Js 垃圾回收机制。</p>
<p>当我们在函数内部引入一个变量或函数时，系统会自动开辟一块内存空间，还会将这块内存的引用计数器进行初始化，如果外部有全局变量或程序引用了这块空间，则引用计数器会自动进行+1操作，当函数执行完毕后，如果计数器为0，系统会进行垃圾回收。销毁数据。如果计数器不为0，则不会清除数据。</p>
<p>闭包的缺点：</p>
<p>由于内部数据不会被自动销毁，占用内存，一般不要使用太多的闭包。</p>
<h2 id="7-递归">7. 递归</h2>
<p>如果一个函数在内部可以调用其本身，那么这个函数就是递归函数，简单理解递归就是函数内部自己调用自己。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">fn</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>();</span><br></pre></td></tr></table></figure>
<p>递归类似于循环，由于递归很容发生死循环（栈溢出），所以必须要加退出条件return</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;说点什么&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">6</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    num++;</span><br><span class="line">    <span class="title function_">fn</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>();</span><br></pre></td></tr></table></figure>
<h3 id="7-1-利用递归做阶乘">7.1. 利用递归做阶乘</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n * <span class="title function_">fn</span>(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fn</span>(<span class="number">4</span>));</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/11.jpg" alt="img"></p>
<h3 id="7-2-斐波那契数列">7.2. 斐波那契数列</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 利用递归函数求斐波那契数列(兔子序列)  1、1、2、3、5、8、13、21...</span></span><br><span class="line"><span class="comment">// 用户输入一个数字 n 就可以求出 这个数字对应的兔子序列值</span></span><br><span class="line"><span class="comment">// 我们只需要知道用户输入的n 的前面两项(n-1 n-2)就可以计算出n 对应的序列值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fb</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n === <span class="number">1</span> || n === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fb</span>(n - <span class="number">1</span>) + <span class="title function_">fb</span>(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fb</span>(<span class="number">3</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fb</span>(<span class="number">6</span>));</span><br></pre></td></tr></table></figure>
<h3 id="7-3-利用递归遍历数据">7.3. 利用递归遍历数据</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;家电&#x27;</span>,</span><br><span class="line">    <span class="attr">goods</span>: [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">11</span>,</span><br><span class="line">        <span class="attr">gname</span>: <span class="string">&#x27;冰箱&#x27;</span>,</span><br><span class="line">        <span class="attr">goods</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">111</span>,</span><br><span class="line">            <span class="attr">gname</span>: <span class="string">&#x27;海尔&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">112</span>,</span><br><span class="line">            <span class="attr">gname</span>: <span class="string">&#x27;美的&#x27;</span></span><br><span class="line">        &#125;, ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="attr">gname</span>: <span class="string">&#x27;洗衣机&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;服饰&#x27;</span></span><br><span class="line">&#125;];</span><br><span class="line"><span class="comment">// 我们想要做输入id号,就可以返回的数据对象</span></span><br><span class="line"><span class="comment">// 1. 利用 forEach 去遍历里面的每一个对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getID</span>(<span class="params">json, id</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">    json.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item</span>) &#123;</span><br><span class="line">        <span class="comment">// console.log(item); // 2个数组元素</span></span><br><span class="line">        <span class="keyword">if</span> (item.<span class="property">id</span> == id) &#123;</span><br><span class="line">            <span class="comment">// console.log(item);</span></span><br><span class="line">            o = item;</span><br><span class="line">            <span class="comment">// 2. 我们想要得里层的数据 11 12 可以利用递归函数</span></span><br><span class="line">            <span class="comment">// 里面应该有goods这个数组并且数组的长度不为 0 </span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.<span class="property">goods</span> &amp;&amp; item.<span class="property">goods</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            o = <span class="title function_">getID</span>(item.<span class="property">goods</span>, id);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getID</span>(data, <span class="number">1</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getID</span>(data, <span class="number">2</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getID</span>(data, <span class="number">11</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getID</span>(data, <span class="number">12</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getID</span>(data, <span class="number">111</span>));</span><br></pre></td></tr></table></figure>
<h2 id="8-浅拷贝和深拷贝">8. 浅拷贝和深拷贝</h2>
<ul>
<li>浅拷贝只是拷贝一层数据，更深层次对象级别的只拷贝引用</li>
<li>深拷贝拷贝多层，每一级别的数据都会拷贝</li>
</ul>
<h3 id="8-1-浅拷贝">8.1. 浅拷贝</h3>
<p>for…in 循环做浅拷贝</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Andy&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">score</span>: &#123;</span><br><span class="line">        <span class="attr">math</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="attr">english</span>: <span class="number">60</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    o[k] = obj[k];</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o);</span><br></pre></td></tr></table></figure>
<p>obj 里边的复杂数据 score 是对象，复杂数据在内存中存放在堆中，独立于简单对象。而浅拷贝只拷贝了复杂对象的内存引用，而没有真正在内存中新开辟空间存储 o 里边的 score 对象。如果改动了 obj 里边的 score 数据，那么 o 里边的 score 对象数据也会随之改变。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/12.jpg" alt="image-20210424221541416"></p>
<p>ES6新增浅拷贝方法</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target, ... sources)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Andy&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">score</span>: &#123;</span><br><span class="line">        <span class="attr">math</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="attr">english</span>: <span class="number">60</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(o, obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o);</span><br></pre></td></tr></table></figure>
<h3 id="8-2-深拷贝">8.2. 深拷贝</h3>
<p>深拷贝会把复杂对象在内存完全复制一份，和原来的对象互不干涉。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/13.jpg" alt="image-20210424221831320"></p>
<p>利用递归深拷贝，利用 for 循环遍历普通数据，遇到复杂数据再次进行 for 循环遍历拷贝。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Andy&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">score</span>: &#123;</span><br><span class="line">        <span class="attr">math</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="attr">english</span>: <span class="number">60</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">newObj, oldObj</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> oldObj)&#123;</span><br><span class="line">        <span class="comment">// 拿到对象的键值</span></span><br><span class="line">        <span class="keyword">var</span> item = oldObj[k]</span><br><span class="line">        <span class="comment">// 判断值是否是数组</span></span><br><span class="line">        <span class="keyword">if</span> (item <span class="keyword">instanceof</span> <span class="title class_">Array</span>)&#123;</span><br><span class="line">            <span class="comment">// 和我们浅拷贝对象一样，设置一个空数组（数组也是 Obj，所以要先判断数组）</span></span><br><span class="line">            newobj[k] = []</span><br><span class="line">            <span class="comment">// 递归拷贝</span></span><br><span class="line">            <span class="title function_">deepCopy</span>(newobj[k], item)</span><br><span class="line">            <span class="comment">// 判断是否是对象</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item <span class="keyword">instanceof</span> <span class="title class_">Object</span>)&#123;</span><br><span class="line">            newobj[k] = &#123;&#125;</span><br><span class="line">            <span class="title function_">deepCopy</span>(newobj[k], item)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            newobj[k] = item</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">deepCopy</span>(o, obj)</span><br></pre></td></tr></table></figure>
<h2 id="9-正则表达式">9. 正则表达式</h2>
<p>正则表达式 （Regular Expression）是用于匹配字符串中字符组合的模式，在 Javascript 中，正则表达式也是对象。</p>
<p>正则表达式通常被用来检索、替换哪些复合某个模式（规则）的文本，例如表单验证：用户名表单只能输入英文字母、数字、下划线。此外，正则表达式还常用语过滤掉页面内容中的一些敏感词（替换），或从字符串中获取我们想要的特定部分（提取）等。</p>
<p>正则表达式特点：</p>
<ul>
<li>灵活性、逻辑性和功能性非常强</li>
<li>可以迅速地用极简单的方式达到字符串的复杂控制。</li>
<li>对于刚接触的人来说，比较晦涩难懂。比如：<code>^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</code></li>
<li>实际开发，一般都是直接复制写好的正则表达式，但是要求会使用正则表达式并且根据实际情况修改正则表达式，比如用户名： <code>/^[a-z0-9_-][3,16] $/</code></li>
</ul>
<p>正则表达式应用：</p>
<ul>
<li>检测数据格式（验证字符串合法性，如用户名长度，邮箱格式）</li>
<li>查找内容（提取网页内容指定文本，采集）</li>
<li>替换内容（过滤关键词，SQL注入特殊字符）</li>
<li>页面伪静态</li>
</ul>
<h3 id="9-1-创建正则表达式">9.1. 创建正则表达式</h3>
<p>通过调用 RegExp 对象的构造函数创建，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用表达式格式或 &#x27;&#x27; 字符串格式</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="regexp">/表达式/</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 后边可以加参数，如 g, i, m</span></span><br><span class="line"><span class="keyword">var</span> gReg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;foo*&#x27;</span>,<span class="string">&#x27;g&#x27;</span>);</span><br></pre></td></tr></table></figure>
<blockquote></blockquote>
<p>使用字面量方式进行创建，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/表达式/</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>将表达式用 // 包括起来，即被认定该表达式是正则对象</li>
<li>表达式中不需要加引号，不管是字符串还是数字类型</li>
<li>表达式可以是任意字母、数字，如： abc 匹配对象就是 abc</li>
</ul>
<h3 id="9-2-test-测试正则">9.2. test() 测试正则</h3>
<p>test() 正则对象方法，用于检测字符串是否符合该规则，该对象会返回 true 或 false，其参数是测试字符串。</p>
<p>test 方法可以用来检测字符串是否符合正则表达式要求的规范</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">regexObj.<span class="title function_">test</span>(str)</span><br></pre></td></tr></table></figure>
<ul>
<li>regexObj 是正则表达式对象</li>
<li>str 需要测试的文本</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 正则表达式为123</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/123/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试字符串是否是123，字符串匹配正则返回true，否则返回false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="number">123</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>))  <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以直接使用正则表达式测试</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="regexp">/123/</span>.<span class="title function_">test</span>(<span class="string">&#x27;123&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h3 id="9-3-match-匹配模式">9.3 match() 匹配模式</h3>
<p>测试字符串内是否有和正则匹配的子串。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;php&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> ret = str.<span class="title function_">match</span>(<span class="regexp">/p/</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br></pre></td></tr></table></figure>
<p>返回一个数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span>: <span class="string">&quot;p&quot;</span>  <span class="comment">// 匹配的字符串</span></span><br><span class="line"><span class="attr">groups</span>: <span class="literal">undefined</span></span><br><span class="line"><span class="attr">index</span>: <span class="number">0</span>  <span class="comment">// 匹配字符在原字符串中起始位置</span></span><br><span class="line"><span class="attr">input</span>: <span class="string">&quot;php&quot;</span>  <span class="comment">// 源字符串</span></span><br><span class="line"><span class="attr">length</span>: <span class="number">1</span>  <span class="comment">// 数组长度</span></span><br></pre></td></tr></table></figure>
<p>找到第一个就返回，如果需要匹配全局，需要加参数 /g，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;php&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> ret = str.<span class="title function_">match</span>(<span class="regexp">/p/g</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="number">0</span>: <span class="string">&quot;p&quot;</span></span><br><span class="line"><span class="number">1</span>: <span class="string">&quot;p&quot;</span></span><br><span class="line"><span class="attr">length</span>: <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>如果没有匹配成功，则返回 null</p>
<h3 id="9-3-正则表达式的组成">9.3. 正则表达式的组成</h3>
<p>正则表达式可以由简单的字符构成，比如 /abc/ ，也可以是简单和特殊字符的组合，比如 /ab*c/。其中特殊字符也被称为<strong>元字符</strong>，在正则表达式中是具有特殊意义的专用符号。，如：^, $, + 等等。</p>
<p>特殊符号很多，可以参考：</p>
<ul>
<li>
<p>MDN: <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp</a></p>
</li>
<li>
<p>jQuery 手册：正则表达式部分</p>
</li>
<li>
<p>正则测试工具：<a target="_blank" rel="noopener" href="http://tool.oschina.net/regex">http://tool.oschina.net/regex</a></p>
</li>
</ul>
<p>正则表达式的组成：</p>
<ul>
<li>找什么   匹配符（等价符、字符簇、修饰符、转义符）</li>
<li>找多少 （限定符）</li>
<li>在哪找 （定位符）</li>
</ul>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“<code>n</code>”匹配字符“<code>n</code>”。“<code>\n</code>”匹配一个换行符。串行“<code>\\</code>”匹配“<code>\</code>”而“<code>\(</code>”则匹配“<code>(</code>”。</td>
</tr>
<tr>
<td>^</td>
<td>匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配“<code>\n</code>”或“<code>\r</code>”之后的位置。</td>
</tr>
<tr>
<td>$</td>
<td>匹配输入字符串的结束位置。如果设置了RegExp对象的Multiline属性，$也匹配“<code>\n</code>”或“<code>\r</code>”之前的位置。</td>
</tr>
<tr>
<td>*</td>
<td>匹配前面的子表达式零次或多次。例如，zo*能匹配“<code>z</code>”以及“<code>zoo</code>”。*等价于{0,}。</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的子表达式一次或多次。例如，“<code>zo+</code>”能匹配“<code>zo</code>”以及“<code>zoo</code>”，但不能匹配“<code>z</code>”。+等价于{1,}。</td>
</tr>
<tr>
<td>?</td>
<td>匹配前面的子表达式零次或一次。例如，“<code>do(es)?</code>”可以匹配“<code>does</code>”或“<code>does</code>”中的“<code>do</code>”。?等价于{0,1}。</td>
</tr>
<tr>
<td>{<em>n</em>}</td>
<td><em>n</em>是一个非负整数。匹配确定的<em>n</em>次。例如，“<code>o&#123;2&#125;</code>”不能匹配“<code>Bob</code>”中的“<code>o</code>”，但是能匹配“<code>food</code>”中的两个o。</td>
</tr>
<tr>
<td>{<em>n</em>,}</td>
<td><em>n</em>是一个非负整数。至少匹配<em>n</em>次。例如，“<code>o&#123;2,&#125;</code>”不能匹配“<code>Bob</code>”中的“<code>o</code>”，但能匹配“<code>foooood</code>”中的所有o。“<code>o&#123;1,&#125;</code>”等价于“<code>o+</code>”。“<code>o&#123;0,&#125;</code>”则等价于“<code>o*</code>”。</td>
</tr>
<tr>
<td>{<em>n</em>,<em>m</em>}</td>
<td><em>m</em>和<em>n</em>均为非负整数，其中<em>n</em>&lt;=<em>m</em>。最少匹配<em>n</em>次且最多匹配<em>m</em>次。例如，“<code>o&#123;1,3&#125;</code>”将匹配“<code>fooooood</code>”中的前三个o。“<code>o&#123;0,1&#125;</code>”等价于“<code>o?</code>”。请注意在逗号和两个数之间不能有空格。</td>
</tr>
<tr>
<td>?</td>
<td>当该字符紧跟在任何一个其他限制符（*,+,?，{<em>n</em>}，{<em>n</em>,}，{<em>n</em>,<em>m</em>}）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“<code>oooo</code>”，“<code>o+?</code>”将匹配单个“<code>o</code>”，而“<code>o+</code>”将匹配所有“<code>o</code>”。</td>
</tr>
<tr>
<td>.</td>
<td>匹配除“<code>\</code><em><code>n</code></em>”之外的任何单个字符。要匹配包括“<code>\</code><em><code>n</code></em>”在内的任何字符，请使用像“`(.</td>
</tr>
<tr>
<td>(pattern)</td>
<td>匹配pattern并获取这一匹配。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0…$9属性。要匹配圆括号字符，请使用“<code>\(</code>”或“<code>\)</code>”。</td>
</tr>
<tr>
<td>(?:pattern)</td>
<td>匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用或字符“`(</td>
</tr>
<tr>
<td>(?=pattern)</td>
<td>正向肯定预查，在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，“`Windows(?=95</td>
</tr>
<tr>
<td>(?!pattern)</td>
<td>正向否定预查，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“`Windows(?!95</td>
</tr>
<tr>
<td>(?&lt;=pattern)</td>
<td>反向肯定预查，与正向肯定预查类拟，只是方向相反。例如，“`(?&lt;=95</td>
</tr>
<tr>
<td>(?&lt;!pattern)</td>
<td>反向否定预查，与正向否定预查类拟，只是方向相反。例如“`(?&lt;!95</td>
</tr>
<tr>
<td>x|y</td>
<td>匹配x或y。例如，“`z</td>
</tr>
<tr>
<td>[xyz]</td>
<td>字符集合。匹配所包含的任意一个字符。例如，“<code>[abc]</code>”可以匹配“<code>plain</code>”中的“<code>a</code>”。</td>
</tr>
<tr>
<td>[^xyz]</td>
<td>负值字符集合。匹配未包含的任意字符。例如，“<code>[^abc]</code>”可以匹配“<code>plain</code>”中的“<code>p</code>”。</td>
</tr>
<tr>
<td>[a-z]</td>
<td>字符范围。匹配指定范围内的任意字符。例如，“<code>[a-z]</code>”可以匹配“<code>a</code>”到“<code>z</code>”范围内的任意小写字母字符。</td>
</tr>
<tr>
<td>[^a-z]</td>
<td>负值字符范围。匹配任何不在指定范围内的任意字符。例如，“<code>[^a-z]</code>”可以匹配任何不在“<code>a</code>”到“<code>z</code>”范围内的任意字符。</td>
</tr>
<tr>
<td>\b</td>
<td>匹配一个单词边界，也就是指单词和空格间的位置。例如，“<code>er\b</code>”可以匹配“<code>never</code>”中的“<code>er</code>”，但不能匹配“<code>verb</code>”中的“<code>er</code>”。</td>
</tr>
<tr>
<td>\B</td>
<td>匹配非单词边界。“<code>er\B</code>”能匹配“<code>verb</code>”中的“<code>er</code>”，但不能匹配“<code>never</code>”中的“<code>er</code>”。</td>
</tr>
<tr>
<td>\cx</td>
<td>匹配由x指明的控制字符。例如，\cM匹配一个Control-M或回车符。x的值必须为A-Z或a-z之一。否则，将c视为一个原义的“<code>c</code>”字符。</td>
</tr>
<tr>
<td>\d</td>
<td>匹配一个数字字符。等价于[0-9]。</td>
</tr>
<tr>
<td>\D</td>
<td>匹配一个非数字字符。等价于[^0-9]。</td>
</tr>
<tr>
<td>\f</td>
<td>匹配一个换页符。等价于\x0c和\cL。</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符。等价于\x0a和\cJ。</td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个回车符。等价于\x0d和\cM。</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任何非空白字符。等价于[^ \f\n\r\t\v]。</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个制表符。等价于\x09和\cI。</td>
</tr>
<tr>
<td>\v</td>
<td>匹配一个垂直制表符。等价于\x0b和\cK。</td>
</tr>
<tr>
<td>\w</td>
<td>匹配包括下划线的任何单词字符。等价于“<code>[A-Za-z0-9_]</code>”。</td>
</tr>
<tr>
<td>\W</td>
<td>匹配任何非单词字符。等价于“<code>[^A-Za-z0-9_]</code>”。</td>
</tr>
<tr>
<td>\x<em>n</em></td>
<td>匹配<em>n</em>，其中<em>n</em>为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，“<code>\x41</code>”匹配“<code>A</code>”。“<code>\x041</code>”则等价于“<code>\x04&amp;1</code>”。正则表达式中可以使用ASCII编码。.</td>
</tr>
<tr>
<td>*num*</td>
<td>匹配<em>num</em>，其中<em>num</em>是一个正整数。对所获取的匹配的引用。例如，“<code>(.)\1</code>”匹配两个连续的相同字符。</td>
</tr>
<tr>
<td>*n*</td>
<td>标识一个八进制转义值或一个向后引用。如果*n<em>之前至少</em>n<em>个获取的子表达式，则</em>n<em>为向后引用。否则，如果</em>n<em>为八进制数字（0-7），则</em>n*为一个八进制转义值。</td>
</tr>
<tr>
<td>*nm*</td>
<td>标识一个八进制转义值或一个向后引用。如果*nm<em>之前至少有</em>nm<em>个获得子表达式，则</em>nm<em>为向后引用。如果*nm</em>之前至少有<em>n</em>个获取，则<em>n</em>为一个后跟文字<em>m</em>的向后引用。如果前面的条件都不满足，若<em>n</em>和<em>m</em>均为八进制数字（0-7），则*nm<em>将匹配八进制转义值</em>nm*。</td>
</tr>
<tr>
<td>*nml*</td>
<td>如果<em>n</em>为八进制数字（0-3），且<em>m和l</em>均为八进制数字（0-7），则匹配八进制转义值<em>nm</em>l。</td>
</tr>
<tr>
<td>\u<em>n</em></td>
<td>匹配<em>n</em>，其中<em>n</em>是一个用四个十六进制数字表示的Unicode字符。例如，\u00A9匹配版权符号（©）。</td>
</tr>
</tbody>
</table>
<h4 id="9-3-1-边界符">9.3.1. 边界符</h4>
<p>正则表达式中的边界符（位置符）用来提示字符所处的位置，主要有两个字符 ^ 和 $</p>
<table>
<thead>
<tr>
<th>边界符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>表示匹配行首的文本（以谁开始）</td>
</tr>
<tr>
<td>$</td>
<td>表示匹配行尾的文本（以谁结束）</td>
</tr>
</tbody>
</table>
<p>只要包含有 abc 的字符串都都匹配该正则</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/abc/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;zabc&#x27;</span>));  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>必须以 abc 为开头的字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^abc/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;zabc&#x27;</span>));  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>匹配字符串必须是 abc ，精确匹配，不能多字符也不能少字符</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^abc$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>));  <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;zabc&#x27;</span>));  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>匹配以a开头t结尾的单词</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str = <span class="string">&#x27;apple, anana, agriculture&#x27;</span></span><br><span class="line">rg = ???</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(rg));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="9-3-2-字符簇（字符集合）">9.3.2. 字符簇（字符集合）</h4>
<p>[] 表示有一系列字符可供选择，匹配中括号内所包含的任意一个字符。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 只要包含有a，或者包含有b，或者包含有c都匹配</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/[abc]/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;color&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;red&#x27;</span>));  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 只有是字母 a 开头，或字母b开头，或字母c 开头的字符串才匹配</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[abc]/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;baby&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;rock&#x27;</span>));  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 只有字母a，或b，或c 这三个字母才匹配</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[abc]$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));  <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;baby&#x27;</span>));  <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;c&#x27;</span>));  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>[] 中可以使用 - 范围符指定范围，如 a-z，A-Z，0-9</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 只要包含 a - z 中任意一个字符都匹配</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/[a-z]/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [a-c] 相当于 [abc]</span></span><br><span class="line"><span class="keyword">var</span> rg = /[a-c]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多种范围可以一起写在 [] 中</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/[a-zA-Z0-9_-]/</span></span><br></pre></td></tr></table></figure>
<p>^ 在 [] 中使用的话，取反的意思，不要和 [] 外部的边界符 ^ 搞混</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 除了0-9的所有字符都匹配</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[^0-9]$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="number">1</span>));  <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&#x27;A&#x27;</span>))  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h4 id="9-3-3-限定符（量词符）">9.3.3. 限定符（量词符）</h4>
<p>量词符用来设定某个模式出现的次数</p>
<table>
<thead>
<tr>
<th>量词</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>重复0次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复1次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或1次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n次到m次</td>
</tr>
</tbody>
</table>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  * 相当于 &gt;= 0 可以出现0次或者很多次 </span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^a*$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;phpphp&#x27;</span></span><br><span class="line"><span class="keyword">var</span> ret = str.<span class="title function_">match</span>(<span class="regexp">/p*/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="comment">// 因为可以匹配0次，在h位置没有p但是*可以匹配0次，所以也算符合正则，输出空字符串</span></span><br><span class="line">[<span class="string">&quot;p&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;pp&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;&quot;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  + 相当于 &gt;= 1 可以出现1次或者很多次</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^a+$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;phpphp&#x27;</span></span><br><span class="line"><span class="keyword">var</span> ret = str.<span class="title function_">match</span>(<span class="regexp">/p+/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="comment">// 因为可以匹配1次或多次</span></span><br><span class="line">[<span class="string">&quot;p&quot;</span>, <span class="string">&quot;pp&quot;</span>, <span class="string">&quot;p&quot;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  ?  相当于 1 || 0</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^a?$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;phpphp&#x27;</span></span><br><span class="line"><span class="keyword">var</span> ret = str.<span class="title function_">match</span>(<span class="regexp">/p?/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="comment">// 因为可以匹配0次，或1次</span></span><br><span class="line">[<span class="string">&quot;p&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;&quot;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  &#123;3 &#125; 就是重复3次</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^a&#123;3&#125;$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaa&#x27;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#123;3, &#125;  大于等于3</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^a&#123;3,&#125;$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaa&#x27;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  &#123;3,16&#125;  大于等于3 并且 小于等于16</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^a&#123;3,6&#125;$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaa&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;aaaaaaa&#x27;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>量词可以设定某个模式出现的次数，比如用户名长度的验证：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 用户名只能输入数字、字母、下划线、和横杠，并且最小6位，最大16位</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^[a-zA-Z0-9_-]&#123;6,16&#125;$/</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意 {6,16} 中间不要有空格</p>
</blockquote>
<h4 id="9-3-4-贪婪匹配">9.3.4 贪婪匹配</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;phpphp&#x27;</span></span><br><span class="line"><span class="keyword">var</span> ret = str.<span class="title function_">match</span>(<span class="regexp">/p+/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="comment">// 因为可以匹配1次或多次</span></span><br><span class="line">[<span class="string">&quot;p&quot;</span>, <span class="string">&quot;pp&quot;</span>, <span class="string">&quot;p&quot;</span>]</span><br></pre></td></tr></table></figure>
<p>贪婪匹配：第二次寻找到p后没有立即返回，而是继续判断后边字符和前边字符搭配是否也符合正则的模式，称为贪婪匹配。尽可能取得更多的情况。默认情况正则都是贪婪匹配</p>
<p>如果想让模式变为非贪婪匹配，需要和 ? 配合使用，?是用来修饰前边的+限定符的。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;phpphp&#x27;</span></span><br><span class="line"><span class="keyword">var</span> ret = str.<span class="title function_">match</span>(<span class="regexp">/p+?/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="comment">// 只要找到符合的就匹配返回，不继续往下看了，尽可能少匹配</span></span><br><span class="line">[<span class="string">&quot;p&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;p&quot;</span>]</span><br></pre></td></tr></table></figure>
<p>非贪婪匹配使用场景</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;&lt;div id=&quot;div1&quot;&gt;&lt;div id=&quot;div2&quot;&gt;abc&lt;/div&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">// 如果正则为 /&lt;div id=&quot;div2&quot;&gt;.*&lt;\/div&gt;/g </span></span><br><span class="line"><span class="comment">// 那么就会变为贪婪模式，.* 可以一直匹配到字符串末尾</span></span><br><span class="line"><span class="keyword">var</span> ret = str.<span class="title function_">match</span>(<span class="regexp">/&lt;div id=&quot;div2&quot;&gt;.*?&lt;\/div&gt;/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret);</span><br></pre></td></tr></table></figure>
<h4 id="案例：用户名表单验证">案例：用户名表单验证</h4>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#aaa</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.wrong</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;uname&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span>请输入用户名<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> reg = <span class="regexp">/^[a-zA-Z0-9_-]&#123;6,16&#125;$/</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> uname = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.uname&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> span = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;span&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        uname.<span class="property">onblur</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (reg.<span class="title function_">test</span>(<span class="variable language_">this</span>.<span class="property">value</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;正确的&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                span.<span class="property">className</span> = <span class="string">&#x27;right&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                span.<span class="property">innerHTML</span> = <span class="string">&#x27;用户名格式输入正确&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;错误的&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                span.<span class="property">className</span> = <span class="string">&#x27;wrong&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                span.<span class="property">innerHTML</span> = <span class="string">&#x27;用户名格式输入不正确&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="9-3-4-小括号优先级">9.3.4. 小括号优先级</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这里重复3次的不是 abc 而是 c</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^abc&#123;3&#125;$/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果想匹配 abc 重复的话，需要使用小括号将 abc 作为一个整体</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^(abc)&#123;3&#125;$/</span></span><br></pre></td></tr></table></figure>
<h4 id="9-3-5-多个正则表达式匹配">9.3.5. 多个正则表达式匹配</h4>
<p>使用 | 符号可以让字符串进行逻辑或匹配，也就是说只要复合任意一个正则即为匹配。</p>
<p>只要字符串中包含数字或小写字母即匹配</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[0-9]$|^[a-z]$/</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&quot;a&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&quot;1&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rg.<span class="title function_">test</span>(<span class="string">&quot;A&quot;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 取字符串开头和结尾的数字</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123abc456def789&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/(^\d+)|(\d+$)/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br></pre></td></tr></table></figure>
<h4 id="9-3-5-等价符（预定义类）">9.3.5. 等价符（预定义类）</h4>
<p>预定义类指的是某些常见模式的简写方式</p>
<table>
<thead>
<tr>
<th>预定义类</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>匹配除换行符( \n, \r) 之外的任何单个字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配 0-9 之间的任一数字，相当于 [0-9]</td>
</tr>
<tr>
<td>\D</td>
<td>匹配所有 0-9 以外的任一字符，相当于 <code>[^0-9]</code></td>
</tr>
<tr>
<td>\w</td>
<td>匹配任意的字母、数字和下划线，相当于 <code>[A-Za-z0-9_]</code></td>
</tr>
<tr>
<td>\W</td>
<td>除字母、数字和下划线的任一字符</td>
</tr>
<tr>
<td>\s</td>
<td>匹配空格（包括换行符、制表符、空格符等），相当于 <code>[\t\r\n\v\f]</code></td>
</tr>
<tr>
<td>\S</td>
<td>匹配非空格的字符</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符</td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个回车符</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个制表符</td>
</tr>
</tbody>
</table>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;php1js22&#x27;</span></span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/\d+/g</span>); <span class="comment">// 匹配所有数字</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);  <span class="comment">// [&quot;1&quot;, &quot;22&quot;]</span></span><br></pre></td></tr></table></figure>
<p>匹配以a开始e结尾的单词</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str = <span class="string">&quot;apple, anana, agriculture&quot;</span>;</span><br><span class="line">rg = <span class="regexp">/a\w*?e/g</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(rg));</span><br></pre></td></tr></table></figure>
<p>如果想让 . 支持换行符（\n， \r），可以使用 <code>(.|\n)</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">`&lt;tr&gt;</span></span><br><span class="line"><span class="string">&lt;td&gt;abc&lt;/td&gt;</span></span><br><span class="line"><span class="string">&lt;/tr&gt;`</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/(.|\n)*?&lt;td&gt;abc&lt;\/td&gt;/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">[<span class="string">&quot;&lt;tr&gt;↵&lt;td&gt;abc&lt;/td&gt;&quot;</span>]</span><br></pre></td></tr></table></figure>
<p>座机号码验证</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 座机号码验证: 全国座机号码有两种格式</span></span><br><span class="line"><span class="comment">// 010-12345678  或者  0530-1234567</span></span><br><span class="line"><span class="comment">// 正则里面的或者符号  |  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg1 = <span class="regexp">/^\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;$/</span>;</span><br><span class="line"><span class="keyword">var</span> reg2 = <span class="regexp">/^\d&#123;3,4&#125;-\d&#123;7,8&#125;$/</span>;</span><br></pre></td></tr></table></figure>
<h4 id="案例：完整表单验证">案例：完整表单验证</h4>
<p><a target="_blank" rel="noopener" href="https://gitee.com/xiaoqiang001/js_advanced_material/tree/master">https://gitee.com/xiaoqiang001/js_advanced_material/tree/master</a></p>
<h4 id="9-3-6-正则替换">9.3.6. 正则替换</h4>
<p>之前学的 string 对象方法 replace() 方法可以实现替换字符串操作，用来替换的参数可以是一个字符串或是一个正则表达式。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">stringObj.<span class="title function_">replace</span>(regexp/substr, replacement)</span><br></pre></td></tr></table></figure>
<ul>
<li>regexp/substr： 被替换的字符串或者正则表达式</li>
<li>replacement： 被替换的字符串</li>
</ul>
<p>注意：replace 不会改变原字符串，返回值是一个替换完毕的新字符串</p>
<p>普通字符串替换</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;Andy and Timi&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="string">&#x27;Adny&#x27;</span>, <span class="string">&#x27;Baby&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p>正则替换：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Andy and Timi&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="regexp">/A\w*/</span>, <span class="string">&quot;Baby&quot;</span>));</span><br></pre></td></tr></table></figure>
<h4 id="9-3-7-修饰符（正则表达式参数）">9.3.7. 修饰符（正则表达式参数）</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">/表达式/[<span class="keyword">switch</span>]</span><br></pre></td></tr></table></figure>
<p>switch 也称为修饰符，可以限定正则按照什么模式来进行匹配：</p>
<ul>
<li>g：全局匹配</li>
<li>i：忽略大小写</li>
<li>m：执行多次匹配（^和$能匹配每行的开始于结束）</li>
<li>gi：全局匹配 + 忽略大小写</li>
</ul>
<p>因为 replace() 方法只能替换第一个字符，所以需要加上全局匹配，可以让整个字符串里边所有匹配的字符都可以进行替换。</p>
<p>全局替换</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;这是一个激情的年代，激情的人和事无处不在&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="regexp">/激情/g</span>, <span class="string">&quot;**&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>匹配多个词语</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;这是一个激情的年代，激情的人和事无处不在&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="regexp">/激情|年代/g</span>, <span class="string">&quot;**&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>匹配多行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;1234\r\n5678&quot;</span></span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/^\d+$/gm</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line">[<span class="string">&quot;1234&quot;</span>, <span class="string">&quot;5678&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="9-3-8-转义字符">9.3.8. 转义字符</h4>
<p>转移字符就一个 \ ，可以将下一个字符标记为一个特殊字符，如（\n， \t ）或者取消字符的本身意思。</p>
<p>如 . ? 等字符如果出现在字符串当中，我们如果需要匹配，则可以使用 \ 将它们转换为无意义的字符。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello world?&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(<span class="regexp">/d\?/</span>));</span><br></pre></td></tr></table></figure>
<p>最常用的应该是将 / 和 . 转义成普通字符</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;&lt;div&gt;abc&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(<span class="regexp">/.*?&lt;\/div&gt;/</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">&quot;123.jpg&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">&quot;123.png&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str1.<span class="title function_">match</span>(<span class="regexp">/.+?\.(jpg|png)/</span>));</span><br></pre></td></tr></table></figure>
<p>类似这样的还有 <code>[]$.*?+|^&#123;&#125;()</code></p>
<h3 id="9-4-正则方法">9.4 正则方法</h3>
<p>正则对象方法，是用正则的实例进行调用的方法，常用的有 test 和 exec</p>
<p>正则方法：</p>
<ul>
<li>test()</li>
<li>exec()</li>
</ul>
<h4 id="9-4-1-test">9.4.1. test()</h4>
<p>test() 方法执行一个检索，用来查看正则表达式与指定的字符串是否匹配。返回 true 或 false。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;table football&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> regex = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;foo*&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> globalRegex = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;foo*&#x27;</span>, <span class="string">&#x27;g&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(regex.<span class="title function_">test</span>(str));</span><br></pre></td></tr></table></figure>
<h4 id="9-4-2-exec">9.4.2. exec()</h4>
<p>exec() 方法在一个指定字符串中执行一个搜索匹配。只匹配一次，返回一个结果数组或 null。</p>
<p>注意：即使设置了全局修饰符g，也只匹配一次，如果加上 g 的话，第二次调用 exec 会从上一次结束的 index 处继续寻找</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;php1js22&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/[a-z]/g</span>;</span><br><span class="line"><span class="keyword">var</span> res1 = pattern.<span class="title function_">exec</span>(str)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> res2 = pattern.<span class="title function_">exec</span>(str)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// [&quot;p&quot;, index: 0, input: &quot;php1js22&quot;, groups: undefined]</span></span><br><span class="line"><span class="comment">// [&quot;h&quot;, index: 1, input: &quot;php1js22&quot;, groups: undefined]</span></span><br></pre></td></tr></table></figure>
<p>lastIndex 属性</p>
<ul>
<li>
<p>当有了 /g 的时候，会有一个 lastIndex 会记录一个下标，下次开始的位置</p>
</li>
<li>
<p>如果没有 /g ，每次 lastIndex 会清零</p>
</li>
</ul>
<h4 id="9-4-3-match">9.4.3. match()</h4>
<p>match() 方法其实是字符串对象的方法，用于检索返回一个字符串匹配正则表达式的结果。返回一个数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> paragraph = <span class="string">&#x27;The quick brown fox jumps over the lazy dog. It barked.&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> regex = <span class="regexp">/[A-Z]/g</span>;</span><br><span class="line"><span class="keyword">const</span> found = paragraph.<span class="title function_">match</span>(regex);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(found);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;T&quot;, &quot;I&quot;]</span></span><br></pre></td></tr></table></figure>
<p>返回值</p>
<ul>
<li>如果使用g标志，则将返回与完整正则表达式匹配的所有结果，但不会返回捕获组。</li>
<li>如果未使用g标志，则仅返回第一个完整匹配及其相关的捕获组（<code>Array</code>）。 在这种情况下，返回的项目将具有如下所述的其他属性。</li>
</ul>
<p>附加属性</p>
<p>如上所述，匹配的结果包含如下所述的附加特性。</p>
<ul>
<li><code>groups</code>: 一个捕获组数组 或 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>（如果没有定义命名捕获组）。</li>
<li><code>index</code>: 匹配的结果的开始位置</li>
<li><code>input</code>: 搜索的字符串.</li>
</ul>
<h4 id="9-4-4-matchAll">9.4.4 matchAll()</h4>
<p>matchAll() 方法返回一个包含所有匹配正则表达式的结果及分组捕获组的迭代器。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> regexp = <span class="regexp">/t(e)(st(\d?))/g</span>;</span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;test1test2&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array = [...str.<span class="title function_">matchAll</span>(regexp)];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array[<span class="number">1</span>]);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="9-4-5-search">9.4.5 search()</h4>
<p>search() 方法执行正则表达式和 String 对象之间的一个搜索匹配。如果找到返回结果的起始位置。停止向后检索。没有全局 /g</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hey JudE&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/[A-Z]/g</span>;</span><br><span class="line"><span class="keyword">var</span> re2 = <span class="regexp">/[.]/g</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">search</span>(re)); <span class="comment">// returns 4, which is the index of the first capital letter &quot;J&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">search</span>(re2)); <span class="comment">// returns -1 cannot find &#x27;.&#x27; dot punctuation</span></span><br></pre></td></tr></table></figure>
<h4 id="9-4-7-replace">9.4.7 replace()</h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Andy and Timi&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="regexp">/A\w*/</span>, <span class="string">&quot;Baby&quot;</span>));</span><br></pre></td></tr></table></figure>
<h4 id="9-4-8-split">9.4.8. split()</h4>
<p>按照正则分割字符串，返回数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;1234@qq.com&quot;</span></span><br><span class="line"><span class="keyword">var</span> res = [str.<span class="title function_">split</span>(<span class="regexp">/[@\./]/</span>)];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [&quot;1234&quot;, &quot;qq&quot;, &quot;com&quot;]</span></span><br></pre></td></tr></table></figure>
<h2 id="10-分组-捕获和反向引用">10. 分组/捕获和反向引用</h2>
<p>子表达式</p>
<p>在正则表达式中，通过一对圆括号括起来的内容，我们认为他们是一个整体，同时我们还称之为子表达式，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d(\d)\d/gi</span></span><br></pre></td></tr></table></figure>
<p>捕获（分组）</p>
<p>在正则表达式中，子表达式匹配到相应的内容时，系统会自动捕获这个行为，然后将子表达式匹配到的内容放入系统的缓存中，我们把这个过程就称之为捕获。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/14.jpg" alt="image-20210430150645055"></p>
<p>反向引用</p>
<p>如正则表达式中，我们可以使用 \n (n&gt;0，正整数，代表系统中的缓冲区编号)来获取缓冲区的内容，我们把这个过程就称之为反向引用。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/15.jpg" alt="image-20210430150958470"></p>
<ul>
<li>在正则语法中，用 <code>\1</code> 来引用前面的捕获（使用子表达式匹配的结果）。用 <code>\2</code> 表示第二个捕获的内容</li>
<li>在正则语法外（如 replace 时），用 <code>$1</code> 来引用前面的捕获</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;1122 3434 5566 7879 9887&quot;</span>;</span><br><span class="line"><span class="comment">// 匹配4个数字，12位相同，34位相同</span></span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/(\d)\1(\d)\2/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"><span class="comment">// 13位相同，24位相同</span></span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/(\d)(\d)\1\2/g</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"><span class="comment">// 12位相同，34位相同，并将相同的数字只保留一个</span></span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">replace</span>(<span class="regexp">/(\d)\1(\d)\2/g</span>, <span class="string">&quot;$1$2&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;大吉吉吉吉吉吉吉吉吉大利，今晚晚晚晚晚晚晚晚吃鸡&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">replace</span>(<span class="regexp">/([\u4E00-\u9FA5])\1+/g</span>, <span class="string">&quot;$1&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br></pre></td></tr></table></figure>
<p>不是使用 /g 标签则可以返回捕获组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;power apple is powerful apple&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/power.(apple).*\1$/</span>;</span><br><span class="line">res = str.<span class="title function_">match</span>(rg);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>
<p>禁止引用</p>
<p>(?:正则) 这个小括号内容不能够被引用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;1122 3434 5566 7879 9887&#x27;</span></span><br><span class="line"><span class="comment">// 第一次括号内不允许被引用</span></span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/(?:\d)(\d)\1\d/g</span>);</span><br></pre></td></tr></table></figure>
<h2 id="11-环视（断言、预查）">11. 环视（断言、预查）</h2>
<p>正则表达式中，用于查找某些内容之前或之后的东西，叫做环视。</p>
<h3 id="11-1-正向肯定预查">11.1. 正向肯定预查</h3>
<p>也叫作顺序肯定环视</p>
<p>every(?=n) 匹配任何其后紧接指定字符串 n 的字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 匹配后面字符为 10 的 win</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;win7 win8 win10&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/win(?=10)/g</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">//[&quot;win&quot;]</span></span><br></pre></td></tr></table></figure>
<h3 id="11-2-正向否定预查">11.2. 正向否定预查</h3>
<p>every(?!n) 匹配任何其后没有紧接着指定字符串n的字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;win7 win8 win10&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.<span class="title function_">match</span>(<span class="regexp">/win(?!10)/g</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">//[&quot;win&quot;, &quot;win&quot;]</span></span><br></pre></td></tr></table></figure>
<h2 id="11-常用正则">11. 常用正则</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用户名 /^[a-z0-9_-]&#123;3,16&#125;$/ </span><br><span class="line">电话号码 /^1[3-9]\d&#123;9&#125;$/</span><br><span class="line">电子邮箱 /^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)$/</span><br><span class="line">/^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+(\.&#123;1,2&#125;[a-z]+)+$/</span><br><span class="line">匹配中文 [\u4E00-\u9FA5]</span><br></pre></td></tr></table></figure>
<h2 id="12-正则练习">12. 正则练习</h2>
<p>练习1：从一堆图片地址中，找出符合条件的图片地址。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">    <span class="string">&quot;img/20181013/a.jpg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;img/20181014/b.png&quot;</span>,</span><br><span class="line">    <span class="string">&quot;image/20181014/a.jpg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;image/20181013/b.png&quot;</span>,</span><br><span class="line">    <span class="string">&quot;20181013/c.png&quot;</span>,</span><br><span class="line">    <span class="string">&quot;20181018/c.pdf&quot;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/^img.*\.(jpg|png|gif|jpeg)$/i</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="comment">// var res = arr[i].match(pattern); // 返回数组或者null</span></span><br><span class="line">    <span class="keyword">var</span> res = pattern.<span class="title function_">test</span>(arr[i]); <span class="comment">//返回是true false</span></span><br><span class="line">    <span class="keyword">if</span> (res) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配不以image开头的图片地址  正向否定预查 ?!</span></span><br><span class="line"><span class="comment">//  /^(?!image)/  /.*/  /\.(jpg|png|gif|jpeg)$/i</span></span><br><span class="line"><span class="comment">//  /^(?!image).*\.(jpg|png|gif|jpeg)$/i</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/^(?!image).*\.(jpg|png|gif|jpeg)$/i</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="keyword">var</span> res = pattern.<span class="title function_">test</span>(arr[i]); <span class="comment">//返回是true false</span></span><br><span class="line">    <span class="keyword">if</span> (res) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>练习2：匹配div2 以及div2中的内容</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> html = <span class="string">&#x27;&lt;div id=&quot;div1&quot;&gt;&lt;div id=&quot;div2&quot;&gt;来找我呀&lt;/div&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">// /&lt;div id=&quot;div2&quot;&gt;.*&lt;\/div&gt;/</span></span><br><span class="line"><span class="comment">// 非贪婪匹配</span></span><br><span class="line"><span class="comment">// var pattern = /&lt;div id=&quot;div2&quot;&gt;.*?&lt;\/div&gt;/;</span></span><br><span class="line"><span class="comment">// var res = html.match(pattern);</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&lt;div id=&quot;div2&quot;&gt;(.*?)&lt;\/div&gt;/</span>;</span><br><span class="line"><span class="keyword">var</span> res = html.<span class="title function_">match</span>(pattern);</span><br><span class="line"><span class="comment">// match 方法匹配，会将子表达式的结果，也放在结果数组中</span></span><br><span class="line"><span class="comment">// match 返回结果：特点：不加全局修饰符g，结果包含子表达式结果</span></span><br><span class="line"><span class="comment">// 加全局修饰符g  不包含子表达式结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"><span class="comment">// console.log(res[1]);</span></span><br></pre></td></tr></table></figure>
<h1>-------------------</h1>
<h1>ES6</h1>
<h1>-------------------</h1>
<p>ES 全程是 ECMAScript，它是由 ECMA 国际标准化组织指定的一项脚本语言的标准化规范。ES已经开发到第10个版本了，也就是 ES10 。ES6 是 2015年6月制定的一个版本。这一版包含了大概这个规范有史以来最重要的一批增强特性。ES6 正式支持了类、模块、迭代器、生成器、箭头函数、期约、反射、代理和众多新的数据类型。</p>
<h1>1. let 声明</h1>
<p>let 声明方式的特点：</p>
<ul>
<li>变量不能重复声明</li>
<li>只在块级作用域生效</li>
<li>不存在变量提升</li>
<li>不影响作用域链</li>
</ul>
<h2 id="1-1-变量不能重复声明">1.1 变量不能重复声明</h2>
<p>使用 var 声明变量的时候，变量是可以重复声明的，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此时，浏览器不会报错，并且 a 被重新声明成了 20</p>
</blockquote>
<p>使用 let 方式则不能重复声明</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>浏览器报错 Uncaught SyntaxError: Identifier ‘a’ has already been declared</p>
</blockquote>
<h2 id="1-2-只在当前作用域生效">1.2 只在当前作用域生效</h2>
<p>let 声明的变量只在所处于的块级有效，块级作用域即 {} 中的作用域。变量只能在大括号中访问。</p>
<p>之前在 function 中用 var 定义的变量确实无法在外部访问，除非使用闭包的方式，但是在 if, for 中用 var 定义的变量，在外部是可以访问的，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = +i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>a 和 b 都可以访问</p>
</blockquote>
<p>如果使用 let 定义变量，那么在外部就无法进行访问：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 程序报错，显示 a 为 undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>
<h2 id="1-3-let-关键字不存在变量提升">1.3 let 关键字不存在变量提升</h2>
<p>在 var 定义的变量，在 js 执行前会将定义变量提升到脚本最前边。而 let 则没有这种机制。</p>
<p>使用 var 声明变量时，虽然赋值不会生效，但是已经执行了 <code>var a;</code>，将声明提前执行，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 被声明但没有赋值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出 undefined</p>
</blockquote>
<p>使用 let 声明变量，变量必须在声明之后使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>报错信息：Uncaught ReferenceError: Cannot access ‘a’ before initialization</p>
</blockquote>
<h2 id="1-4-let-声明不影响作用域链">1.4 let 声明不影响作用域链</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fn</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>fn() 中没有声明 a，会向上一级寻找，此时 let 声明的变量不影响作用域链的传输</p>
</blockquote>
<h2 id="1-5-暂时性死区">1.5. 暂时性死区</h2>
<p>当我们在块级作用域中可以调用外部用 var 定义的变量</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果在块级作用域中定义了相同的变量名，这个变量则会与这个 {} 进行绑定，即使 console.log(num) 在定义num之前，也是无法访问外部用var定义的同名变量的。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">    <span class="keyword">let</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>let 应用：</p>
<p>比如说 for 循环中我们的计数器 i，在 for 循环之后就没必要存在了，我们不需要访问计数器 i 的值。所以建议使用 let 定义，循环结束后就会被内存回收销毁。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 报错，因为 i 已经被销毁</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br></pre></td></tr></table></figure>
<p>经典面试题：代码执行结果？</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">    arr[i] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">arr[<span class="number">0</span>]();</span><br><span class="line">arr[<span class="number">1</span>]();</span><br></pre></td></tr></table></figure>
<p>当 arr[0] 和 arr[1] 两个函数运行的时候，循环已经结束，var 定义的 i 没有被销毁，因为作用域链的关系，在匿名函数中 i 并没有在该函数声明，所以去寻找上一层，i 又是一个全局变量，所以两个函数中输出的 i 其实是同一个 变量，所以这两个函数输出的结果应该是一样的，都是 2。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">    arr[i] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">arr[<span class="number">0</span>]();</span><br><span class="line">arr[<span class="number">1</span>]();</span><br></pre></td></tr></table></figure>
<p>当 arr[0] 和 arr[1] 两个函数运行的时候，Js 引擎在后台会为每个迭代循环声明一个新的迭代变量，每个arr引用的都是不同变量的实例，这时候的 i 不是全局变量，所以 i 还是原来的值，0,1</p>
<p>这种每次迭代声明一个独立变量实例的行为适用于所有风格的 for 循环，包括 for…in 和 for…of 循环。</p>
<h2 id="1-6-windows-对象属相">1.6 windows 对象属相</h2>
<p>最后在全局作用域中使用 let 声明的变量不会称为 window 对象的属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">age</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;Andy&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">name</span>)</span><br></pre></td></tr></table></figure>
<h1>2. const 声明</h1>
<p>cosnt 的行为与 let 基本相同，作用是声明常量，常量就是指值（内存地址）不能变化的量。唯一一个重要的区别是用它声明的变量时必须同时初始化变量，且尝试修改 const 声明的变量会导致运行时错误。</p>
<p>常量特点：</p>
<ul>
<li>必须要赋初始值</li>
<li>常量值不能被修改</li>
<li>常量不能被重复声明</li>
<li>const声明的常量也是块级作用域</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 报错，必须赋值</span></span><br><span class="line"><span class="keyword">const</span> score;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错，不能改变常量值</span></span><br><span class="line"><span class="keyword">const</span> age = <span class="number">36</span></span><br><span class="line">age = <span class="number">36</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也不能重复声明</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;Matt&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;Nicolas&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明的作用域也是块</span></span><br><span class="line"><span class="keyword">const</span> country = <span class="string">&quot;China&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> country = <span class="string">&quot;Japan&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// China</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br></pre></td></tr></table></figure>
<p>虽然 const 无法重新声明，但是如果在不同作用域是可以重新声明的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.1415926</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">PI</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">PI</span>);</span><br></pre></td></tr></table></figure>
<p>const 声明的限制只适用于它指向的变量的引用（内存地址），换句话说，如果 const 变量引用的是一个对象，那么修改这个对象内部的属性并不违反 const 的限制</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Matt&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="property">age</span> = <span class="number">19</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这是因为 const 指向的是这个对象的地址，对象并没有消失，指向对象的地址也就没有改变。改变的只是对象中的值（对象内存中的值）</p>
</blockquote>
<h1>3.  var, let, const 区别</h1>
<p>有了 let 和 const 可以更好的限制变量的作用域，尽量使用 const 和 let，不要再使用 var</p>
<ul>
<li>数组、集合可以使用 const</li>
<li>普通变量用 let</li>
</ul>
<table>
<thead>
<tr>
<th>var</th>
<th>let</th>
<th>const</th>
</tr>
</thead>
<tbody>
<tr>
<td>函数级作用域</td>
<td>块级作用域</td>
<td>块级作用域</td>
</tr>
<tr>
<td>变量提升</td>
<td>不存在变量提升</td>
<td>不存在变量提提升</td>
</tr>
<tr>
<td>值可以更改</td>
<td>值可以更改</td>
<td>值不可以更改</td>
</tr>
</tbody>
</table>
<h1>4. 解构赋值</h1>
<p>ES6 中允许从数组中提取值，按照对应位置，对变量赋值，对象也可以实现解构。</p>
<h2 id="4-1-数组解构">4.1. 数组解构</h2>
<p>数组解构允许我们按照一一对应的关系从数组中提取值，在 ES6 之前，我们用 for 循环进行解构。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> arr2 = [a,b,c]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">3</span>; i++)&#123;</span><br><span class="line">    arr2[i] = arr1[i]</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">cosnole.<span class="title function_">log</span>(a);</span><br><span class="line">cosnole.<span class="title function_">log</span>(b);</span><br><span class="line">cosnole.<span class="title function_">log</span>(c);</span><br></pre></td></tr></table></figure>
<p>如果解构不成功，变量值为 undefined，经常出现于解构数量与数组中对应数量不符：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 右边数组为空数组，没有对应值给 foo</span></span><br><span class="line"><span class="keyword">let</span> [foo] = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// 右边数组中只有一个值，bar 为 1，没有对应数据给 foo， foo 为 undefined</span></span><br><span class="line"><span class="keyword">let</span> [bar, foo] = [<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 右边数组为多个值，左侧比右侧少，则按照左侧数量传值</span></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果需要传指定位置的值，左侧需要用,分隔占位</span></span><br><span class="line"><span class="keyword">let</span> [a,,c]  = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>参数中解构数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 相当于传入 x,y,z</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">[x,y,z]</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x+y+z)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"><span class="title function_">f3</span>(arr)</span><br></pre></td></tr></table></figure>
<p>函数参数使用解构，必须传入对应参数，如果少传参数，没有传参数的变量为 undefined，如果多传则舍弃多余的变量，如果都不传则会报错。如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">[x,y,z] = []</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x+y+z)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="title function_">fn</span>(arr)</span><br></pre></td></tr></table></figure>
<p>为了解决报错的问题，可以设置默认值，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传入参数方法1：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">[x=<span class="number">1</span>,y=<span class="number">2</span>,z=<span class="number">3</span>] = []</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x+y+z)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"><span class="title function_">fn</span>(arr)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果没有传入参数，则使用默认 [1,2,3]</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传入参数方法2：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">[x,y,z] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x+y+z)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"><span class="title function_">fn</span>(arr)</span><br></pre></td></tr></table></figure>
<p>通过数组解构，对于数组内部值的交换就更简单了。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">[a, b] = [b, a];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b);</span><br></pre></td></tr></table></figure>
<h2 id="4-2-对象解构">4.2 对象解构</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;zhangsan&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用变量匹配属性（属性名需要一致）</span></span><br><span class="line"><span class="keyword">let</span> &#123; name, age &#125; = person;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// &#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;zhangsan&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// myName，myAge 属于别名</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">name</span>: myName, <span class="attr">age</span>: myAge &#125; = person;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myName); <span class="comment">// &#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myAge); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>对象中属性和方法是无序的，所以如果取值数量少于对象属性和方法数量，不需要使用逗号占位。想取什么就写什么就可以了。</p>
</blockquote>
<p>对象参数传递解构</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// function fn(&#123;age, sex, say&#125;)&#123;</span></span><br><span class="line"><span class="comment">// function fn(&#123;age, sex, say&#125;=&#123;&#125;)&#123;</span></span><br><span class="line"><span class="comment">// function fn(&#123;age=30, sex=&quot;male&quot;, say&#125;=&#123;&#125;)&#123;  // 默认值 + 空对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">&#123;age, sex, say&#125; = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">20</span>, <span class="string">&quot;sex&quot;</span>:<span class="string">&quot;male&quot;</span>&#125;</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age, sex, say);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">30</span>, <span class="string">&quot;sex&quot;</span>:<span class="string">&quot;male&quot;</span>, <span class="string">&quot;say&quot;</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123; <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>&#125;&#125;;</span><br><span class="line"><span class="title function_">f3</span>(obj);</span><br><span class="line"><span class="title function_">f3</span>()</span><br></pre></td></tr></table></figure>
<h1>5. 箭头函数</h1>
<p>ES6 新增的定义函数的方式。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">() =&gt; &#123;&#125; <span class="comment">// 相当于 function () &#123;&#125;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;&#125;  <span class="comment">// 相当于 fn = function() &#123;&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>() 函数参数括号</li>
<li>{} 函数体</li>
</ul>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>();</span><br></pre></td></tr></table></figure>
<p>如果函数体重只有一句话代码，且代码的执行结果就是返回值，可以省略大括号，如：</p>
<p>正常书写：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span> (num1, num2)&#123;</span><br><span class="line">    <span class="keyword">return</span> num1+num2</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"></span><br><span class="line">sum = <span class="keyword">function</span>(<span class="params">num1, num2</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>箭头函数书写：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (num1, num2) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简化版本：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">num1, num2</span>) =&gt; num1 + num2</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>如果形参只有一个，可以省略小括号，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cosnt fn = <span class="function"><span class="params">v</span> =&gt;</span> v </span><br><span class="line"></span><br><span class="line"><span class="comment">// 正常写法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">v</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当返回值是对象的时，需要加上小括号或者直接用 return 写法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; (&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;zhangsan&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">19</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;zhangsan&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">19</span>&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>箭头函数的应用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>相当于原来的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;点击&quot;</span> id=<span class="string">&quot;btn&quot;</span> /&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>还可以作为回调函数使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">f6</span> = (<span class="params">f</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f</span>(<span class="number">100</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// f6(a=&gt;a);</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">f7</span> = a=&gt;a;</span><br><span class="line"><span class="title function_">f6</span>(f7);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<h2 id="5-1-箭头函数中的-this">5.1. 箭头函数中的 this</h2>
<p>箭头函数不绑定 this 关键字，箭头函数中的 this 指向的是函数定义位置的上下文 this</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 默认函数this指向window</span></span><br><span class="line">    <span class="comment">// 通过 call 命令这里的this指向obj</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 默认函数this指向window</span></span><br><span class="line">    <span class="comment">// 这里是箭头函数，箭头函数所在位置中，this 的指向就是箭头函数的 this 指向</span></span><br><span class="line">    <span class="comment">// 箭头函数被定义在 fn() 中，fn() 的 this 指向是 obj</span></span><br><span class="line">    <span class="comment">// 所以箭头函数的 this 也是 obj</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> resFn = fn.<span class="title function_">call</span>(obj);</span><br><span class="line"><span class="title function_">resFn</span>();</span><br></pre></td></tr></table></figure>
<p>对象方法中的箭头函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">say</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// obj 没有作用域</span></span><br><span class="line">        <span class="comment">// this 指向 window</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// obj 中的方法有作用域，这里的 this 指向 obj</span></span><br><span class="line">    <span class="attr">hi</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">        <span class="comment">// 这里根据上下文，因为方法里边的函数中 this指向 obj，</span></span><br><span class="line">        <span class="comment">// 所以 f1 里边的箭头函数中的 this 也指向 obj</span></span><br><span class="line">        <span class="keyword">var</span> <span class="title function_">f1</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="title function_">f1</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="title function_">say</span>();</span><br><span class="line">obj.<span class="title function_">hi</span>();</span><br></pre></td></tr></table></figure>
<p>obj 是一个对象，而对象是没有作用域的，所以这里的箭头函数中的 this 实际上指向的是在全局作用域中的this，而全局作用域的 this 是 window，所以这里的 this 是 window。window 下当然没有 age 属性，所以报 undefined</p>
<p>如果在全局下定义一个变量 age，那么这回就会显示 100了</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>;</span><br><span class="line">    <span class="attr">say</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure>
<p>箭头函数的优点：</p>
<ul>
<li>书写简单</li>
<li>不绑定 this</li>
<li>支持默认参数、剩余参数、解构</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">f1</span> = (<span class="params">x=<span class="number">1</span>, y</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f1</span>(<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">f2</span> = (<span class="params">...x</span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f2</span>(<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">f3</span> =(<span class="params">[x,y]=[]</span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>箭头函数的缺点：</p>
<ul>
<li>不能做构造函数</li>
<li>不能用 new 实例化</li>
<li>没有 prototype 属性</li>
<li>不能用 arguments</li>
</ul>
<h1>6. 剩余参数</h1>
<p>ES5 中，可以再函数内部使用 arguments 获取函数传过来的所有参数，以伪数组形式呈现，ES6 中提供的剩余参数语法允许我们将一个不定数量的参数表示为一个数组。剩余参数用 <code>...args</code> 表示。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span> (first, ...args) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(first);  <span class="comment">// 10</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(args);  <span class="comment">// [20, 30]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">    args.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (total += item));</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>));</span><br></pre></td></tr></table></figure>
<p>剩余参数和结构配合使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> students = [<span class="string">&quot;zs&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;ww&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> [s1, ...s2] = students;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1); <span class="comment">// &#x27;zs&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s2); <span class="comment">// [&#x27;ls&#x27;, &#x27;ww&#x27;]</span></span><br></pre></td></tr></table></figure>
<h1>7. 函数的默认值</h1>
<p>ES6 支持了函数默认值的写法，在 ES5 中如果我们要实现这个功能的话，可以这样写：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">username</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> username = username || <span class="string">&#x27;lisi&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果不传参数，username 是 undefined，在函数内部重新赋值，给其值</span></span><br><span class="line"><span class="title function_">fn</span>();</span><br><span class="line"><span class="title function_">fn</span>(<span class="string">&#x27;zhangsan&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>ES6 中</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">username = <span class="string">&#x27;lisi&#x27;</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>()</span><br><span class="line"><span class="title function_">fn</span>(<span class="string">&#x27;zhangsan&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1>8. 字面量创建对象（ES6简化）</h1>
<p>在之前的版本中用字面量创建对象，需要完整的写出属性名和对应值，在 ES6 中如果属性值已经在外部作用域定义好了，并且变量名和属性名一样，那么就可以使用简化写法：</p>
<ul>
<li>属性值可以省略</li>
<li>方法可以直接使用简化写法</li>
<li>可以指定原型对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;zx&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">36</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传统定义方式</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: name,</span><br><span class="line">    <span class="attr">age</span>: age,</span><br><span class="line">    <span class="attr">say</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 简化写法</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="title function_">coding</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;abcde&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    <span class="comment">// 可以指定原型对象</span></span><br><span class="line">    <span class="attr">__proto__</span>: person,</span><br><span class="line">    name,</span><br><span class="line">    age,</span><br><span class="line">    <span class="comment">// 方法简化写法</span></span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1);</span><br><span class="line">obj1.<span class="title function_">coding</span>();</span><br></pre></td></tr></table></figure>
<h1>9. Symbol 数据类型</h1>
<p>ES6 新增了一种数据类型：Symbol，表示独一无二的值，Symbol 最大的用途是用来定义对象的唯一属性名。</p>
<p>使用 Symbol() 创建 symbol 数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> symbol1 = <span class="title class_">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数没有意义，只是对 Symbol 加了一个标记</span></span><br><span class="line"><span class="keyword">var</span> symbol2 = <span class="title class_">Symbol</span>(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbol1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbol2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Symbol 是独一无二的</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbol1 == symbol2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Symbol</span>() == <span class="title class_">Symbol</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="title class_">Symbol</span>()</span><br><span class="line"><span class="title class_">Symbol</span>(<span class="title class_">Alice</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>创建 symbol 数据的作用就是为了防止重复，比如对象中成员名。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">40</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;zs&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;male&quot;</span>,</span><br><span class="line">    <span class="comment">// 创建独一无二的属性，避免和之前同名的重复</span></span><br><span class="line">    <span class="comment">// [] 是为了执行里边的代码</span></span><br><span class="line">    [<span class="title class_">Symbol</span>(score)]: <span class="string">&quot;100&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// obj[say] = 100</span></span><br></pre></td></tr></table></figure>
<h1>10. Array 的扩展方法</h1>
<h2 id="10-1-…-扩展运算符">10.1. … 扩展运算符</h2>
<p>扩展运算符可以将数组或者对象转为用逗号分割的参数序列。</p>
 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">...arr <span class="comment">// 1,2,3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逗号被当做 console.log 的参数，输出多个元素用，分割</span></span><br><span class="line">cosnole.<span class="title function_">log</span>(...arr);  <span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>
<p>扩展运算符可以应用于合并数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> arr3 = [...arr1,...arr2];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> arr1.<span class="title function_">push</span>(...arr2);</span><br></pre></td></tr></table></figure>
<p>给函数传参数，将数组内变量依次传入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">x,y</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="comment">// 普通方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f1</span>(arr[<span class="number">0</span>]), arr[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 apply</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f1.<span class="title function_">apply</span>(<span class="literal">null</span>, arr))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用...扩展运算符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f1</span>(...arr))</span><br></pre></td></tr></table></figure>
<h2 id="10-2-Array-from">10.2. Array.from()</h2>
<p>伪数组虽然类似于数组，可以遍历，但是数组对象中的一些方法无法使用，如果想让伪数组使用数组对象中的一些方法，那么就需要将伪数组转换为真正的数组。</p>
<ol>
<li>使用…将伪数组转为数组</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> divs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(divs);</span><br><span class="line">divs = [...divs];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(divs);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>使用 Array.from()</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">    <span class="number">0</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">    <span class="number">2</span>: <span class="string">&quot;c&quot;</span>,</span><br><span class="line">    <span class="attr">length</span>: <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike);  <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>Array.from() 还可以接受第二个参数，作用类似于数组的 map 方法，用来对每个元素进行处理，将处理后的值放入返回的数组。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">    <span class="number">0</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">    <span class="number">2</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">    <span class="attr">length</span>: <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike, <span class="function"><span class="params">item</span>=&gt;</span>item*<span class="number">2</span>);   <span class="comment">//[2,4,6]</span></span><br></pre></td></tr></table></figure>
<h2 id="10-3-find">10.3. find()</h2>
<p>用于找出第一个符合条件的数组成员，如果没找到则返回 undefined。接受一个函数，通过函数后，函数返回值是布尔值，布尔值为真的 item 被储存在新的数组中。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ary = [&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">&#125;,&#123;</span><br><span class="line">    <span class="attr">id</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;ls&#x27;</span></span><br><span class="line">&#125;]</span><br><span class="line"><span class="keyword">let</span> target = ary.<span class="title function_">find</span>(<span class="function">(<span class="params">item, index</span>)=&gt;</span>item.<span class="property">id</span> ==<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h2 id="10-4-findIndex">10.4. findIndex()</h2>
<p>用于找出第一个复合条件的数组成员的位置，如果没找到返回 -1</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>];</span><br><span class="line"><span class="keyword">let</span> index = arr.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">value, index</span>) =&gt;</span> value &gt; <span class="number">9</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br></pre></td></tr></table></figure>
<h2 id="10-5-includes">10.5. includes()</h2>
<p>表示某个数组是否包含给定的值，返回布尔值。在 ES6 之前使用的是 indexOf 来进行判断，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">indexOf</span>(<span class="number">5</span>));  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>ES6 的新方法 include() 更加简单明了，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ret = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">includes</span>(<span class="number">2</span>)  <span class="comment">// true</span></span><br><span class="line">ret = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">includes</span>(<span class="number">4</span>)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="10-6-for…of-遍历">10.6. for…of 遍历</h2>
<p>for…of 与 for…in 类似，for…in 是以下标遍历，而 for…of 是以值来遍历的。for…of 还可以遍历字符串，但是不能遍历对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> team = [<span class="string">&#x27;zs&#x27;</span>,<span class="string">&#x27;ls&#x27;</span>,<span class="string">&#x27;ww&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">of</span> team)&#123;  <span class="comment">// i 是值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">zs</span><br><span class="line">ls</span><br><span class="line">ww</span><br></pre></td></tr></table></figure>
<h1>9. String 的扩展方法</h1>
<h2 id="9-1-模板字符串">9.1 ` 模板字符串</h2>
<p>ES6 新增的创建字符串的方式，使用反引号定义。模板字符串有很多优点：</p>
<ul>
<li>可以解析变量</li>
<li>可以多行赋值</li>
<li>可以调用函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 解析变量</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> sayHello = <span class="string">`他叫<span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sayHello);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 还可以换行，注意需要顶格写，不然空格也会被解析出来</span></span><br><span class="line"><span class="keyword">let</span> sayHello = <span class="string">`他叫<span class="subst">$&#123;name&#125;</span></span></span><br><span class="line"><span class="string">还有谁？？</span></span><br><span class="line"><span class="string">哈哈`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sayHello);</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;zs&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;male&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> html = <span class="string">`&lt;div&gt;</span></span><br><span class="line"><span class="string">&lt;span&gt;<span class="subst">$&#123;data.name&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;span&gt;<span class="subst">$&#123;data.age&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;span&gt;<span class="subst">$&#123;data.sex&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;`</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(html);</span><br></pre></td></tr></table></figure>
<p>模板字符串还可以调用函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hellow world&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ` 可以调用函数</span></span><br><span class="line"><span class="keyword">let</span> greet = <span class="string">`<span class="subst">$&#123;fn()&#125;</span> 你好世界`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greet);</span><br></pre></td></tr></table></figure>
<h2 id="9-2-startWith-和-endWith">9.2. startWith 和 endWith</h2>
<ul>
<li>startsWith() 表示参数字符串是否在原字符串的头部，返回布尔值</li>
<li>endsWith() 表示参数字符串是否在原字符串的尾部，返回布尔值</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">startsWith</span>(<span class="string">&quot;H&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">startsWith</span>(<span class="string">&quot;Hello&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">endsWith</span>(<span class="string">&quot;D&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">endsWith</span>(<span class="string">&quot;world&quot;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="9-3-repeat">9.3. repeat()</h2>
<p>repeat 方法表示将原字符串重复 n 次，返回一个新字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;x&#x27;</span>.<span class="title function_">repeat</span>(<span class="number">3</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str1)  <span class="comment">// &#x27;xxx&#x27;</span></span><br><span class="line"></span><br><span class="line">str2 = <span class="string">&#x27;hello&#x27;</span>.<span class="title function_">repeat</span>(<span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str2)  <span class="comment">// &#x27;hellohello&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1>9. Set 数据结构</h1>
<p>ES6 提供了新的数据结构 Set，类似于数组，但是成员之都是唯一的，没有重复的值。</p>
<h2 id="9-1-去重">9.1. 去重</h2>
<p>Set 本身是一个构造函数，用来生成 Set 数据结构</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br></pre></td></tr></table></figure>
<p>Set 函数可以接受一个数组作为参数，用来初始化，如参数中有重复成员，则会去掉多余的重复成员，只保留一个</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set);  <span class="comment">// [1,2,3,5] 注意，这里 set 已经不是数组数据类型了</span></span><br></pre></td></tr></table></figure>
<p>可以使用 Set 的属性 size 来查看集合中的成员数量（注意不是 length ）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="property">size</span>);  <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<p>例：判断数组中是否有重复元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">1</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>(arr)</span><br><span class="line"><span class="keyword">if</span> (arr.<span class="property">length</span> != set.<span class="property">size</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-2-将-Set-转换为数组">9.2. 将 Set 转换为数组</h2>
<p>可以使用我们的扩展运算符 <code>...</code> 来进行转换</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="keyword">const</span> arr = [...set]</span><br></pre></td></tr></table></figure>
<h2 id="9-3-Set-方法">9.3. Set 方法</h2>
<p>以下所有方法都是在原set基础上进行操作，返回值为 set 本身。</p>
<ul>
<li>add(value) 添加某个值，返回 Set 结构本身</li>
<li>delete(value) 删除某个值，返回一个布尔值，表示删除是否成功</li>
<li>has(value) 返回一个布尔值，表示是否为 Set 成员</li>
<li>clear() 清除所有成员，没有返回值</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 向 set 结构添加值</span></span><br><span class="line">s.<span class="title function_">add</span>(<span class="number">1</span>).<span class="title function_">add</span>(<span class="number">2</span>).<span class="title function_">add</span>(<span class="number">3</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除 set 结构的值</span></span><br><span class="line">s.<span class="title function_">delete</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表示 set 结构是否有1这个值</span></span><br><span class="line">s.<span class="title function_">has</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除 set 结构中所有的值</span></span><br><span class="line">s.<span class="title function_">clear</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="9-4-遍历-set">9.4. 遍历 set</h2>
<p>set 结构的实例与数组一样，也拥有 forEach 方法，用于对每个成员执行某种操作，没有返回值。</p>
<p>注意，这里的 forEach 没有 index</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">s = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>]);</span><br><span class="line">s.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1>ES6 模块化</h1>
<p>模块化就是将一个大程序拆分成互相依赖的小文件，再用简单的方法拼装起来。ES6中首次引入模块化开发规范ES Module，让Javascript首次支持原生模块化开发，ES Module 把一个文件当作一个模块，每个模块有自己的独立作用域。通过 import 和 export 进行模块的导入或导出。</p>
<p>如果之前接触过 Node.js 的话，可能已经了解过 Node 模块化的导入和导出：</p>
<p>node.js 遵循了 CommonJS 模块化规范，其中：</p>
<ul>
<li>导入其他模块使用 require() 方法</li>
<li>模块对外共享成员使用 module.exports 对象</li>
</ul>
<p>遵循模块化规范开发的好处：</p>
<ul>
<li>大家都遵守同样的模块化规范写代码，降低沟通成本，极大方便了各个模块之间的相互调用。</li>
</ul>
<p>在 ES6 模块化规范诞生之前， Javascript 社区已经尝试并提出了 AMD, CMD, CommonJS 等模块化规范。但是这些由社区提出的模块化标准，存在一定的差异性和局限性、并不是浏览器和服务器通用的模块化标准，如：</p>
<ul>
<li>AMD 和 CMD 适用于浏览器端的 Js 模块化</li>
<li>CommonJS 适用于服务器端的 Js 模块化</li>
</ul>
<blockquote>
<p>ES6 模块化规范是浏览器与服务器端通用的模块化开发规范，开发者不用再去学习 AMD, CMD, CommonJS 等模块化规范</p>
</blockquote>
<p>ES6 模块化规范定义：</p>
<ul>
<li>每个 js 文件都是一个独立的模块</li>
<li>导入其他模块成员使用 import 关键字</li>
<li>向外共享模块使用 export 关键字</li>
</ul>
<h2 id="1-Node-js-中体验-ES6-模块化">1. Node.js 中体验 ES6 模块化</h2>
<p>node.js 中默认仅支持 CommonJS 模块化规范，若想基于 node.js 体验与学习 ES6 模块化语法，可以按照如下两个步骤进行配置</p>
<ul>
<li>确保安装了 v14.15.1 或更高版本的 node.js
<ul>
<li>node -v 查看版本</li>
</ul>
</li>
<li>在 package.json 的根节点中添加 <code>&quot;type&quot;: &quot;module&quot;</code> 节点</li>
</ul>
<p>初始化项目，会自动创建 package.json 文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>添加 type 节点</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="2-ES6-模块化基本语法">2. ES6 模块化基本语法</h2>
<p>ES6 模块化主要包含如下 3种用法：</p>
<ul>
<li>默认导出与默认导入</li>
<li>按需导出与按需导入</li>
<li>直接导入并执行模块中的代码</li>
</ul>
<h3 id="2-1-默认导出">2.1 默认导出</h3>
<p>默认导出的语法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default 默认导出的成员</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> n1 = <span class="number">10</span> <span class="comment">// 定义模块私有成员 n1</span></span><br><span class="line"><span class="keyword">let</span> n2 = <span class="number">20</span> <span class="comment">// 定义模块私有成员 n2 （外界访问不到 n2，因为它没有被共享出去）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>) &#123;&#125; <span class="comment">// 定义模块私有方法 show</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 export default 默认导出语法，向外共享 n1 和 show 两个成员</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  n1,</span><br><span class="line">  show,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>每个模块中，只允许使用唯一一次 export default 进行导出，否则会报错</p>
</blockquote>
<h3 id="2-2-默认导入">2.2 默认导入</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import 接收名称 from &#x27;模块标识符&#x27;</span><br></pre></td></tr></table></figure>
<p>例 demo.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从 showJS.js 模块中导入 export default 向外共享的成员</span></span><br><span class="line"><span class="comment">// 并用 m1 成员进行接收</span></span><br><span class="line"><span class="keyword">import</span> m1 <span class="keyword">from</span> <span class="string">&#x27;./showJS.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>默认导入时接收的成员名可以任意命名，只要符合命名规范即可。</p>
</blockquote>
<p>在控制台执行 js</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">node demo.js</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; n1: 10, show: [Function: show] &#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-按需导出">2.3 按需导出</h3>
<p>按需导出可以多次进行成员导出</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 向外导出指定变量与方法</span></span><br><span class="line"><span class="comment">// 每个变量与方法需要单独导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> s1 = <span class="number">10</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> s2 = <span class="number">20</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">say</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-4-按需导入">2.4 按需导入</h3>
<p>按需导入时，导入的成员名称必须和按需导出的名称保持一致</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从 js 文件中导入所需变量或方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; s1, s2, say &#125; <span class="keyword">from</span> <span class="string">&#x27;./02.export.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s2)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(say)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果有名称冲突的话，可以使用 as 关键字进行重命名</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; s1 <span class="keyword">as</span> str1, s2, say &#125; <span class="keyword">from</span> <span class="string">&#x27;./02.export.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str1)</span><br></pre></td></tr></table></figure>
<p>按需导出可以和默认导出一起使用，可以导出按需导出的成员，也可以直接定义</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> s1 = <span class="number">10</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> s2 = <span class="number">20</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">say</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  s1,</span><br><span class="line">  s2,</span><br><span class="line">  say,</span><br><span class="line">  <span class="attr">a</span>: <span class="number">20</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>导入时，默认导入与按需导入用逗号分隔</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> info, &#123; s1, s2, say &#125; <span class="keyword">from</span> <span class="string">&#x27;./02.export.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s2)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(say)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-5-直接导入">2.5 直接导入</h3>
<p>如果只想单纯的执行某个模块中的代码，并不需要得到模块中向外共享的成员，此时，可以直接导入并执行模块代码，实例代码如下：</p>
<p>代码模块 loop.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i&lt;<span class="number">3</span>; i++)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 test.js 文件中直接导入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> loop.<span class="property">js</span></span><br></pre></td></tr></table></figure>
<h1>Promise</h1>
<h2 id="1-同步和异步">1. 同步和异步</h2>
<p>Javascirpt 是一门单线程的编程语言，也就是说同一时间只能做一件事。当执行队列任务时，如果前一个任务耗时严重，就会造成后续任务不得不等待，从而导致程序假死问题。为了防止某个耗时任务导致程序假死的问题，Javascript 把待执行的任务分为两类：</p>
<ul>
<li>
<p>同步任务</p>
</li>
<li>
<p>异步任务</p>
</li>
<li>
<p>同步可以理解为顺序执行，当碰到一个耗时比较长的操作，主线程会一直等待该操作完成再执行下边的代码</p>
</li>
<li>
<p>异步可以理解为同时执行，当碰到一个耗时比较常的操作，主线程不会等待，继续执行下边的代码（同时耗时程序也在继续执行）</p>
</li>
</ul>
<h3 id="1-1-同步">1.1 同步</h3>
<p>同步任务 (synchronous) 又叫做非耗时任务，指主线程上排队执行的那些任务，只有前一个任务执行完毕，才能执行下一个任务。如一个进程在执行某个请求的时候，若该请求需要一段时间才能返回信息，那么这个进程将会一直等待下去，直到收到返回信息才继续执行下去；</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span> (x, y) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sub</span> (x, y) &#123;</span><br><span class="line">    <span class="keyword">return</span> x - y</span><br><span class="line">&#125;</span><br><span class="line">add (a, b)</span><br><span class="line">sub (a, b)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>由上到下依次执行，add() 函数执行完毕后再执行 sub()</p>
</blockquote>
<h3 id="1-2-异步">1.2 异步</h3>
<p>异步任务(asynchronous) 又叫做耗时任务，是指进程不需要一直等下去，而是继续执行下面的操作，不管其他进程的状态。当有消息返回时系统会通知进程进行处理，这样可以提高执行的效率。当异步任务执行完成后，会通知 Javascript 主线程执行异步任务的回调函数。异步任务由 Javascript 委托给宿主环境进行执行，</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;程序1秒后进行输出&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;程序2秒后进行输出&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;程序3秒后进行输出&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">3000</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>程序开时候，3个定时器同时启动，分别在第一秒，第二秒，第三秒进行了 console.log 输出</p>
</blockquote>
<h3 id="1-3-执行顺序">1.3 执行顺序</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/16.jpg" alt="image-20211020235124888"></p>
<ul>
<li>同步任务由 JS 主线程次序执行</li>
<li>异步任务委托给宿主环境执行</li>
<li>已完成的异步任务对应的回调函数，会被加入到任务队列中等待执行</li>
<li>JS 主线程的任务栈被清空后，会读取任务列表中的回调函数，次序执行</li>
<li>JS 主线程会不断重复上边第四步</li>
</ul>
<p>面试题：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> thenFs <span class="keyword">from</span> <span class="string">&#x27;then-fs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;C&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>执行结果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ADCB</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>A 和 D 属于同步任务，会根据代码的先后顺序依次被执行</li>
<li>C 和 B 属于异步任务，他们的回调函数会被加入到任务队列中，等待主线程空闲再执行，setTimeOut 由于是 0 秒执行，所以排在 B 前边</li>
</ul>
</blockquote>
<h2 id="1-回调地狱">1. 回调地狱</h2>
<p>如果想让异步代码，按照特定的顺序来执行，就需要将异步函数进行嵌套，造成了回调地狱，实例代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;延迟 1 秒后输出&#x27;</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;再延迟 2 秒后输出&#x27;</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;再延迟 3 秒后输出&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>回调地狱的缺点：</p>
<ul>
<li>代码耦合性太强，难以维护</li>
<li>大量的冗余代码互相嵌套，可读性差</li>
</ul>
<p>为了解决回调地狱的问题，ES6 新增了 Promise 的概念</p>
<h2 id="2-Promise-的基本概念">2. Promise 的基本概念</h2>
<p>ES6 中出现了一个新的方法，叫做 Promise， Promise 是一个构造函数，它本身并不是异步，但是它的内部往往是异步函数。可以把 Promise 看做成一个容器：容器中存放了一个异步任务，任务有3种状态：</p>
<ul>
<li>pending</li>
<li>resolved</li>
<li>rejected</li>
</ul>
<p>当开始执行容器内部的异步操作时，任务状态处于 pending，当任务执行完毕后，状态变为 resolved，如果任务失败，状态为 rejected</p>
<p>Promise 是一个构造函数，我们可以通过 new 关键字创建出一个实例，其中 Promise 构造函数的参数是一个 function，我们将具体的异步操作定义到这个 function 内部，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>)&#123;</span><br><span class="line">    <span class="comment">// 异步函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="comment">// 如果失败，将状态从 pending 改为 rejected</span></span><br><span class="line">            reject (err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 如果成功，将状态从 pending 改为 resolved</span></span><br><span class="line">            resolve (data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>创建的实例对象，代表一个异步操作</p>
</blockquote>
<h2 id="3-then">3. then</h2>
<p>Promise.prototype 上包含一个 .then() 的方法</p>
<ul>
<li>每一次 new Promise() 构造函数得到的实例对象，都可以通过原型链的方式访问到 .then() 方法</li>
</ul>
<p>.then() 方法用来预先指定成功或失败的回调函数</p>
<ul>
<li><code>p.then(成功的回调函数, 失败的回调函数)</code></li>
<li><code>p.then(result =&gt; &#123;&#125;, error =&gt; &#123;&#125;)</code></li>
<li>调用 .then() 方法时，成功的回调函数是必选的，失败的回调函数是可选的</li>
</ul>
<h2 id="4-基于-then-按顺序读取文件">4. 基于 .then 按顺序读取文件</h2>
<p>在 node.js 中，实现按顺序读取 1.txt, 2.txt, 3.txt 文件内容，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取 1.txt</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./1.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err1, res1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err1) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err1.<span class="property">message</span>) <span class="comment">// 如果失败返回，并输出错误信息</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res1) <span class="comment">// 如果没有错误，输出</span></span><br><span class="line">  <span class="comment">// 然后读取 2.txt</span></span><br><span class="line">  fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./2.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err2, res2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err2) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err2.<span class="property">message</span>) <span class="comment">// 如果失败返回，并输出错误信息</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res2) <span class="comment">// 如果没有错误，输出</span></span><br><span class="line">    <span class="comment">// 然后读取 3.txt</span></span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./3.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err3, res3</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err3) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err3.<span class="property">message</span>) <span class="comment">// 如果失败返回，并输出错误信息</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res3) <span class="comment">// 如果没有错误，输出</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>形成回调地狱</p>
</blockquote>
<p>如果上一个 .then() 方法中返回一个新的 Promise 实例对象，则可以通过下一个 .then() 继续进行处理。通过 .then() 方法的链式调用，就解决了回调地狱问题。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="comment">// 如果失败，将状态从 pending 改为 rejected</span></span><br><span class="line">            <span class="title function_">reject</span>(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 如果成功，将状态从 pending 改为 resolved</span></span><br><span class="line">            <span class="title function_">resolve</span>(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  <span class="comment">// 这里 return 什么，后边 then 中 function 参数的 data 就是什么</span></span><br><span class="line">  <span class="comment">// 如果 return 的是一个 promise 对象，后边 then 中的 function 就是这个 promise 对象的 resolve 方法</span></span><br><span class="line">  <span class="comment">// 这个 p1.then(function...) 相当于就变成了 p1.then(p2).then(p3)，使用 data 参数只是为了拿到 promise 对象中</span></span><br><span class="line">  <span class="comment">// 异步函数的 resolve 处理结果，即 data</span></span><br><span class="line">    <span class="keyword">return</span> p2</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    <span class="keyword">return</span> p3</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>封装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pReadFile</span>(<span class="params">filePath</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(filePath, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="title function_">reject</span>(err)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">pReadFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">pReadFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>)</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">pReadFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="5-then-fs-包">5. then-fs 包</h2>
<p>刚才是我们自己封装的异步按顺序读取文件，npm 社区有一个 then-fs 包，支持基于 Promise 的方式读取文件内容，读取文件后，直接返回一个 Promise 对象。</p>
<p>安装 then-fs</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i then-fs -S</span><br></pre></td></tr></table></figure>
<p>调用 then-fs 提供的 readFile() 方法，可以异步的读取文件的内容，它的返回值是 Promise 的实例对象，因此可以直接调用 .then() 方法为每个 Promise 异步操作指定成功和失败之后的回调函数。实例代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> thenFs <span class="keyword">from</span> <span class="string">&#x27;then-fs&#x27;</span></span><br><span class="line">thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(res)&#125;, <span class="function"><span class="params">err</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)&#125;)</span><br><span class="line">thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(res)&#125;, <span class="function"><span class="params">err</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)&#125;)</span><br><span class="line">thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(res)&#125;, <span class="function"><span class="params">err</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)&#125;)</span><br></pre></td></tr></table></figure>
<p>此时文件读取完成，但是依然没有按照顺序读取，这是因为没有通过 .then 将三个异步操作链式连接起来</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> thenFs <span class="keyword">from</span> <span class="string">&#x27;then-fs&#x27;</span></span><br><span class="line"><span class="comment">// 返回值是 .b.txt 读取文件的 Promise 对象</span></span><br><span class="line">thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(</span><br><span class="line">    <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">      <span class="keyword">return</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line"><span class="comment">// 链式处理上一个返回的 Promise 对象</span></span><br><span class="line">  .<span class="title function_">then</span>(</span><br><span class="line">    <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">      <span class="keyword">return</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .<span class="title function_">then</span>(</span><br><span class="line">    <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="6-catch-捕获错误">6. catch 捕获错误</h2>
<p>在 Promise 的链式操作中如果发生了错误，可以使用 Promise.prototype.catch 方法进行捕获处理：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> thenFs <span class="keyword">from</span> <span class="string">&#x27;then-fs&#x27;</span></span><br><span class="line">thenFs</span><br><span class="line">  .<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="keyword">return</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="keyword">return</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="comment">// 通过 catch 对错误进行处理</span></span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>只要前边任何一个异步任务出现错误，那么 catch 就会捕获并进行处理，然后停止该任务链，如果不希望前边的错误导致后续的 .then 无法正常执行，则可以将 catch 调用提前，如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> thenFs <span class="keyword">from</span> <span class="string">&#x27;then-fs&#x27;</span></span><br><span class="line">thenFs</span><br><span class="line">  .<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"><span class="comment">// 通过 catch 对错误进行处理</span></span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="keyword">return</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="keyword">return</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>当 a.txt 读取文件失败时，那么 catch 会处理错误，处理完成后同样会返回一个 Promise 对象，所以 .then 可以继续执行接下来的任务</p>
</blockquote>
<h2 id="7-Promise-all-方法">7. Promise.all() 方法</h2>
<p>Promise.all() 方法会发起并行的 Promise 异步操作，等所有的异步操作全部结束后才会执行下一步的 .then 操作（等待机制）。示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 定义一个数组，存放 3 个读文件的异步操作</span></span><br><span class="line"><span class="keyword">const</span> promiseArr = [</span><br><span class="line">    thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>), </span><br><span class="line">    thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>), </span><br><span class="line">    thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 将 Promise 的数组，作为 Promise.all() 的参数</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>(promiseArr)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">[r1, r2, r3]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(r1, r2, r3)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>数组中的 Promise 实例的顺序就是最终结果的顺序</p>
</blockquote>
<h2 id="8-Promise-race-方法">8. Promise.race() 方法</h2>
<p>Promise.race() 方法会发起并行的 Promise 异步操作，只要任何一个异步操作完成，就立即执行下一步的 .then 操作（赛跑机制）。 示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 定义一个数组，存放 3 个读文件的异步操作</span></span><br><span class="line"><span class="keyword">const</span> promiseArr = [</span><br><span class="line">    thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>), </span><br><span class="line">    thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>), </span><br><span class="line">    thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 将 Promise 的数组，作为 Promise.race() 的参数</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>(promiseArr)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>只执行最先完成的异步操作</p>
</blockquote>
<h2 id="9-Async-和-Await">9. Async 和 Await</h2>
<p>Async 和 Await 是 ES8 引入的新语法，用来简化 Promise 异步操作，在 async / await 出现之前，开发者只能通过 .then 方式链式处理 Promise 异步操作。虽然解决了回调地狱的问题，但是代码依旧冗余，阅读性较差。通过 async / await 我们可以简化代码，使代码阅读更加流畅。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> thenFs <span class="keyword">from</span> <span class="string">&#x27;then-fs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 按照顺序读取文件</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getAllFile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> r1 = <span class="keyword">await</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r2)</span><br><span class="line">  <span class="keyword">const</span> r2 = <span class="keyword">await</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r2)</span><br><span class="line">  <span class="keyword">const</span> r3 = <span class="keyword">await</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>thenFs.readFile() 返回的是一个 Promise 对象，通过 await 关键字，将 Pormise 对象中的 resolve(data) 中的 data 提取出来</p>
<p>如果方法内部用到了 await，那么这个方法必须使用 async 来修饰</p>
</blockquote>
<h3 id="9-1-执行顺序">9.1 执行顺序</h3>
<p>在 async 方法中，第一个 await 之前的代码会同步执行，await 之后的代码会异步执行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> thenFs <span class="keyword">from</span> <span class="string">&#x27;then-fs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getAllFile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> r1 = <span class="keyword">await</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> r2 = <span class="keyword">await</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> r3 = <span class="keyword">await</span> thenFs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r1, r2, r3)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;D&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getAllFile</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;C&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>执行结果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">111 222 333</span><br><span class="line">D</span><br></pre></td></tr></table></figure>
<ul>
<li>顺序执行代码，先输出 A</li>
<li>调用 getAllFile() 函数，输出 B （同步执行）</li>
<li>发现 await，进行异步执行（先启动任务，等执行完毕再处理）</li>
<li>跳出函数，输出 C</li>
<li>函数执行完毕得到结果，输出 r1, r2, r3</li>
<li>输出 D</li>
</ul>
<h1>宏任务与微任务</h1>
<p>Javascript 把异步任务又做了进一步划分，异步任务又分为两类，分别是：</p>
<ul>
<li>宏任务（macrotask）
<ul>
<li>异步 Ajax 请求</li>
<li>setTimeout，setInterval</li>
<li>文件操作</li>
<li>其他宏任务</li>
</ul>
</li>
<li>微任务（microtask）</li>
<li>Promise.then, .catch 和 .finally</li>
<li>process.nextTick</li>
<li>其他微任务</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/17.jpg" alt="image-20211021000512205"></p>
<p>宏任务和微任务的执行顺序</p>
<p>每一个宏任务执行完毕后，都会检查是否存在待执行的微任务，如果有，则执行完所有的微任务之后再执行下一个宏任务</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.xwysyy.cn/img-md/img-syntax/javascript/18.jpg" alt="image-20211021000538330"></p>
<p>面试题1：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;D&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">B D A C</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>new Promise 是一个同步任务（不要和之前的 fs.readFile 搞混了，之前的 fs 模块才是异步任务）</li>
</ul>
</blockquote>
<p>面试题2：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;6&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;7&#x27;</span>)</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;8&#x27;</span>)</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">156234789</span><br></pre></td></tr></table></figure>
<blockquote>
<p>同步任务 1,5 先执行，然后先清空微任务队列 6，再继续执行剩下的宏任务</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Forece">Forece</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Forece">https://github.com/Forece</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">转载自https://github.com/Forece</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/syntax/">syntax</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/syntax/Python/" title="Python"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/53.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Python</div></div></a></div><div class="next-post pull-right"><a href="/syntax/HTML/" title="HTML"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/49.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">HTML</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/syntax/CSS/" title="CSS"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/53.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-24</div><div class="title">CSS</div></div></a></div><div><a href="/syntax/CSS%E7%AC%94%E8%AE%B0/" title="CSS笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/26.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-06</div><div class="title">CSS笔记</div></div></a></div><div><a href="/syntax/Git/" title="Git"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/35.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-02</div><div class="title">Git</div></div></a></div><div><a href="/syntax/HTML/" title="HTML"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/49.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-22</div><div class="title">HTML</div></div></a></div><div><a href="/syntax/LaTeX/" title="LaTeX"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/54.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-01</div><div class="title">LaTeX</div></div></a></div><div><a href="/syntax/MySQL/" title="MySQL"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/46.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-02</div><div class="title">MySQL</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="cols"><div class="col"><div class="container"><div class="front avatarPanel"><div class="inner"><div class="player-title">Attributes</div><div class="player-avatar"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E5%A4%B4%E5%83%8F.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div></div></div><div class="back attributesPanel"><div class="inner"><div class="player-lv">LV.3</div><div class="player-name">善良的xwysyy</div><div class="attributes-value"><div class="attributes-value-item"><a href="/archives/"><div class="attributes">文章</div><div class="value-bar"><div class="value-bar-fill" style="width:25.00%"><div class="value-bar-fill-in" style="background: rgba(89, 230, 54,0.6)"></div></div></div><span>25/100</span></a></div><div class="attributes-value-item"><a href="/tags/"><div class="attributes">标签</div><div class="value-bar"><div class="value-bar-fill" style="width:17.00%"><div class="value-bar-fill-in" style="background: rgba(224, 20, 20, 0.6)"></div></div></div><span>17/100</span></a></div><div class="attributes-value-item"><a href="/categories/"><div class="attributes">分类</div><div class="value-bar"><div class="value-bar-fill" style="width:7.00%"><div class="value-bar-fill-in" style="background: rgba(30, 97, 226, 0.6)"></div></div></div><span>7/100</span></a></div></div></div></div></div></div><div class="col"><div class="container"><div class="front descriptionPanel"><div class="inner"><div class="player_description"><p>一念净心 花开遍世界<br>每临绝境 峰回路又转<br>但凭净信 自在出乾坤<br>恰似如梦初醒 归途在眼前</p></div><div class="play-bottom"></div></div></div><div class="back buttonPanel"><div class="inner"><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xwysyy"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xwysyy" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/m0_73844376" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a><a class="social-icon" href="mailto:xwysyy@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div><div class="play-bottom"></div></div></div></div></div></div></div><div class="card-widget card-announcement"><div id="welcome-info"></div><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>welcome</span></div><div class="announcement_content"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">一、Javascript 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-JS-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1. JS 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-JS-%E7%BB%84%E6%88%90"><span class="toc-number">1.2.</span> <span class="toc-text">2. JS 组成</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">二、JS 基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-JS-%E5%B5%8C%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">1. JS 嵌入方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-JS-%E6%B3%A8%E9%87%8A"><span class="toc-number">2.2.</span> <span class="toc-text">2. JS 注释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-JS-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.3.</span> <span class="toc-text">3. JS 输入输出语句</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">三、变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%9A%E4%B9%89"><span class="toc-number">3.1.</span> <span class="toc-text">1. 定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F"><span class="toc-number">3.2.</span> <span class="toc-text">2. 声明变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%98%E9%87%8F"><span class="toc-number">3.3.</span> <span class="toc-text">3. 初始化变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%BE%93%E5%85%A5%E5%AD%98%E5%82%A8%E5%8F%98%E9%87%8F"><span class="toc-number">3.4.</span> <span class="toc-text">4. 输入存储变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%8F%98%E9%87%8F%E7%9A%84%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">3.5.</span> <span class="toc-text">5. 变量的命名规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%9F%A5%E7%9C%8B%E5%8F%98%E9%87%8F"><span class="toc-number">3.6.</span> <span class="toc-text">6. 查看变量</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">四、数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%95%B0%E5%AD%97%E5%9E%8B"><span class="toc-number">4.1.</span> <span class="toc-text">1. 数字型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%9E%8B"><span class="toc-number">4.2.</span> <span class="toc-text">2. 字符串型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%B8%83%E5%B0%94%E5%9E%8B"><span class="toc-number">4.3.</span> <span class="toc-text">3. 布尔型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-null-%E7%A9%BA%E5%80%BC"><span class="toc-number">4.4.</span> <span class="toc-text">4. null 空值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-undefined-%E6%9C%AA%E5%AE%9A%E4%B9%89"><span class="toc-number">4.5.</span> <span class="toc-text">5. undefined 未定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.6.</span> <span class="toc-text">6. 其他类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">4.7.</span> <span class="toc-text">7. 数据类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-typeof-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.7.1.</span> <span class="toc-text">7.1. typeof() 查看数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">4.7.2.</span> <span class="toc-text">7.2. 转换为字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%95%B0%E5%AD%97%E5%9E%8B"><span class="toc-number">4.7.3.</span> <span class="toc-text">7.3. 转换为数字型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%B8%83%E5%B0%94%E5%9E%8B"><span class="toc-number">4.7.4.</span> <span class="toc-text">7.4. 转换为布尔型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">五、Javascript 运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.1.</span> <span class="toc-text">1. 算数运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%80%92%E5%A2%9E%E9%80%92%E5%87%8F%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.2.</span> <span class="toc-text">2.  递增递减运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.3.</span> <span class="toc-text">3. 比较运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.4.</span> <span class="toc-text">4. 逻辑运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%9F%AD%E8%B7%AF"><span class="toc-number">5.4.1.</span> <span class="toc-text">4.1. 逻辑运算短路</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.5.</span> <span class="toc-text">5. 赋值运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">5.6.</span> <span class="toc-text">7. 运算符优先级</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">六、流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A1%BA%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="toc-number">6.1.</span> <span class="toc-text">1. 顺序结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%80%89%E6%8B%A9%E7%BB%93%E6%9E%84"><span class="toc-number">6.2.</span> <span class="toc-text">2. 选择结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-if-%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84"><span class="toc-number">6.2.1.</span> <span class="toc-text">2.1. if 分支结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">6.2.2.</span> <span class="toc-text">2.2. 三元运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Switch"><span class="toc-number">6.2.3.</span> <span class="toc-text">2.3. Switch</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.3.</span> <span class="toc-text">3. 循环</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-for-%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.3.1.</span> <span class="toc-text">3.1. for 循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%B5%8C%E5%A5%97%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.3.2.</span> <span class="toc-text">3.2. 嵌套循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-while-%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.3.3.</span> <span class="toc-text">3.3. while 循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-do-while-%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.3.4.</span> <span class="toc-text">3.4. do while 循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-continue-%E5%92%8C-break"><span class="toc-number">6.3.5.</span> <span class="toc-text">3.5. continue 和 break</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95"><span class="toc-number">6.3.6.</span> <span class="toc-text">3.6. 断点调试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">7.</span> <span class="toc-text">七、数组</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84"><span class="toc-number">7.1.</span> <span class="toc-text">1. 创建数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%AE%BF%E9%97%AE%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0"><span class="toc-number">7.2.</span> <span class="toc-text">2. 访问数组元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84"><span class="toc-number">7.3.</span> <span class="toc-text">3. 遍历数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6%E5%B1%9E%E6%80%A7-length"><span class="toc-number">7.4.</span> <span class="toc-text">4. 数组长度属性 length</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F"><span class="toc-number">7.5.</span> <span class="toc-text">6. 冒泡排序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">8.</span> <span class="toc-text">八、函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%A3%B0%E6%98%8E%E5%87%BD%E6%95%B0"><span class="toc-number">8.1.</span> <span class="toc-text">1. 声明函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">8.2.</span> <span class="toc-text">2. 函数参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-return-%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">8.3.</span> <span class="toc-text">3. return 返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%B8%8D%E5%AE%9A%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-number">8.4.</span> <span class="toc-text">4. 不定参数传递</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%87%BD%E6%95%B0%E4%B8%AD%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">8.5.</span> <span class="toc-text">5. 函数中调用函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">8.6.</span> <span class="toc-text">6. 匿名函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%B0%86%E5%87%BD%E6%95%B0%E5%BD%93%E5%81%9A%E5%8F%82%E6%95%B0"><span class="toc-number">8.7.</span> <span class="toc-text">7. 将函数当做参数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">9.</span> <span class="toc-text">九、作用域</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">10.</span> <span class="toc-text">十、解析机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A2%84%E7%BC%96%E8%AF%91"><span class="toc-number">10.1.</span> <span class="toc-text">1. 预编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%8A%A5%E9%94%99%E6%9C%BA%E5%88%B6"><span class="toc-number">10.2.</span> <span class="toc-text">2. 报错机制</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">11.</span> <span class="toc-text">十一、对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.1.</span> <span class="toc-text">1. 创建对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-number">11.2.</span> <span class="toc-text">2. 调用对象中的属性和方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.3.</span> <span class="toc-text">3. 构造函数创建对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-for%E2%80%A6in-%E9%81%8D%E5%8E%86%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.3.1.</span> <span class="toc-text">4. for…in 遍历对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.4.</span> <span class="toc-text">5. 内置对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Math-%E6%95%B0%E5%AD%A6%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.4.1.</span> <span class="toc-text">5.1. Math 数学对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Date-%E6%97%A5%E6%9C%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.4.2.</span> <span class="toc-text">5.2. Date 日期对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.4.3.</span> <span class="toc-text">5.3. 数组对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#new-Array-%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84"><span class="toc-number">11.4.3.1.</span> <span class="toc-text">new Array() 创建数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#isArray-%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E6%98%AF%E6%95%B0%E7%BB%84"><span class="toc-number">11.4.3.2.</span> <span class="toc-text">isArray() 验证是否是数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#push-%E5%9C%A8%E6%95%B0%E7%BB%84%E7%BB%93%E5%B0%BE%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0"><span class="toc-number">11.4.3.3.</span> <span class="toc-text">push() 在数组结尾添加元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unshift-%E5%9C%A8%E6%95%B0%E7%BB%84%E5%A4%B4%E9%83%A8%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0"><span class="toc-number">11.4.3.4.</span> <span class="toc-text">unshift() 在数组头部添加元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pop-%E5%88%A0%E9%99%A4%E6%95%B0%E7%BB%84%E6%9C%AB%E5%B0%BE%E5%85%83%E7%B4%A0"><span class="toc-number">11.4.3.5.</span> <span class="toc-text">pop() 删除数组末尾元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shift-%E5%88%A0%E9%99%A4%E6%95%B0%E7%BB%84%E8%B5%B7%E5%A7%8B%E5%85%83%E7%B4%A0"><span class="toc-number">11.4.3.6.</span> <span class="toc-text">shift() 删除数组起始元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reverse-%E6%95%B0%E7%BB%84%E9%80%86%E5%BA%8F"><span class="toc-number">11.4.3.7.</span> <span class="toc-text">reverse() 数组逆序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort-%E6%8E%92%E5%BA%8F"><span class="toc-number">11.4.3.8.</span> <span class="toc-text">sort() 排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#indexOf-lastIndexOf-%E9%80%9A%E8%BF%87%E5%80%BC%E8%8E%B7%E5%8F%96%E7%B4%A2%E5%BC%95"><span class="toc-number">11.4.3.9.</span> <span class="toc-text">indexOf(), lastIndexOf() 通过值获取索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#toString-%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">11.4.3.10.</span> <span class="toc-text">toString() 转字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#join-%E8%BF%9E%E6%8E%A5%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0"><span class="toc-number">11.4.3.11.</span> <span class="toc-text">join() 连接数组元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#concat-%E8%BF%9E%E6%8E%A5%E6%95%B0%E7%BB%84"><span class="toc-number">11.4.3.12.</span> <span class="toc-text">concat() 连接数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#slice-%E6%88%AA%E5%8F%96%E6%95%B0%E7%BB%84"><span class="toc-number">11.4.3.13.</span> <span class="toc-text">slice() 截取数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#splice-%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-number">11.4.3.14.</span> <span class="toc-text">splice() 删除元素</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.4.4.</span> <span class="toc-text">5.4. 字符串对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#indexOf-lastIndexOf-%E6%9F%A5%E6%89%BE%E5%AD%97%E7%AC%A6%E4%BD%8D%E7%BD%AE"><span class="toc-number">11.4.4.1.</span> <span class="toc-text">indexOf(), lastIndexOf() 查找字符位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#charAt-%E6%8C%89%E7%B4%A2%E5%BC%95%E8%BF%94%E5%9B%9E%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">11.4.4.2.</span> <span class="toc-text">charAt() 按索引返回字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#concat-%E6%8B%BC%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">11.4.4.3.</span> <span class="toc-text">concat() 拼接字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#substr-%E6%8C%89%E9%95%BF%E5%BA%A6%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">11.4.4.4.</span> <span class="toc-text">substr()  按长度截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#slice-%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">11.4.4.5.</span> <span class="toc-text">slice() 截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#substring-%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">11.4.4.6.</span> <span class="toc-text">substring() 截取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace-%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">11.4.4.7.</span> <span class="toc-text">replace() 替换字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#toUpperCase-toLowerCase-%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2"><span class="toc-number">11.4.4.8.</span> <span class="toc-text">toUpperCase(), toLowerCase() 大小写转换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-instanceof-%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.5.</span> <span class="toc-text">5.5 instanceof 判断对象</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">12.</span> <span class="toc-text">算法：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BA%A4%E6%8D%A2%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC"><span class="toc-number">12.1.</span> <span class="toc-text">1. 交换变量的值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BA%A4%E6%8D%A2%E6%95%B0%E7%BB%84%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC"><span class="toc-number">12.2.</span> <span class="toc-text">2. 交换数组变量的值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BA%A4%E6%8D%A2%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%80%BC"><span class="toc-number">12.3.</span> <span class="toc-text">3. 交换对象的值</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">13.</span> <span class="toc-text">-------------------------------</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">14.</span> <span class="toc-text">JS 与 浏览器交互</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">15.</span> <span class="toc-text">-------------------------------</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">16.</span> <span class="toc-text">Javascript 与 BOM&#x2F;DOM</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Web-API"><span class="toc-number">16.1.</span> <span class="toc-text">1. Web API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-BOM"><span class="toc-number">16.2.</span> <span class="toc-text">2. BOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-DOM"><span class="toc-number">16.3.</span> <span class="toc-text">3. DOM</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">17.</span> <span class="toc-text">查找 HTML DOM 元素</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-getElementByID"><span class="toc-number">17.1.</span> <span class="toc-text">1. getElementByID()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-getElementsByTagName"><span class="toc-number">17.2.</span> <span class="toc-text">2. getElementsByTagName()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-getElementsByClassName"><span class="toc-number">17.3.</span> <span class="toc-text">3. getElementsByClassName()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-getElementsByName"><span class="toc-number">17.4.</span> <span class="toc-text">4. getElementsByName()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-querySelector"><span class="toc-number">17.5.</span> <span class="toc-text">4. querySelector()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-querySelectorAll"><span class="toc-number">17.6.</span> <span class="toc-text">5. querySelectorAll()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%9F%A5%E6%89%BE-HTML-%E5%AF%B9%E8%B1%A1"><span class="toc-number">17.7.</span> <span class="toc-text">6. 查找 HTML 对象</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By 善良的xwysyy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="refresh-cache" type="button" title="刷新缓存" onclick="refreshCache()"><i class="fas fa-refresh"></i></button><button type="button" title="切换背景" onclick="toggleWinbox()"><i class="fas fa-display"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script></div><script src="/js/cursor.js" async></script><script src="/js/jquery.js"></script><script src="/js/foot.js"></script><script defer src="/live2d-widget-master/autoload.js"></script><script async data-pjax src="/js/txmap.js"></script><script async data-pjax src="/js/bb.js"></script><script async data-pjax src="/js/waterfall.js"></script><script src="/js/background.js"></script><script data-pjax>obcboPic()</script><script src="/js/weather.js"></script><script src="http://fw.qq.com/ipaddress"></script><script src="/js/visitor.js"></script><script src="/js/weibo.js"></script><script src="/js/rightside_button1.js"></script><script src="/js/rightside_button2.js"></script><div id="fps"></div><script async data-pjax src="/js/music1.js"></script><script async data-pjax src="/js/music2.js"></script><script async src="/js/music3.js"></script><script src="/js/refresh.js"></script><script src="/js/console.js"></script><script src="/js/pace.js"></script><script src="/js/welcome.js"></script><canvas id="universe"></canvas><script src="/js/universe.js"></script><script src="/js/nav.js"></script><script src="/js/sun_moon.js" async></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="cf题补了吗,ddl赶了吗,考试复习了吗,看完赶紧去学习,上课别看了" data-fontsize="20px" data-random="true" async="async"></script><link rel="stylesheet" href="/css/aplayer.css" media="print" onload="this.media='all'"><script src="/js/aplayer.js"></script><script src="/js/meting.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="nav-music"><div id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()"> </div><meting-js id="8265539094" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><div class="contact-info"><div class="option"><i class="fas fa-warning"> </i><div class="bloktop"></div><div class="text"><div class="strip"></div><div class="aside_notice"><h1>警钟长鸣</h1><br>严禁将重要信息（如：key、token、cookie）、标识性信息、隐私性信息上传 <center><h3>遵守网络法规</h3><h3>保护信息安全</h3><h3>尊重个人意愿</h3><h3>警惕隐私泄露</h3><h2>铭记：</h2><h3>源代码面前无秘密</h3><h3>网络流量面前无秘密</h3></center></div></div></div><div class="option"><i class="fas fa-cube"></i><div class="blok"></div><div class="text"><div class="strip"></div><div class="post-reward"><div class="reward-button"><i class="fa-solid fa-bolt"></i></div><div class="reward-main">
<ul class="reward-all">
<li class="reward-item"><a href="https://Li-j-z.github.io" target="_blank">
<img class="post-qr-code-img entered loaded" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.imgdb.cn/item/64181ed4a682492fccdf27fa.jpg" alt="Li-j-z的魔方小站"></a>
<div class="post-qr-code-desc">Li-j-z的魔方小站</div></li>
<li class="reward-item"><a href="https://www.cnblogs.com/xwysyy/" target="_blank">
<img class="post-qr-code-img entered loaded" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.imgdb.cn/item/6432d8ed0d2dde5777c73749.png" alt="xwysyy博客园"></a>
<div class="post-qr-code-desc">xwysyy博客园</div></li>
</ul></div></div></div></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:24%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover1.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/course/&quot;);" href="javascript:void(0);">course</a><span class="categoryBar-list-count">5</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover2.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/algorithm/&quot;);" href="javascript:void(0);">algorithm</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover3.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/note/&quot;);" href="javascript:void(0);">note</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/project/&quot;);" href="javascript:void(0);">project</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover5.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/tutorial/&quot;);" href="javascript:void(0);">tutorial</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover6.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/syntax/&quot;);" href="javascript:void(0);">syntax</a><span class="categoryBar-list-count">9</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover1.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/CPP/&quot;);" href="javascript:void(0);">CPP</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr"></span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.7.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a><a class="github-badge" target="_blank" href="https://cloud.tencent.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路部署于腾讯云" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-%E8%85%BE%E8%AE%AF%E4%BA%91-pink?style=flat&amp;logo=tencentqq" alt=""/></a><a class="github-badge" target="_blank" href="https://www.xwysyy.cn/" style="margin-inline:5px" data-title="rating" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/dynamic/json?logo=codeforces&amp;label=Codeforces&amp;url=https://codeforces-api.xwysyy.cn/api/codeforces/kmsgk&amp;query=%24.rating&amp;prefix=rating%20&amp;cacheSeconds=86400" alt=""/></a><a class="github-badge" target="_blank" href="https://www.xwysyy.cn/" style="margin-inline:5px" data-title="rating" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/dynamic/json?logo=codeforces&amp;label=Codeforces&amp;url=https://codeforces-api.xwysyy.cn/api/codeforces/xwysyy&amp;query=%24.rating&amp;prefix=rating%20&amp;cacheSeconds=86400" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/" style="margin-inline:5px" data-title="萌ICP备20232640号" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20232640-fe1384?style-flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAByxJREFUSInl1nlwVeUZx/HPuTckkD0kQFiCEEIUlNUCAqKoSBV1AIt1ikpVLFbLONjWGUXbmWrbweJMy7hUxbbTjsUq6KCiWEvr0kE2WVK2QCKBJCxJgEASsienfxwqMob+3Zm+f93z3vM+32f5vc9z+H9bwVcfOp/YQ+1prhhEZS1VDQzqQ1MjiQmIC5Liwm3lBWpqFimrulb/7A/067vM2IsOBZ2h8MhJQW6KMDNVsKeaizKEyUlsKueqgWJ39AMJF3QpDCNYr1SaEig/lWNX2Z1h6dH5/lVyGdVIZFf7MHo9bEfh9rCg/+8NyHlN77QTsnpQ0i2y08VK+BosfhbW0cHxqmSfFd9qW+l9Pi+5WltFdGTsOBbO5dJcdh3lN5+xff0Y2zuelXjRsyYUrjOu4BVJaavlpbWIJRBLOM+J81O95AAnTtM9vNHGknut3zdT48FutJE3koWTuG4oSXH+VsInX3B9IdcVUNfCuv08t4GjO6NspOa3BNcOXx1eOugVHQnrTMkTuyWrC/BjRZO9uPYTpw7HhTWkXcLd45l9GblpHD7NWzt5ZTMXZ/OdkTy+lvR07rmcmWffq6pn9W5e/oymfcT6kJbXHiydMyVYkL/x66n+ZMcctQfjhgxl6UIGZ3Ooltd2RIZqjqKRS0ew9cFIA1cO5urlLHuPZWsZPJiZw7gqn0VT2HCIR9+jvCQhfHPrLGyE2Hng2roBxHnmJoZnc9drbD3I6QaaWkjpSVoeu4+x5XB05qMDqCenHz37UHmcFRv54ZuMeoYrB/L0DPRgZ0WfrsXVKzPX3nYykrn3dUZl8+Q0Qox/gc/L6ZlKzxQefo+UROpa6Z4VCedkPd8YyJYHI3u5T/HAShZNQxsXZfR3pCtwRW066VEeOuIUVUf77+9jTw2pycTOJml7Je1t9EgiI5X2jkgyze1fCSSdtjhBiJCkpKyuI+5oTdAtkTCgVwrbKsl8ko6QjO40tZ67EpkpdIbRf20dkbPpPTjdwsSX6I5dJYy4hoQAaZQdDy4A1iEMI613T6LtBPXJpPakrjGqc1Y6CTFq62htJp5KRwPJKWSkU3WKiiPEEqO6xgM6oZmctJhDXYH7Z59xuCyKpK6R26ZE+ys3MWYoN1/Mc5uoqmbEQJ6fTc/ulJ3i/lUc+YIfzeKhKzjVHN31A3XRHddKSrf6/6DOV3VTcw1hVKfkxOhaPDAe1UwfwmNTqT1Drxw+nE9xNXetIjHG2vnoxoT+rNrN2Of58Rp6JZ+ldKes5kjX4G7dKuikpoERfaltYnQ/DOSS3hEAFk9lXQkLnmf7Ib65lPJT3HU1+46Tm8rYvgzKYVA2h+vQIMjvewHwdSN20MiOSmZczO4a1hSzYi77T7CiiPF5JMTZexjJ5OagkwNV9M+MnJ09nKU3smgyQ3PYWoEO4fUjii4QceJmevJuMeP6csUAln4atcbSGoqOUpjD30uZNwnpHNtN3lC+NZa1xeT34pGVTJ3PL9+Ohs6GQ8gVtHZs6VLVwZhBReGwoXvt3THM/hP0SWVnCR8f4PMjkffjB/DQS8waxpHFfFgaaeHZDRRtJn0yP5tF31ymFVJ2nN27GD66KBzca2/XEWdkUpD3Fmd4tYj0FMS54Q9UnuaDUv6yE/24ewWP/DU6N/d1fvousYEs28DyLVEvGDOAt/egmSkXv2VYn3NBfpXbua6J8hMFFvy2RHsL+57gmX+w/AN651PfEDWQzLRI+afqIqOxFDJT6Rbn9Bmad3PnTH5wIxOXkJTWGiz57hCDsyqDWVldRNzeyOh+paaPfpFKnvqQX88iZwDVx0lLJqUHbe3EkZ1Odm+yUqK2GHYKmhvIG8fyeTz9IY5x67jnFPapdPDkl6jzwEF9IDjZJlgwfbG+o2u8+g4rd7D/UYI41TXnevV5K4j2q6uESckUP8rvNrH6fUH/sRXB9AlPONMSDZ8uazwoi56JjEyvdftV88jinhf4uIzmJRQOoOYgja0RKAiIBZxpjvZH5tP0c97axcLlyBXOuWZemJTYFFbUCU+1dl3j8PGSyFhnJ7EkYcWh7/njqpep5xfzWTyZZ7dEg73xOJKiGqf3YenNLBjLTz7i539COg/OvSOYO2GFo/VRG0Zwe0YX4Ns3R7NXSCxBeM8IthXfZvGf3xCWc/kkXvg2vVP4YB/rDzC1gGlDo+50/xvs2khKPrNnzAzmTH5HbzR0fkkKro93Ab5vx9kfaGgT3lLA5EyWbRpoTdHbSreOppGJV/PwlRTksK+aZz5l6z+RLBgxaau5k2cJelTKzmRQMq0d51J8UxL+23d1TDTcj7WQllZu4YwxDo+eZc22X9mwd6gN65GIFmQzampxcMOoR1xeuMbpVoqromsXdG3+wmCiekNtfSSmiUNWu2zgap+WjlZW8X11TeNkpWwICvNfCm8u3Cmxg4PN0VdmEJw7/7+0/g32RaqCbhRecAAAAABJRU5ErkJggg==" alt=""/></a><a class="github-badge" target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" style="margin-inline:5px" data-title="本网站由又拍云提供CDN加速/云存储服务" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-%E5%8F%88%E6%8B%8D%E4%BA%91-00b6ff?style=flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAABs1JREFUSInllv2PVFcZxz/n3LfZmdmd3ZndZWGhhV0qYLaFEgzQpog12tZYbVRCSa00mLap6Q+aNERp5QcVlRhi0GjaGElromI08aU1tMRXWmspRaEVbIDtdimwy77M7uy83Xvn3nP84c7b7oD/QE8yyT13znO/z/f7nOcF3m9L1B4OnNYYEoSG165kGZkukLLjdEmXiew4yum7+4qK31u2rduLFXOgEEoQCrQs9RjepaW2f35Nu/9QqRh4Fi4jrkHCMmhTitlCBcOIoP768CoAzGt5owFLQBKfad/Yflau+Mo4qY0IE8qAUbXUgKT9ctFZVJAzqzcivLN+/JGY0H6HKD0riKGvw7gFWAFtUmMTyFPF5C+Gded2LBmBaB2BAigRyeMJ0jGPgxtiyX+MtW18/ZL1DLEMK/TER9eb+Z2GQGU1CK0b8gKy9uCYYJmQcUCgUm+U0qeGw/R2pIwAdbPvAiE0aAGux0MDc7eJAJ57V7+GZYAQjLDo8yd0z6lAqQ5bBbh+iF8JWxmP5XwSJrhCyz9NJU7mdHwwknOBWEKAAq0EuIrPrKp8d3lb+M/HT/qvlsN2pKNRSoDUXAxSN+eKlWMPD7jrFi3pZc4NeHUh4+zcNMW5q/z47dLhi4X4IHYt2hFDBBFDpUmYJXoNb+y23tzPHlgRfu2F8bZ9s4W2zdgSpap2OopbzsysPUHX85YIcdU1YnxLX5pT0+59w+X4NqwmpgIIgUCxNF4+vsaY2bsknjtq+yYTnsGhMx33H8127SFp03KTBBAT/H3U+qTIZe9ambFfagHOl0OOjJs/wjCZdwtCARI2d899Z0iP7Rkv2J0ngu49xUCvu1R2+sJS6g4MAyF11deasY5+CjBs3jE6f3KrMXlDC/Cfr0xuuegtWYIpmjwXUA7YcbP69tb2ypPfO5naPyJ7d4fKioLUDihdVxZEpI4ApGiEyoKLM8aydyx5J/CXeTE+m5PbkFZV4qpBoPlAJnh7R7rw5G8vm9+/4PfvDg0rSiMdgYraeQ0xGVZu78o9tSUx9ViK0pUGc0CbTNtdu1oYG7Geu+vFAaLbqz0+3B1sf2WKnhcvJ79MvCn21JiKiGIAt6amn9scK+4brpiskOHMKRU/jCSS2xG8ddVbVcOrM54KrBvqoERyO4YqLTaKb76ct7+JtufHfuEyYKIkeoKKpN12ySs1QF28qkJmrL8FuBwqv7HTEELC4b/Fks/EjPgcDq05TeO8EJrhSten35KLDjpmhfd8/QBNYY6clp0twC1LAmGQLJdyCF08gub/MtYCECZni+JBTyYwrKS7ML2UbrxplEwpHeoJHkk9IPO/z3QluKen/GC/MXuM8PrIQkc3+sY298hAwsIQbSvnAWuwpSq3AGesyhhh08EwZKBdHi+EDjEkyxLBm9dtNYjqXx5DTnHvsCeXFCoi1fh6VPEsEYy3ACf1zN9qlRE0whAcdzM/GCk5Hz+W1dv+U0jubFy+aqdpFsCD9en8r4ba9fDLU6mfI8wo7Zqc65Ccru3q6dQtC79EVb6AUc1lQzJakP2jOvUSZrqKUgu0QMvqNgBkyOpk7ndfXKruP+11Pf5uwdgqHYWqHwIIGTTLh88tBN7a3/3i+VF/ZtyzujAFut57a0d0A1sDpdzoUkfMdCTNs4Pm3MG1nfL1Fy7bjxwtxn6IXfOzauNDZ6w8u67Pf/7IQuDB3hSfCMtPHDoX/hTDaJKxXgzR1ca/PjnzxOL47IGgXOYG2+U9f/Gyw1Op31yYsz6LKcEEpZryyPe5d1B+dWnf4rrwdeATo+P0yfBQr53cOVHp2oIjWpo/LgwlZp/etdo78MeJ9DeO5cUmM+fflNcdy9E2ONGkoWvZIQSUFGt63ZNb+hPPzPr1S9KUTlYndizDl1Zan+qOlXNUqobVD2gPMubcyP4PlR57Ix979MhI+9fLRsfH8qJ7OYYNhkZo1dRfNATQ3ebmdq2073KFQTmgFfjG7jjprjgrMsncPb2FDXEKkwRV8BCEGbD7g2LNmdnYwLPn257Gro6kNMaixlQlwJckVXbyvszsBseJTU+VqA4JC4DdisavwNUy2Ia4sCk5OdRvzLxCBXAVj64NdvTGtbf337ETaBvMa3V9EQ2BFbgpkf/XnbHpIUuHF2YrYMqGgPNi3OxJIZQgjYmNidIdYwHfyjpZ3ZGtHN6fXXbOVfE0MebncHXMAUiL4uRHlpQP3pJW+04OC3KhST+tw8k152oJeEpQNGxWx0tP+WGeK0Xbcb3SWCYpTS80ul0lECi0EF6n8LNJOzjThvuHobj/603dTnFcORQDQcf1y937bP0Pc6b8FW3Czt0AAAAASUVORK5CYII=" alt=""/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px" data-title="冀ICP备2023010011号" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E5%86%80ICP%E5%A4%87-2023010011%E5%8F%B7-e1d492?style=flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAACNlJREFUSInF1mmMVeUdx/Hv2e+5+519mJWBYQZkGxZZxLKJqBXGoLS1iXWrmihotFXaJiTWWlsbl6q1aetWd5u0VkKjNG4YEJSlOCibDLMwM8x679z9nnPP1jcVJUxf+7z6J8+LT37/Z4VvaQhfFS8+sBXbctCDGrVTKlBUH4mxAbI9Hfj0IJLsp6paJ5/tmn20N/D0wKDRMq9F/c3M2U1/V0vDfWMFh+tv/Ig1zYPMabDImPJ52OaXO87W580KggCiiOsJOJ6I3wcNFaaeNKxrt72f2fLGu4FpJ/sDQABRzD22fH7/Yze069vGc6mrDLNIJCDik10sxz2by3VdPM87xzkP9jwPTZFRVI1YUJKH+oy7n3tbvv/P2wW/UQxRWe6w4ZJRptYLHDoCuz8v5cP92XbI762O+h6UVWHnUFbPpU0fEb2A60mMJ7MUi9b/b7UgKhiZMaIxm8YLplLMDPz8hl/EH+rs8TNlUpFf32uyZJGLPDwCiTGUyTWodTN49eUCdz2YwXb9NNcObp1X98WDoufynzMVCEKGn27ayPTWBi5ad8P5iQUkJEnFLjqM9Z+hrVX0vfDe6K2dPRWsW2bwyp9EUifSJB84gdxrkR0eRgv1o/3I4fbbprJ6scqamzVO9pffec1S5ZWY2Nfz5qEy/FqOC2Y3s3j53HMSi18VRjFPwSwg+1RfVbl115vvJrsfej7UGIsYPPGgQ7JXoO+Xx5B3dHEomyJ9x1qiQozkr95h5937aFnVyouPlgJK+Ss7Fxz64OTSxSX+LHYxT2IsRW5kbGI4oHcR0jqoqTjV9se3I7/f8rS/ClS23GxSXhph6L5d9Akm7qqZhHWBQGUJ+CWGFzcg7e7m6D3/ZuW1Ea5YKdA3EojuONi813TqNi+YPYOKUhXDtCeGL26/hakLLiEcdsaHRkRAoLRc4fJrmhnekyF0apgZowWSwwkaa+rw3f8WA1GZZsPP5JEChX8dhZTN6iU6kAcs5s+dHd183SJ0VVKL57pfw6YdRQw23aeWTns47DPTALWlRTR7kMLew6hGgYqUhWXYFFUdPZ6lUBahLA8hVcOftckfi7No7VRAAQqsX1dybfvG1qwriM9mM5mJ4e4jO5Cc01dPqixbr8tWGBQUL4vjGigEEShi+xUmZ2RiR/sJ1pbS8NkgZrKAGw0TsgQsQyFaF/nfYTGprAlMFysbA1pI3mhkR6snhGsaymYGvPyFEb9IdbUE2AzFFTwpRqCtBY0wmdER+hZW4j63gcJj38V+/ErSUZXsYBfjIZHIRW0c2Z8BskCAqN+CbBJBFnyyKjR+Ez57nBxLqpfMUeSISElMBFz6x2Q6OxzWrYjyxWVzEewioU3LCS5vQY6nMUrLwNaxXvoQ59IloFSx54PPAZtQLExVZZDxsVE8J4dn6v4JYatgbSjk0owPw7RGH2ADMo88Z7L20ip8f7gC7fAo0q4+0rt7kEQDvaghVZbiPHUHcyeXcfLjT3jmpR7AYsnSScya3UR8bARVMck7Y/cB75/X6rDf3Fg2dw2jKZm5dXGm1LuAzO5DCo9v6aT0ibco5kzOvLOP+NGTFJtDpPYeZKijk/Rn3QxsfZV7txwhX7ABiZUXBsGvIvguQApNQQva9RMmTvZ2dpVUls+tX/UD7GN/Y8Ws05w6rQF+9vyzg1vZjbvMRJhXiRSU8DpTFFe0QE8S6SfPkOkZoktrB2oAhZWrwljxOPmchiSMYOWNoxNuruFU5vWeXdsojiUon345113dBBQBmTYlTimgdB8nfPo4WjaNFgN9OMEkJ02dnadVt5ki54Esqy+bzKJltVhSPbI3iN2zCyMTeXNCuG7Omm2Zok7PR2+R7jvD8ouruHhmCrB5jVZeYxLdrTP4sr4Vtd9g4MA4qc4c+6cu5NPamfw4P59t2WrA4YdXKkASf7SFivo6PDdEPmf1fRM++zp1bH/0r4I1dD1ODtOWaW4IsvPjL7nqXhloQiSPwjjgMYkMASyGEBkjhISCQwkwzve/18AbT+pk8pVY4UacQi9y+gyZ0eRAw4qHa89LXEx1LXMSPfhDJYRb59BtlLKg2WPT2l6qYl1svtGkrLYckyA1S+t5+2ATm37WCui0LSynsckDNH5zTxAchbQtkx08hDHYiW6NgC0enHBzEZ102UDH8QORdEckjEzZrNWkRydzyx17uGnDXqbUnGZ6dRPjSY91q2TqwjFuvTxLo5Zn5Qo/pumRSFcTLQtybEhGE0fQrDhhJ0VvH2lTnnHPhGtsmWan469apERjI2MH3qN7+7MEfH6ql29CbV7PvsMG32k6yU2XDhEKyZw66eJaRdrXR7CzCcqUNC3zwgymPJRCH4KRRLINimpL14A5Y4GDeOqbsPRVcfuN7Xj44pav/hFfrNT2kr2rsqf2Ibp5pEA14ZIImUyW3t5REkkTXRGQ/DGGhtLginhqCWknQDE5hKf5UFSF9Lj020Q2ul5V1AR2hr+8vuP8Vlc2zMPRxoSjnx7XBC14sDoydahSGq7KdO/HFyrBchxCVfX4fDKp4T7SCQejYODZLrYgIqgKFsNIgQqEYob8mW6yiUyb7Z64LVK/+B85xznnJ3AWzqTzuIX46mr5wLs+UUTyIriBCjRNxguHMJIFDLEEvXEOVRWnSJ0+jCd4CJoGjoedM1CLcXQziW3nMV2TSMBeOx7vWZvPt1r+cMPzE8KunaUkFn0vNrvtqXj34c1W6gzxlEQ6naIoBahtnkMwoFMwIVzSRNguMt53Aj2s4nkSlgPoGqLkICsRNF0gl8rYWuP8+11/w/OOJDEhHPKLCIpOXmi+M9AgP+maiesLifF2T1Rn5ZNj5Lo/Qc/GcPMmhdoqlEgIGzCK4PiCmJKK68p4KfF3qYGuF0qCRUkJTzleUbvQyWRTuE5xYthxQbBs7EISAbkzUFG3VfXXbK2YFi3X/eryfKKnqVBItNjJxDzH8erddC4SqWwcN5WyTtlyO1RP/Lh3eHD76MB40swmiDVJyDLYRhpc5+ub6tse/wWKbvSQEAw1awAAAABJRU5ErkJggg==" alt=""/></a><a class="github-badge" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13060602001624" style="margin-inline:5px" data-title="冀公网安备13060602001624号" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E5%86%80%E5%85%AC%E7%BD%91%E5%AE%89%E5%A4%87-13060602001624%E5%8F%B7-e1d492?style=flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAACNlJREFUSInF1mmMVeUdx/Hv2e+5+519mJWBYQZkGxZZxLKJqBXGoLS1iXWrmihotFXaJiTWWlsbl6q1aetWd5u0VkKjNG4YEJSlOCibDLMwM8x679z9nnPP1jcVJUxf+7z6J8+LT37/Z4VvaQhfFS8+sBXbctCDGrVTKlBUH4mxAbI9Hfj0IJLsp6paJ5/tmn20N/D0wKDRMq9F/c3M2U1/V0vDfWMFh+tv/Ig1zYPMabDImPJ52OaXO87W580KggCiiOsJOJ6I3wcNFaaeNKxrt72f2fLGu4FpJ/sDQABRzD22fH7/Yze069vGc6mrDLNIJCDik10sxz2by3VdPM87xzkP9jwPTZFRVI1YUJKH+oy7n3tbvv/P2wW/UQxRWe6w4ZJRptYLHDoCuz8v5cP92XbI762O+h6UVWHnUFbPpU0fEb2A60mMJ7MUi9b/b7UgKhiZMaIxm8YLplLMDPz8hl/EH+rs8TNlUpFf32uyZJGLPDwCiTGUyTWodTN49eUCdz2YwXb9NNcObp1X98WDoufynzMVCEKGn27ayPTWBi5ad8P5iQUkJEnFLjqM9Z+hrVX0vfDe6K2dPRWsW2bwyp9EUifSJB84gdxrkR0eRgv1o/3I4fbbprJ6scqamzVO9pffec1S5ZWY2Nfz5qEy/FqOC2Y3s3j53HMSi18VRjFPwSwg+1RfVbl115vvJrsfej7UGIsYPPGgQ7JXoO+Xx5B3dHEomyJ9x1qiQozkr95h5937aFnVyouPlgJK+Ss7Fxz64OTSxSX+LHYxT2IsRW5kbGI4oHcR0jqoqTjV9se3I7/f8rS/ClS23GxSXhph6L5d9Akm7qqZhHWBQGUJ+CWGFzcg7e7m6D3/ZuW1Ea5YKdA3EojuONi813TqNi+YPYOKUhXDtCeGL26/hakLLiEcdsaHRkRAoLRc4fJrmhnekyF0apgZowWSwwkaa+rw3f8WA1GZZsPP5JEChX8dhZTN6iU6kAcs5s+dHd183SJ0VVKL57pfw6YdRQw23aeWTns47DPTALWlRTR7kMLew6hGgYqUhWXYFFUdPZ6lUBahLA8hVcOftckfi7No7VRAAQqsX1dybfvG1qwriM9mM5mJ4e4jO5Cc01dPqixbr8tWGBQUL4vjGigEEShi+xUmZ2RiR/sJ1pbS8NkgZrKAGw0TsgQsQyFaF/nfYTGprAlMFysbA1pI3mhkR6snhGsaymYGvPyFEb9IdbUE2AzFFTwpRqCtBY0wmdER+hZW4j63gcJj38V+/ErSUZXsYBfjIZHIRW0c2Z8BskCAqN+CbBJBFnyyKjR+Ez57nBxLqpfMUeSISElMBFz6x2Q6OxzWrYjyxWVzEewioU3LCS5vQY6nMUrLwNaxXvoQ59IloFSx54PPAZtQLExVZZDxsVE8J4dn6v4JYatgbSjk0owPw7RGH2ADMo88Z7L20ip8f7gC7fAo0q4+0rt7kEQDvaghVZbiPHUHcyeXcfLjT3jmpR7AYsnSScya3UR8bARVMck7Y/cB75/X6rDf3Fg2dw2jKZm5dXGm1LuAzO5DCo9v6aT0ibco5kzOvLOP+NGTFJtDpPYeZKijk/Rn3QxsfZV7txwhX7ABiZUXBsGvIvguQApNQQva9RMmTvZ2dpVUls+tX/UD7GN/Y8Ws05w6rQF+9vyzg1vZjbvMRJhXiRSU8DpTFFe0QE8S6SfPkOkZoktrB2oAhZWrwljxOPmchiSMYOWNoxNuruFU5vWeXdsojiUon345113dBBQBmTYlTimgdB8nfPo4WjaNFgN9OMEkJ02dnadVt5ki54Esqy+bzKJltVhSPbI3iN2zCyMTeXNCuG7Omm2Zok7PR2+R7jvD8ouruHhmCrB5jVZeYxLdrTP4sr4Vtd9g4MA4qc4c+6cu5NPamfw4P59t2WrA4YdXKkASf7SFivo6PDdEPmf1fRM++zp1bH/0r4I1dD1ODtOWaW4IsvPjL7nqXhloQiSPwjjgMYkMASyGEBkjhISCQwkwzve/18AbT+pk8pVY4UacQi9y+gyZ0eRAw4qHa89LXEx1LXMSPfhDJYRb59BtlLKg2WPT2l6qYl1svtGkrLYckyA1S+t5+2ATm37WCui0LSynsckDNH5zTxAchbQtkx08hDHYiW6NgC0enHBzEZ102UDH8QORdEckjEzZrNWkRydzyx17uGnDXqbUnGZ6dRPjSY91q2TqwjFuvTxLo5Zn5Qo/pumRSFcTLQtybEhGE0fQrDhhJ0VvH2lTnnHPhGtsmWan469apERjI2MH3qN7+7MEfH6ql29CbV7PvsMG32k6yU2XDhEKyZw66eJaRdrXR7CzCcqUNC3zwgymPJRCH4KRRLINimpL14A5Y4GDeOqbsPRVcfuN7Xj44pav/hFfrNT2kr2rsqf2Ibp5pEA14ZIImUyW3t5REkkTXRGQ/DGGhtLginhqCWknQDE5hKf5UFSF9Lj020Q2ul5V1AR2hr+8vuP8Vlc2zMPRxoSjnx7XBC14sDoydahSGq7KdO/HFyrBchxCVfX4fDKp4T7SCQejYODZLrYgIqgKFsNIgQqEYob8mW6yiUyb7Z64LVK/+B85xznnJ3AWzqTzuIX46mr5wLs+UUTyIriBCjRNxguHMJIFDLEEvXEOVRWnSJ0+jCd4CJoGjoedM1CLcXQziW3nMV2TSMBeOx7vWZvPt1r+cMPzE8KunaUkFn0vNrvtqXj34c1W6gzxlEQ6naIoBahtnkMwoFMwIVzSRNguMt53Aj2s4nkSlgPoGqLkICsRNF0gl8rYWuP8+11/w/OOJDEhHPKLCIpOXmi+M9AgP+maiesLifF2T1Rn5ZNj5Lo/Qc/GcPMmhdoqlEgIGzCK4PiCmJKK68p4KfF3qYGuF0qCRUkJTzleUbvQyWRTuE5xYthxQbBs7EISAbkzUFG3VfXXbK2YFi3X/eryfKKnqVBItNjJxDzH8erddC4SqWwcN5WyTtlyO1RP/Lh3eHD76MB40swmiDVJyDLYRhpc5+ub6tse/wWKbvSQEAw1awAAAABJRU5ErkJggg==" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="https://unpkg.zhimg.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.min.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;tutorial/Codeforces/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/43.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-09-11</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;tutorial/Codeforces/&quot;);" href="javascript:void(0);" alt="">Codeforces</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;tutorial/Codeforces/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;algorithm/xwysyy Algorithm/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/46.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-02</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;algorithm/xwysyy Algorithm/&quot;);" href="javascript:void(0);" alt="">xwysyy Algorithm</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;algorithm/xwysyy Algorithm/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;syntax/LaTeX/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/img-background/54.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-01</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;syntax/LaTeX/&quot;);" href="javascript:void(0);" alt="">LaTeX</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;syntax/LaTeX/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://cdn.cbd.int/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalendar.xwysyy.cn/api?xwysyy",['#ebedf0', '#f0fff4', '#dcffe4', '#bef5cb', '#85e89d', '#34d058', '#28a745', '#22863a', '#176f2c', '#165c26', '#144620'],'xwysyy')
    }
  </script><!-- hexo injector body_end end --></body></html>